<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ í€´ì¦ˆ ê²Œì„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .option-btn {
            transition: all 0.3s ease;
        }
        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        .correct {
            background: #10b981 !important;
            color: white !important;
        }
        .wrong {
            background: #ef4444 !important;
            color: white !important;
        }
        .pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        .celebrate {
            animation: celebrate 0.6s ease-out;
        }
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1) rotate(5deg); }
            100% { transform: scale(1); }
        }
        .timer-bar {
            transition: width 0.1s linear;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4">
    <div class="container mx-auto max-w-4xl">
        <!-- Start Screen -->
        <div id="startScreen" class="glass rounded-2xl shadow-2xl p-8 fade-in">
            <div class="text-center">
                <i class="fas fa-brain text-6xl text-purple-600 mb-4"></i>
                <h1 class="text-4xl font-bold text-gray-800 mb-2">í•œêµ­ í€´ì¦ˆ ê²Œì„</h1>
                <p class="text-gray-600 mb-8">ë‹¹ì‹ ì˜ ì§€ì‹ì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!</p>

                <div class="mb-8">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">ì¹´í…Œê³ ë¦¬ ì„ íƒ</h2>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        <button onclick="selectCategory('all')" class="category-btn glass rounded-xl p-4 hover:bg-purple-100 transition">
                            <i class="fas fa-globe text-3xl text-purple-600 mb-2"></i>
                            <p class="font-semibold">ì „ì²´</p>
                        </button>
                        <button onclick="selectCategory('ìƒì‹')" class="category-btn glass rounded-xl p-4 hover:bg-blue-100 transition">
                            <i class="fas fa-lightbulb text-3xl text-blue-600 mb-2"></i>
                            <p class="font-semibold">ìƒì‹</p>
                        </button>
                        <button onclick="selectCategory('ì—­ì‚¬')" class="category-btn glass rounded-xl p-4 hover:bg-yellow-100 transition">
                            <i class="fas fa-landmark text-3xl text-yellow-600 mb-2"></i>
                            <p class="font-semibold">ì—­ì‚¬</p>
                        </button>
                        <button onclick="selectCategory('ê³¼í•™')" class="category-btn glass rounded-xl p-4 hover:bg-green-100 transition">
                            <i class="fas fa-flask text-3xl text-green-600 mb-2"></i>
                            <p class="font-semibold">ê³¼í•™</p>
                        </button>
                        <button onclick="selectCategory('ì—°ì˜ˆ')" class="category-btn glass rounded-xl p-4 hover:bg-pink-100 transition">
                            <i class="fas fa-star text-3xl text-pink-600 mb-2"></i>
                            <p class="font-semibold">ì—°ì˜ˆ</p>
                        </button>
                        <button onclick="selectCategory('ìŠ¤í¬ì¸ ')" class="category-btn glass rounded-xl p-4 hover:bg-red-100 transition">
                            <i class="fas fa-football-ball text-3xl text-red-600 mb-2"></i>
                            <p class="font-semibold">ìŠ¤í¬ì¸ </p>
                        </button>
                    </div>
                </div>

                <div class="bg-purple-50 rounded-xl p-6 mb-6">
                    <h3 class="font-semibold text-gray-700 mb-3">ê²Œì„ ê·œì¹™</h3>
                    <ul class="text-sm text-gray-600 text-left space-y-2">
                        <li><i class="fas fa-check text-green-500 mr-2"></i>ê° ì§ˆë¬¸ë‹¹ 10ì´ˆì˜ ì‹œê°„ì´ ì£¼ì–´ì§‘ë‹ˆë‹¤</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>ì •ë‹µì„ ë§ì¶”ë©´ ì ìˆ˜ì™€ ì—°ì† ì •ë‹µ ìŠ¤íŠ¸ë¦­ì´ ì¦ê°€í•©ë‹ˆë‹¤</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>ë¼ì´í”„ë¼ì¸ì„ í™œìš©í•˜ì„¸ìš” (50:50, ìŠ¤í‚µ)</li>
                        <li><i class="fas fa-check text-green-500 mr-2"></i>ìµœê³  ì ìˆ˜ë¥¼ ë‹¬ì„±í•´ë³´ì„¸ìš”!</li>
                    </ul>
                </div>

                <button onclick="startGame()" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-xl transition transform hover:scale-105">
                    <i class="fas fa-play mr-2"></i>ê²Œì„ ì‹œì‘
                </button>

                <div class="mt-8">
                    <button onclick="showLeaderboard()" class="text-purple-600 hover:text-purple-800 font-semibold">
                        <i class="fas fa-trophy mr-2"></i>ìµœê³  ê¸°ë¡ ë³´ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="hidden">
            <!-- Header Stats -->
            <div class="glass rounded-2xl shadow-2xl p-6 mb-4">
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div>
                        <i class="fas fa-star text-yellow-500 text-2xl mb-1"></i>
                        <p class="text-sm text-gray-600">ì ìˆ˜</p>
                        <p id="score" class="text-2xl font-bold text-gray-800">0</p>
                    </div>
                    <div>
                        <i class="fas fa-fire text-orange-500 text-2xl mb-1"></i>
                        <p class="text-sm text-gray-600">ì—°ì† ì •ë‹µ</p>
                        <p id="streak" class="text-2xl font-bold text-gray-800">0</p>
                    </div>
                    <div>
                        <i class="fas fa-clock text-blue-500 text-2xl mb-1"></i>
                        <p class="text-sm text-gray-600">ë‚¨ì€ ì‹œê°„</p>
                        <p id="timer" class="text-2xl font-bold text-gray-800">10</p>
                    </div>
                </div>

                <!-- Timer Bar -->
                <div class="mt-4 bg-gray-200 rounded-full h-2 overflow-hidden">
                    <div id="timerBar" class="timer-bar bg-gradient-to-r from-green-400 to-blue-500 h-full" style="width: 100%"></div>
                </div>

                <!-- Progress -->
                <div class="mt-4 flex items-center justify-between text-sm text-gray-600">
                    <span>ë¬¸ì œ <span id="questionNum">1</span> / <span id="totalQuestions">10</span></span>
                    <div class="flex space-x-2">
                        <button id="fiftyFifty" onclick="useFiftyFifty()" class="bg-yellow-500 text-white px-3 py-1 rounded-lg text-xs hover:bg-yellow-600 transition">
                            <i class="fas fa-divide mr-1"></i>50:50
                        </button>
                        <button id="skip" onclick="skipQuestion()" class="bg-blue-500 text-white px-3 py-1 rounded-lg text-xs hover:bg-blue-600 transition">
                            <i class="fas fa-forward mr-1"></i>ìŠ¤í‚µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- Question Card -->
            <div class="glass rounded-2xl shadow-2xl p-8 fade-in">
                <div class="mb-6">
                    <span id="categoryBadge" class="inline-block bg-purple-100 text-purple-800 px-4 py-1 rounded-full text-sm font-semibold mb-4"></span>
                    <span id="difficultyBadge" class="inline-block bg-blue-100 text-blue-800 px-4 py-1 rounded-full text-sm font-semibold mb-4 ml-2"></span>
                </div>

                <h2 id="question" class="text-2xl font-bold text-gray-800 mb-8"></h2>

                <div id="options" class="space-y-4">
                    <!-- Options will be inserted here -->
                </div>

                <div id="feedback" class="hidden mt-6 p-4 rounded-xl">
                    <!-- Feedback will be shown here -->
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="resultScreen" class="hidden glass rounded-2xl shadow-2xl p-8 text-center fade-in">
            <i class="fas fa-trophy text-6xl text-yellow-500 mb-4"></i>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">ê²Œì„ ì¢…ë£Œ!</h2>

            <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 mb-6">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <p class="text-gray-600 text-sm">ìµœì¢… ì ìˆ˜</p>
                        <p id="finalScore" class="text-4xl font-bold text-purple-600">0</p>
                    </div>
                    <div>
                        <p class="text-gray-600 text-sm">ìµœê³  ì—°ì† ì •ë‹µ</p>
                        <p id="maxStreak" class="text-4xl font-bold text-orange-500">0</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <p class="text-gray-600 text-sm">ì •ë‹µ ìˆ˜</p>
                        <p id="correctAnswers" class="text-2xl font-bold text-green-600">0</p>
                    </div>
                    <div>
                        <p class="text-gray-600 text-sm">ì •ë‹µë¥ </p>
                        <p id="accuracy" class="text-2xl font-bold text-blue-600">0%</p>
                    </div>
                </div>
            </div>

            <div id="newHighScore" class="hidden bg-yellow-50 border-2 border-yellow-400 rounded-xl p-4 mb-6">
                <i class="fas fa-crown text-yellow-500 text-2xl mb-2"></i>
                <p class="text-yellow-800 font-bold">ìƒˆë¡œìš´ ìµœê³  ê¸°ë¡!</p>
            </div>

            <div class="space-y-3">
                <button onclick="shareResults()" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition">
                    <i class="fas fa-share-alt mr-2"></i>ê²°ê³¼ ê³µìœ í•˜ê¸°
                </button>
                <button onclick="restartGame()" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-xl transition">
                    <i class="fas fa-redo mr-2"></i>ë‹¤ì‹œ í•˜ê¸°
                </button>
                <button onclick="showLeaderboard()" class="w-full bg-gray-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-gray-700 transition">
                    <i class="fas fa-trophy mr-2"></i>ìµœê³  ê¸°ë¡ ë³´ê¸°
                </button>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboardScreen" class="hidden glass rounded-2xl shadow-2xl p-8 fade-in">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800">
                    <i class="fas fa-trophy text-yellow-500 mr-2"></i>ìµœê³  ê¸°ë¡
                </h2>
                <button onclick="hideLeaderboard()" class="text-gray-600 hover:text-gray-800">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>

            <div id="leaderboardList" class="space-y-3">
                <!-- Leaderboard entries will be inserted here -->
            </div>

            <button onclick="clearLeaderboard()" class="w-full mt-6 bg-red-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-red-600 transition">
                <i class="fas fa-trash mr-2"></i>ê¸°ë¡ ì´ˆê¸°í™”
            </button>
        </div>
    </div>

    <script>
        // Quiz Data
        const quizData = [
            // ìƒì‹
            { category: 'ìƒì‹', difficulty: 'ì‰¬ì›€', question: 'ëŒ€í•œë¯¼êµ­ì˜ ìˆ˜ë„ëŠ”?', options: ['ì„œìš¸', 'ë¶€ì‚°', 'ì¸ì²œ', 'ëŒ€ì „'], correct: 0 },
            { category: 'ìƒì‹', difficulty: 'ì‰¬ì›€', question: 'í•œê¸€ì„ ë§Œë“  ì¡°ì„ ì˜ ì™•ì€?', options: ['ì„¸ì¢…ëŒ€ì™•', 'íƒœì¡°', 'ê´‘í•´êµ°', 'ì˜ì¡°'], correct: 0 },
            { category: 'ìƒì‹', difficulty: 'ë³´í†µ', question: 'ê¹€ì¹˜ì˜ ì£¼ì¬ë£ŒëŠ”?', options: ['ë¬´', 'ë°°ì¶”', 'ì˜¤ì´', 'ë‹¹ê·¼'], correct: 1 },
            { category: 'ìƒì‹', difficulty: 'ë³´í†µ', question: 'í•œêµ­ì˜ êµ­í™”ëŠ”?', options: ['ì¥ë¯¸', 'ë¬´ê¶í™”', 'ì§„ë‹¬ë˜', 'ë²šê½ƒ'], correct: 1 },
            { category: 'ìƒì‹', difficulty: 'ì–´ë ¤ì›€', question: 'ëŒ€í•œë¯¼êµ­ êµ­íšŒì˜ì›ì˜ ì„ê¸°ëŠ”?', options: ['3ë…„', '4ë…„', '5ë…„', '6ë…„'], correct: 1 },
            { category: 'ìƒì‹', difficulty: 'ì–´ë ¤ì›€', question: 'í•œêµ­ì˜ ë²•ì • ì„±ì¸ ë‚˜ì´ëŠ”?', options: ['18ì„¸', '19ì„¸', '20ì„¸', '21ì„¸'], correct: 1 },

            // ì—­ì‚¬
            { category: 'ì—­ì‚¬', difficulty: 'ì‰¬ì›€', question: 'í•œêµ­ ì „ìŸì´ ì¼ì–´ë‚œ ì—°ë„ëŠ”?', options: ['1945ë…„', '1948ë…„', '1950ë…„', '1953ë…„'], correct: 2 },
            { category: 'ì—­ì‚¬', difficulty: 'ì‰¬ì›€', question: 'ì¡°ì„ ì‹œëŒ€ ìµœê³ ì˜ êµìœ¡ê¸°ê´€ì€?', options: ['ì„±ê· ê´€', 'í–¥êµ', 'ì„œì›', 'ì„œë‹¹'], correct: 0 },
            { category: 'ì—­ì‚¬', difficulty: 'ë³´í†µ', question: 'ê³ ë ¤ë¥¼ ì„¸ìš´ ì™•ì€?', options: ['ì™•ê±´', 'ê¹€ìœ ì‹ ', 'ì´ì„±ê³„', 'ê´‘ê°œí† ëŒ€ì™•'], correct: 0 },
            { category: 'ì—­ì‚¬', difficulty: 'ë³´í†µ', question: 'ì‚¼êµ­ì‹œëŒ€ì˜ ì„¸ ë‚˜ë¼ê°€ ì•„ë‹Œ ê²ƒì€?', options: ['ê³ êµ¬ë ¤', 'ë°±ì œ', 'ì‹ ë¼', 'ê³ ë ¤'], correct: 3 },
            { category: 'ì—­ì‚¬', difficulty: 'ì–´ë ¤ì›€', question: 'ì„ì§„ì™œë€ì´ ì¼ì–´ë‚œ ì—°ë„ëŠ”?', options: ['1492ë…„', '1592ë…„', '1692ë…„', '1792ë…„'], correct: 1 },
            { category: 'ì—­ì‚¬', difficulty: 'ì–´ë ¤ì›€', question: 'í›ˆë¯¼ì •ìŒì´ ì°½ì œëœ ì—°ë„ëŠ”?', options: ['1443ë…„', '1446ë…„', '1450ë…„', '1453ë…„'], correct: 0 },

            // ê³¼í•™
            { category: 'ê³¼í•™', difficulty: 'ì‰¬ì›€', question: 'ë¬¼ì˜ í™”í•™ì‹ì€?', options: ['H2O', 'CO2', 'O2', 'H2O2'], correct: 0 },
            { category: 'ê³¼í•™', difficulty: 'ì‰¬ì›€', question: 'ì§€êµ¬ì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ ë³„ì€?', options: ['ë¶ê·¹ì„±', 'ì‹œë¦¬ìš°ìŠ¤', 'íƒœì–‘', 'ì•ˆë“œë¡œë©”ë‹¤'], correct: 2 },
            { category: 'ê³¼í•™', difficulty: 'ë³´í†µ', question: 'ë¹›ì˜ ì†ë„ëŠ” ì•½ ì–¼ë§ˆì¸ê°€?', options: ['ì´ˆì† 30ë§Œkm', 'ì´ˆì† 30km', 'ì´ˆì† 300km', 'ì´ˆì† 3000km'], correct: 0 },
            { category: 'ê³¼í•™', difficulty: 'ë³´í†µ', question: 'ì‚°ì†Œì˜ í™”í•™ ê¸°í˜¸ëŠ”?', options: ['O', 'O2', 'Os', 'Ox'], correct: 0 },
            { category: 'ê³¼í•™', difficulty: 'ì–´ë ¤ì›€', question: 'DNAì˜ ì´ì¤‘ë‚˜ì„  êµ¬ì¡°ë¥¼ ë°œê²¬í•œ ê³¼í•™ìëŠ”?', options: ['ì•„ì¸ìŠˆíƒ€ì¸', 'ë‰´í„´', 'ì™“ìŠ¨ê³¼ í¬ë¦­', 'ë‹¤ìœˆ'], correct: 2 },
            { category: 'ê³¼í•™', difficulty: 'ì–´ë ¤ì›€', question: 'ê´‘í•©ì„±ì„ í•˜ëŠ” ì„¸í¬ ì†Œê¸°ê´€ì€?', options: ['ë¯¸í† ì½˜ë“œë¦¬ì•„', 'ì—½ë¡ì²´', 'ë¦¬ë³´ì†œ', 'ê³¨ì§€ì²´'], correct: 1 },

            // ì—°ì˜ˆ
            { category: 'ì—°ì˜ˆ', difficulty: 'ì‰¬ì›€', question: 'BTSì˜ ë¦¬ë”ëŠ”?', options: ['RM', 'ì§„', 'ìŠˆê°€', 'ì œì´í™‰'], correct: 0 },
            { category: 'ì—°ì˜ˆ', difficulty: 'ì‰¬ì›€', question: '\'ê°•ë‚¨ìŠ¤íƒ€ì¼\'ë¡œ ìœ ëª…í•œ ê°€ìˆ˜ëŠ”?', options: ['ì‹¸ì´', 'ë¹„', 'ë¹…ë±…', 'ë™ë°©ì‹ ê¸°'], correct: 0 },
            { category: 'ì—°ì˜ˆ', difficulty: 'ë³´í†µ', question: 'BLACKPINKì˜ ë©¤ë²„ê°€ ì•„ë‹Œ ì‚¬ëŒì€?', options: ['ì œë‹ˆ', 'ë¦¬ì‚¬', 'ì§€ìˆ˜', 'ì•„ì´ìœ '], correct: 3 },
            { category: 'ì—°ì˜ˆ', difficulty: 'ë³´í†µ', question: '\'ê¸°ìƒì¶©\'ìœ¼ë¡œ ì•„ì¹´ë°ë¯¸ìƒì„ ìˆ˜ìƒí•œ ê°ë…ì€?', options: ['ë°•ì°¬ìš±', 'ë´‰ì¤€í˜¸', 'ì´ì°½ë™', 'ê¹€ê¸°ë•'], correct: 1 },
            { category: 'ì—°ì˜ˆ', difficulty: 'ì–´ë ¤ì›€', question: '\'ì˜¤ì§•ì–´ ê²Œì„\'ì˜ ì£¼ì—° ë°°ìš°ëŠ”?', options: ['ì´ì •ì¬', 'ì •ìš°ì„±', 'ì†¡ê°•í˜¸', 'ìµœë¯¼ì‹'], correct: 0 },
            { category: 'ì—°ì˜ˆ', difficulty: 'ì–´ë ¤ì›€', question: '\'ê¸°ìƒì¶©\'ì´ ì•„ì¹´ë°ë¯¸ ì‘í’ˆìƒì„ ë°›ì€ ì—°ë„ëŠ”?', options: ['2018ë…„', '2019ë…„', '2020ë…„', '2021ë…„'], correct: 2 },

            // ìŠ¤í¬ì¸ 
            { category: 'ìŠ¤í¬ì¸ ', difficulty: 'ì‰¬ì›€', question: '2002ë…„ ì›”ë“œì»µì—ì„œ í•œêµ­ì˜ ìµœì¢… ì„±ì ì€?', options: ['ìš°ìŠ¹', 'ì¤€ìš°ìŠ¹', '3ìœ„', '4ìœ„'], correct: 3 },
            { category: 'ìŠ¤í¬ì¸ ', difficulty: 'ì‰¬ì›€', question: 'í•œêµ­ í”„ë¡œì•¼êµ¬íŒ€ì´ ì•„ë‹Œ ê²ƒì€?', options: ['ë‘ì‚° ë² ì–´ìŠ¤', 'ë¡¯ë° ìì´ì–¸ì¸ ', 'ì‚¼ì„± ë¼ì´ì˜¨ì¦ˆ', 'í˜„ëŒ€ ìœ ë‹ˆì½˜ìŠ¤'], correct: 3 },
            { category: 'ìŠ¤í¬ì¸ ', difficulty: 'ë³´í†µ', question: 'ê¹€ì—°ì•„ê°€ ê¸ˆë©”ë‹¬ì„ ë”´ ì˜¬ë¦¼í”½ ê°œìµœì§€ëŠ”?', options: ['ì†Œì¹˜', 'ë°´ì¿ ë²„', 'í‰ì°½', 'ë² ì´ì§•'], correct: 1 },
            { category: 'ìŠ¤í¬ì¸ ', difficulty: 'ë³´í†µ', question: 'ì†í¥ë¯¼ì´ ì†Œì†ëœ í”„ë¦¬ë¯¸ì–´ë¦¬ê·¸ íŒ€ì€?', options: ['ë§¨ì²´ìŠ¤í„° ìœ ë‚˜ì´í‹°ë“œ', 'ì²¼ì‹œ', 'í† íŠ¸ë„˜', 'ì•„ìŠ¤ë‚ '], correct: 2 },
            { category: 'ìŠ¤í¬ì¸ ', difficulty: 'ì–´ë ¤ì›€', question: 'ë°•ì§€ì„±ì´ ë›°ì—ˆë˜ íŒ€ì´ ì•„ë‹Œ ê²ƒì€?', options: ['ë§¨ì²´ìŠ¤í„° ìœ ë‚˜ì´í‹°ë“œ', 'PSV', 'QPR', 'ë¦¬ë²„í’€'], correct: 3 },
            { category: 'ìŠ¤í¬ì¸ ', difficulty: 'ì–´ë ¤ì›€', question: '2018 í‰ì°½ ë™ê³„ì˜¬ë¦¼í”½ ì—¬ì ì»¬ë§íŒ€ì˜ ì• ì¹­ì€?', options: ['ì–¸ë‹ˆë“¤', 'íŒ€í‚´', 'ì»¬ë§í€¸', 'ìŠ¤í†¤ê±¸ìŠ¤'], correct: 1 },

            // ì¶”ê°€ ë¬¸ì œë“¤
            { category: 'ìƒì‹', difficulty: 'ë³´í†µ', question: 'í•œêµ­ì˜ í™”í ë‹¨ìœ„ëŠ”?', options: ['ì›', 'ì—”', 'ìœ„ì•ˆ', 'ë‹¬ëŸ¬'], correct: 0 },
            { category: 'ì—­ì‚¬', difficulty: 'ì‰¬ì›€', question: '8.15 ê´‘ë³µì ˆì˜ ì˜ë¯¸ëŠ”?', options: ['ì „ìŸ ì¢…ë£Œ', 'ì¼ì œë¡œë¶€í„° ë…ë¦½', 'ì •ë¶€ ìˆ˜ë¦½', 'í—Œë²• ì œì •'], correct: 1 },
            { category: 'ê³¼í•™', difficulty: 'ì‰¬ì›€', question: 'ì‚¬ëŒì˜ ì •ìƒ ì²´ì˜¨ì€ ì•½ ëª‡ ë„ì¸ê°€?', options: ['35ë„', '36.5ë„', '37.5ë„', '38ë„'], correct: 1 },
        ];

        // Game State
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let streak = 0;
        let maxStreak = 0;
        let correctCount = 0;
        let timeLeft = 10;
        let timerInterval = null;
        let selectedCategory = 'all';
        let usedFiftyFifty = false;
        let usedSkip = false;

        // Initialize
        function init() {
            loadLeaderboard();
        }

        // Category Selection
        function selectCategory(category) {
            selectedCategory = category;
            const buttons = document.querySelectorAll('.category-btn');
            buttons.forEach(btn => btn.classList.remove('bg-purple-200'));
            event.target.closest('.category-btn').classList.add('bg-purple-200');
        }

        // Start Game
        function startGame() {
            // Filter questions by category
            let filtered = selectedCategory === 'all'
                ? [...quizData]
                : quizData.filter(q => q.category === selectedCategory);

            // Shuffle and select 10 questions
            currentQuestions = shuffleArray(filtered).slice(0, Math.min(10, filtered.length));

            currentQuestionIndex = 0;
            score = 0;
            streak = 0;
            maxStreak = 0;
            correctCount = 0;
            usedFiftyFifty = false;
            usedSkip = false;

            document.getElementById('totalQuestions').textContent = currentQuestions.length;
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');

            loadQuestion();
        }

        // Load Question
        function loadQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) {
                endGame();
                return;
            }

            const q = currentQuestions[currentQuestionIndex];

            document.getElementById('questionNum').textContent = currentQuestionIndex + 1;
            document.getElementById('categoryBadge').textContent = q.category;
            document.getElementById('difficultyBadge').textContent = q.difficulty;
            document.getElementById('question').textContent = q.question;
            document.getElementById('feedback').classList.add('hidden');

            // Reset lifeline buttons if not used
            if (!usedFiftyFifty) {
                document.getElementById('fiftyFifty').disabled = false;
                document.getElementById('fiftyFifty').classList.remove('opacity-50', 'cursor-not-allowed');
            }
            if (!usedSkip) {
                document.getElementById('skip').disabled = false;
                document.getElementById('skip').classList.remove('opacity-50', 'cursor-not-allowed');
            }

            // Load options
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';

            q.options.forEach((option, index) => {
                const btn = document.createElement('button');
                btn.className = 'option-btn w-full text-left p-4 rounded-xl border-2 border-gray-200 hover:border-purple-500 hover:bg-purple-50 transition font-semibold text-gray-700';
                btn.innerHTML = `<span class="text-purple-600 mr-3">${index + 1}.</span>${option}`;
                btn.onclick = () => selectAnswer(index);
                btn.dataset.index = index;
                optionsDiv.appendChild(btn);
            });

            // Start timer
            timeLeft = 10;
            updateTimer();
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 1000);
        }

        // Update Timer
        function updateTimer() {
            document.getElementById('timer').textContent = timeLeft;
            const percentage = (timeLeft / 10) * 100;
            document.getElementById('timerBar').style.width = percentage + '%';

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                showCorrectAnswer();
                streak = 0;
                setTimeout(() => {
                    currentQuestionIndex++;
                    loadQuestion();
                }, 2000);
            } else {
                timeLeft--;
            }
        }

        // Select Answer
        function selectAnswer(index) {
            clearInterval(timerInterval);

            const q = currentQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');

            buttons.forEach(btn => btn.disabled = true);

            const isCorrect = index === q.correct;

            if (isCorrect) {
                buttons[index].classList.add('correct', 'celebrate');

                // Calculate score based on difficulty and time
                let points = 10;
                if (q.difficulty === 'ë³´í†µ') points = 15;
                if (q.difficulty === 'ì–´ë ¤ì›€') points = 20;
                points += timeLeft; // Bonus for quick answer

                score += points;
                correctCount++;
                streak++;
                maxStreak = Math.max(maxStreak, streak);

                document.getElementById('score').textContent = score;
                document.getElementById('score').parentElement.classList.add('celebrate');
                document.getElementById('streak').textContent = streak;

                showFeedback('ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰', 'bg-green-100 text-green-800');
            } else {
                buttons[index].classList.add('wrong', 'shake');
                buttons[q.correct].classList.add('correct');
                streak = 0;
                document.getElementById('streak').textContent = 0;

                showFeedback('í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µì€ ' + q.options[q.correct] + ' ì…ë‹ˆë‹¤.', 'bg-red-100 text-red-800');
            }

            setTimeout(() => {
                currentQuestionIndex++;
                loadQuestion();
            }, 2500);
        }

        // Show Feedback
        function showFeedback(message, className) {
            const feedback = document.getElementById('feedback');
            feedback.className = 'mt-6 p-4 rounded-xl ' + className;
            feedback.textContent = message;
            feedback.classList.remove('hidden');
        }

        // Show Correct Answer (timeout)
        function showCorrectAnswer() {
            const q = currentQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.disabled = true);
            buttons[q.correct].classList.add('correct');
            showFeedback('ì‹œê°„ ì´ˆê³¼! ì •ë‹µì€ ' + q.options[q.correct] + ' ì…ë‹ˆë‹¤.', 'bg-orange-100 text-orange-800');
        }

        // Fifty-Fifty Lifeline
        function useFiftyFifty() {
            if (usedFiftyFifty) return;

            usedFiftyFifty = true;
            const btn = document.getElementById('fiftyFifty');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            const q = currentQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');

            let wrongIndices = [];
            buttons.forEach((btn, idx) => {
                if (idx !== q.correct) wrongIndices.push(idx);
            });

            // Remove 2 wrong answers
            shuffleArray(wrongIndices).slice(0, 2).forEach(idx => {
                buttons[idx].style.opacity = '0.3';
                buttons[idx].disabled = true;
            });
        }

        // Skip Question
        function skipQuestion() {
            if (usedSkip) return;

            usedSkip = true;
            const btn = document.getElementById('skip');
            btn.disabled = true;
            btn.classList.add('opacity-50', 'cursor-not-allowed');

            clearInterval(timerInterval);
            currentQuestionIndex++;
            loadQuestion();
        }

        // End Game
        function endGame() {
            clearInterval(timerInterval);

            const accuracy = currentQuestions.length > 0
                ? Math.round((correctCount / currentQuestions.length) * 100)
                : 0;

            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.remove('hidden');

            document.getElementById('finalScore').textContent = score;
            document.getElementById('maxStreak').textContent = maxStreak;
            document.getElementById('correctAnswers').textContent = correctCount + ' / ' + currentQuestions.length;
            document.getElementById('accuracy').textContent = accuracy + '%';

            // Check high score
            const leaderboard = getLeaderboard();
            const isHighScore = leaderboard.length === 0 || score > leaderboard[0].score;

            if (isHighScore) {
                document.getElementById('newHighScore').classList.remove('hidden');
            }

            // Save to leaderboard
            saveScore(score, accuracy, selectedCategory);
        }

        // Restart Game
        function restartGame() {
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        // Share Results
        function shareResults() {
            const text = `í•œêµ­ í€´ì¦ˆ ê²Œì„ ê²°ê³¼!\nì ìˆ˜: ${score}ì \nì •ë‹µ: ${correctCount}/${currentQuestions.length}\nì—°ì† ì •ë‹µ: ${maxStreak}íšŒ\n\në‚˜ë„ ë„ì „í•´ë³´ì„¸ìš”!`;

            if (navigator.share) {
                navigator.share({
                    title: 'í•œêµ­ í€´ì¦ˆ ê²Œì„',
                    text: text
                });
            } else {
                navigator.clipboard.writeText(text);
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        }

        // Leaderboard Functions
        function getLeaderboard() {
            const data = localStorage.getItem('quizLeaderboard');
            return data ? JSON.parse(data) : [];
        }

        function saveScore(score, accuracy, category) {
            const leaderboard = getLeaderboard();
            const entry = {
                score: score,
                accuracy: accuracy,
                category: category,
                date: new Date().toLocaleString('ko-KR')
            };

            leaderboard.push(entry);
            leaderboard.sort((a, b) => b.score - a.score);
            leaderboard.splice(10); // Keep top 10

            localStorage.setItem('quizLeaderboard', JSON.stringify(leaderboard));
        }

        function loadLeaderboard() {
            const leaderboard = getLeaderboard();
            const list = document.getElementById('leaderboardList');

            if (leaderboard.length === 0) {
                list.innerHTML = '<p class="text-gray-500 text-center py-8">ì•„ì§ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            list.innerHTML = leaderboard.map((entry, index) => {
                let medal = '';
                if (index === 0) medal = '<i class="fas fa-crown text-yellow-500 mr-2"></i>';
                else if (index === 1) medal = '<i class="fas fa-medal text-gray-400 mr-2"></i>';
                else if (index === 2) medal = '<i class="fas fa-medal text-orange-600 mr-2"></i>';

                return `
                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-4 flex items-center justify-between">
                        <div class="flex items-center">
                            <span class="text-2xl font-bold text-gray-400 mr-4">${index + 1}</span>
                            ${medal}
                            <div>
                                <p class="font-bold text-gray-800">${entry.score}ì </p>
                                <p class="text-sm text-gray-600">${entry.category} Â· ì •ë‹µë¥  ${entry.accuracy}%</p>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500">${entry.date}</p>
                    </div>
                `;
            }).join('');
        }

        function showLeaderboard() {
            loadLeaderboard();
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('resultScreen').classList.add('hidden');
            document.getElementById('leaderboardScreen').classList.remove('hidden');
        }

        function hideLeaderboard() {
            document.getElementById('leaderboardScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
        }

        function clearLeaderboard() {
            if (confirm('ì •ë§ë¡œ ëª¨ë“  ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                localStorage.removeItem('quizLeaderboard');
                loadLeaderboard();
            }
        }

        // Utility Functions
        function shuffleArray(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // Initialize on load
        init();
    </script>
</body>
</html>