<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI-KON OS | Browser-Powered AI Desktop</title>

<!-- External Libraries via CDN for single-file functionality -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

<style>
    :root {
        --bg-peal: rgba(255, 255, 255, 0.1);
        --dock-bg: rgba(20, 20, 20, 0.3);
        --menu-bg: rgba(20, 20, 20, 0.3);
        --window-bg: rgba(30, 30, 32, 0.85);
        --window-header: #2d2d2d;
        --text-color: #ffffff;
        --accent: #667eea;
        --system-font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    * { box-sizing: border-box; user-select: none; }
    body, html {
        margin: 0; padding: 0; width: 100vw; height: 100vh; overflow: hidden;
        font-family: var(--system-font); color: var(--text-color);
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        background-size: 400% 400%;
        animation: gradientBG 15s ease infinite;
        cursor: default;
    }

    @keyframes gradientBG {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    /* --- Boot Screen --- */
    #boot-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #000; z-index: 99999;
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        transition: opacity 1s ease-out;
    }
    .ai-logo { color: white; font-size: 80px; margin-bottom: 40px; font-weight: 800; }
    .loading-bar {
        width: 300px; height: 6px; background: #333; border-radius: 3px; overflow: hidden;
    }
    .loading-progress {
        height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); width: 0%; border-radius: 3px;
        transition: width 3s ease-in-out;
    }

    /* --- UI Layout --- */
    #desktop { width: 100%; height: 100%; position: relative; }

    /* Menu Bar */
    #menubar {
        position: absolute; top: 0; width: 100%; height: 30px;
        background: var(--menu-bg); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
        display: flex; justify-content: space-between; align-items: center;
        padding: 0 20px; font-size: 13px; font-weight: 500; z-index: 5000;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    .menu-left, .menu-right { display: flex; gap: 15px; align-items: center; }
    .menu-item:hover { background: rgba(255,255,255,0.1); border-radius: 4px; padding: 2px 8px; margin: -2px -8px;}
    .logo-icon { font-size: 16px; font-weight: 800; }
    #active-app-name { font-weight: 700; }

    /* Dock */
    #dock-container {
        position: absolute; bottom: 10px; width: 100%;
        display: flex; justify-content: center; z-index: 6000;
    }
    #dock {
        background: var(--dock-bg);
        backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255,255,255,0.1);
        height: 70px; padding: 5px 10px; border-radius: 20px;
        display: flex; align-items: flex-end; gap: 8px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        transition: all 0.2s ease;
    }
    .dock-item {
        width: 55px; height: 55px; border-radius: 12px;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        transition: all 0.2s cubic-bezier(0.25, 1, 0.5, 1); position: relative;
        cursor: pointer;
    }
    .dock-icon-svg { width: 100%; height: 100%; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 28px;}

    .dock-item:hover { transform: scale(1.2) translateY(-10px); margin: 0 5px; }
    .dock-dot {
        width: 5px; height: 5px; background: rgba(255,255,255,0.4); border-radius: 50%;
        position: absolute; bottom: -8px; display: none;
    }
    .dock-item.active .dock-dot { display: block; }

    @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
    }
    .bouncing { animation: bounce 0.6s ease infinite; }

    /* --- Windows System --- */
    .window {
        position: absolute; background: var(--window-bg);
        backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
        border-radius: 12px;
        border: 1px solid rgba(255,255,255,0.15);
        box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        display: flex; flex-direction: column; overflow: hidden;
        min-width: 300px; min-height: 200px;
        transition: transform 0.15s, opacity 0.15s, box-shadow 0.2s;
        transform-origin: center;
    }

    .window.opening { animation: winOpen 0.2s cubic-bezier(0.16, 1, 0.3, 1); }
    @keyframes winOpen { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; }}

    .window.inactive {
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        border-color: rgba(255,255,255,0.05);
    }
    .window.inactive .traffic-lights span { background-color: #555 !important; color: #555 !important;}

    .window-header {
        height: 30px; background: rgba(255,255,255,0.05);
        display: flex; align-items: center; position: relative; cursor: grab;
    }
    .window-header:active { cursor: grabbing; }

    .traffic-lights {
        display: flex; gap: 8px; margin-left: 12px; z-index: 2;
    }
    .t-btn {
        width: 12px; height: 12px; border-radius: 50%; display: flex; justify-content: center; align-items: center;
        font-size: 8px; color: transparent; transition: 0.1s; cursor: default;
    }
    .traffic-lights:hover .t-btn { color: rgba(0,0,0,0.6); }
    .close-btn { background: #ff5f56; }
    .min-btn { background: #ffbd2e; }
    .max-btn { background: #27c93f; }

    .window-title {
        position: absolute; width: 100%; text-align: center; font-size: 13px; font-weight: 600; color: rgba(255,255,255,0.8); pointer-events: none;
    }
    .window-content {
        flex: 1; overflow: auto; position: relative;
        user-select: text;
    }

    .ui-resizable-se { bottom: 0; right: 0; width: 15px; height: 15px; background: none; }

    /* APP STYLES */
    .app-launcher { padding: 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 30px; }
    .app-card { display: flex; flex-direction: column; align-items: center; cursor: pointer; transition: transform 0.2s; }
    .app-card:hover { transform: scale(1.1); }
    .app-icon-large { width: 80px; height: 80px; border-radius: 18px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; font-size: 40px; }
    .app-label { color: white; font-size: 13px; text-align: center; }

    /* Icon Styles */
    .icon-chat { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
    .icon-vision { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
    .icon-code { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; }
    .icon-world { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; }
    .icon-about { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; }

    .welcome-app { padding: 40px; color: white; max-width: 600px; margin: 0 auto; }
    .welcome-app h1 { font-size: 36px; margin-bottom: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;}
    .welcome-app p { line-height: 1.8; margin-bottom: 15px; opacity: 0.9; }
    .welcome-app a { color: #667eea; text-decoration: none; font-weight: 600; }
    .welcome-app a:hover { text-decoration: underline; }

</style>
</head>
<body>

    <!-- Boot Screen -->
    <div id="boot-screen">
        <div class="ai-logo">AI-KON</div>
        <div class="loading-bar"><div class="loading-progress"></div></div>
        <p style="color: #888; margin-top: 20px; font-size: 14px;">Loading AI Desktop...</p>
    </div>

    <!-- Desktop Environment -->
    <div id="desktop">

        <!-- Menu Bar -->
        <div id="menubar">
            <div class="menu-left">
                <div class="menu-item"><span class="logo-icon">AI</span></div>
                <div class="menu-item" id="active-app-name">AI-KON</div>
                <div class="menu-item">File</div>
                <div class="menu-item">View</div>
                <div class="menu-item">Demos</div>
                <div class="menu-item">Help</div>
            </div>
            <div class="menu-right">
                <div class="menu-item"><i class="fas fa-wifi"></i></div>
                <div class="menu-item"><i class="fas fa-search"></i></div>
                <div class="menu-item" id="clock">Loading...</div>
            </div>
        </div>

        <!-- Windows Container -->
        <div id="windows-container"></div>

        <!-- Dock -->
        <div id="dock-container">
            <div id="dock">
                <!-- Generated by JS -->
            </div>
        </div>
    </div>

<script>
    const apps = [
        { id: 'launcher', name: 'AI Demos', iconClass: 'icon-about', icon: 'fas fa-th' },
        { id: 'chat', name: 'AI Chat', iconClass: 'icon-chat', icon: 'fas fa-comments', url: './demos/chat/' },
        { id: 'vision', name: 'Vision', iconClass: 'icon-vision', icon: 'fas fa-eye', url: './demos/vision/' },
        { id: 'code', name: 'Code', iconClass: 'icon-code', icon: 'fas fa-code', url: './demos/code/' },
        { id: 'voice', name: 'Voice', iconClass: 'icon-chat', icon: 'fas fa-microphone-alt', url: './demos/voice/' },
        { id: 'webcam', name: 'Webcam', iconClass: 'icon-vision', icon: 'fas fa-video', url: './demos/webcam/' },
        { id: 'multimodal', name: 'Visual Q&A', iconClass: 'icon-about', icon: 'fas fa-images', url: './demos/multimodal/' },
        { id: 'agents', name: 'AI Agents', iconClass: 'icon-world', icon: 'fas fa-robot', url: './demos/agents/' },
        { id: 'translation', name: 'Translation', iconClass: 'icon-world', icon: 'fas fa-language', url: './demos/translation/' },
        { id: 'summarization', name: 'Summary', iconClass: 'icon-chat', icon: 'fas fa-file-alt', url: './demos/summarization/' },
        { id: 'speech', name: 'Speech', iconClass: 'icon-vision', icon: 'fas fa-microphone', url: './demos/speech/' },
        { id: 'sentiment', name: 'Sentiment', iconClass: 'icon-about', icon: 'fas fa-smile', url: './demos/sentiment/' },
        { id: 'detection', name: 'Detection', iconClass: 'icon-code', icon: 'fas fa-search', url: './demos/detection/' },
        { id: 'depth', name: 'Depth', iconClass: 'icon-world', icon: 'fas fa-mountain', url: './demos/depth/' },
        { id: 'p2pmessenger', name: 'P2P Messenger', iconClass: 'icon-chat', icon: 'fas fa-comment-dots', url: './demos/p2pmessenger/' },
        { id: 'doceditor', name: 'Doc Editor', iconClass: 'icon-code', icon: 'fas fa-file-word', url: './demos/doceditor/' },
        { id: 'spreadsheet', name: 'Spreadsheet', iconClass: 'icon-world', icon: 'fas fa-table', url: './demos/spreadsheet/' },
        { id: 'meeting', name: 'Meeting', iconClass: 'icon-vision', icon: 'fas fa-video', url: './demos/meeting/' },
        { id: 'taskmanager', name: 'Tasks', iconClass: 'icon-about', icon: 'fas fa-tasks', url: './demos/taskmanager/' },
        { id: 'fileshare', name: 'File Share', iconClass: 'icon-chat', icon: 'fas fa-share-alt', url: './demos/fileshare/' },
        { id: 'world', name: 'World Model', iconClass: 'icon-world', icon: 'fas fa-globe', url: './demos/world/' },
        { id: 'about', name: 'About', iconClass: 'icon-about', icon: 'fas fa-info-circle' }
    ];

    class WindowManager {
        constructor() {
            this.windows = {};
            this.zIndexCounter = 100;
            this.activeApp = 'AI-KON';
            this.initDock();
        }

        initDock() {
            const dock = $('#dock');
            apps.forEach(app => {
                let el = $(`
                    <div class="dock-item" id="dock-${app.id}" title="${app.name}">
                        <div class="dock-icon-svg ${app.iconClass}"><i class="${app.icon}"></i></div>
                        <div class="dock-dot"></div>
                    </div>
                `);
                el.on('click', () => this.openApp(app.id));
                dock.append(el);
            });
        }

        updateMenubar(appName) {
            this.activeApp = appName;
            $('#active-app-name').text(appName);
        }

        setActiveWindow(id) {
            $('.window').addClass('inactive');
            $(`#win-${id}`).removeClass('inactive').css('z-index', ++this.zIndexCounter);
            this.updateMenubar(this.windows[id].name);
        }

        openApp(appId) {
            const appConfig = apps.find(a => a.id === appId);

            const dockItem = $(`#dock-${appId}`);
            if(!dockItem.hasClass('active') && !dockItem.hasClass('bouncing')) {
                dockItem.addClass('bouncing');
                setTimeout(() => dockItem.removeClass('bouncing').addClass('active'), 600);
            }

            if (this.windows[appId]) {
                if($(`#win-${appId}`).is(':hidden')) {
                    this.restoreWindow(appId);
                } else {
                    this.setActiveWindow(appId);
                }
                return;
            }

            this.createWindow(appId, appConfig);
        }

        createWindow(id, config) {
            this.windows[id] = config;

            let w = 700, h = 500;
            if(id === 'about') { w = 600; h = 400; }
            if(id === 'launcher') { w = 800; h = 600; }

            const top = 50 + (Object.keys(this.windows).length * 20);
            const left = 50 + (Object.keys(this.windows).length * 20);

            const winHTML = `
                <div class="window opening" id="win-${id}" style="width:${w}px; height:${h}px; top:${top}px; left:${left}px; z-index:${++this.zIndexCounter}">
                    <div class="window-header">
                        <div class="traffic-lights">
                            <div class="t-btn close-btn"><i class="fas fa-times"></i></div>
                            <div class="t-btn min-btn"><i class="fas fa-minus"></i></div>
                            <div class="t-btn max-btn"><i class="fas fa-plus"></i></div>
                        </div>
                        <div class="window-title">${config.name}</div>
                    </div>
                    <div class="window-content" id="content-${id}"></div>
                </div>
            `;

            $('#windows-container').append(winHTML);
            const $win = $(`#win-${id}`);

            $win.draggable({ handle: '.window-header', containment: '#desktop', start: () => this.setActiveWindow(id) })
                .resizable({ minHeight: 200, minWidth: 250 })
                .on('mousedown', () => this.setActiveWindow(id));

            $win.find('.close-btn').on('click', (e) => { e.stopPropagation(); this.closeWindow(id); });
            $win.find('.min-btn').on('click', (e) => { e.stopPropagation(); this.minimizeWindow(id); });
            $win.find('.max-btn').on('click', (e) => { e.stopPropagation(); this.maximizeWindow(id); });

            setTimeout(() => $win.removeClass('opening'), 200);

            this.setActiveWindow(id);
            this.loadAppContent(id);
        }

        closeWindow(id) {
            $(`#win-${id}`).fadeOut(150, function() { $(this).remove(); });
            delete this.windows[id];
            $(`#dock-${id}`).removeClass('active');
            this.updateMenubar('AI-KON');
        }

        minimizeWindow(id) {
            $(`#win-${id}`).fadeOut(200);
            this.updateMenubar('AI-KON');
        }

        restoreWindow(id) {
            $(`#win-${id}`).fadeIn(200);
            this.setActiveWindow(id);
        }

        maximizeWindow(id) {
            const $win = $(`#win-${id}`);
            if ($win.hasClass('maximized')) {
                $win.css({ top: $win.data('top'), left: $win.data('left'), width: $win.data('width'), height: $win.data('height') }).removeClass('maximized');
            } else {
                $win.data({ top: $win.css('top'), left: $win.css('left'), width: $win.css('width'), height: $win.css('height') });
                $win.css({ top: '30px', left: '0', width: '100%', height: 'calc(100% - 100px)' }).addClass('maximized');
            }
        }

        loadAppContent(id) {
            const container = $(`#content-${id}`);
            const config = apps.find(a => a.id === id);

            if (id === 'launcher') {
                renderLauncher(container);
            } else if (id === 'about') {
                renderAbout(container);
            } else if (config.url) {
                container.html(`<iframe src="${config.url}" style="width:100%; height:100%; border:none; background:white;"></iframe>`);
            }
        }
    }

    const wm = new WindowManager();

    function renderLauncher(container) {
        container.html(`
            <div class="app-launcher">
                <div class="app-card" onclick="wm.openApp('chat')">
                    <div class="app-icon-large icon-chat"><i class="fas fa-comments"></i></div>
                    <div class="app-label">AI Chat</div>
                </div>
                <div class="app-card" onclick="wm.openApp('vision')">
                    <div class="app-icon-large icon-vision"><i class="fas fa-eye"></i></div>
                    <div class="app-label">Image Analysis</div>
                </div>
                <div class="app-card" onclick="wm.openApp('code')">
                    <div class="app-icon-large icon-code"><i class="fas fa-code"></i></div>
                    <div class="app-label">Code Assistant</div>
                </div>
                <div class="app-card" onclick="wm.openApp('translation')">
                    <div class="app-icon-large icon-world"><i class="fas fa-language"></i></div>
                    <div class="app-label">Translation</div>
                </div>
                <div class="app-card" onclick="wm.openApp('summarization')">
                    <div class="app-icon-large icon-chat"><i class="fas fa-file-alt"></i></div>
                    <div class="app-label">Summarization</div>
                </div>
                <div class="app-card" onclick="wm.openApp('speech')">
                    <div class="app-icon-large icon-vision"><i class="fas fa-microphone"></i></div>
                    <div class="app-label">Speech Recognition</div>
                </div>
                <div class="app-card" onclick="wm.openApp('sentiment')">
                    <div class="app-icon-large icon-about"><i class="fas fa-smile"></i></div>
                    <div class="app-label">Sentiment Analysis</div>
                </div>
                <div class="app-card" onclick="wm.openApp('detection')">
                    <div class="app-icon-large icon-code"><i class="fas fa-search"></i></div>
                    <div class="app-label">Object Detection</div>
                </div>
                <div class="app-card" onclick="wm.openApp('depth')">
                    <div class="app-icon-large icon-world"><i class="fas fa-mountain"></i></div>
                    <div class="app-label">Depth Estimation</div>
                </div>
                <div class="app-card" onclick="wm.openApp('p2pmessenger')">
                    <div class="app-icon-large icon-chat"><i class="fas fa-comment-dots"></i></div>
                    <div class="app-label">P2P Messenger</div>
                </div>
                <div class="app-card" onclick="wm.openApp('doceditor')">
                    <div class="app-icon-large icon-code"><i class="fas fa-file-word"></i></div>
                    <div class="app-label">Doc Editor</div>
                </div>
                <div class="app-card" onclick="wm.openApp('spreadsheet')">
                    <div class="app-icon-large icon-world"><i class="fas fa-table"></i></div>
                    <div class="app-label">Spreadsheet</div>
                </div>
                <div class="app-card" onclick="wm.openApp('meeting')">
                    <div class="app-icon-large icon-vision"><i class="fas fa-video"></i></div>
                    <div class="app-label">Meeting</div>
                </div>
                <div class="app-card" onclick="wm.openApp('taskmanager')">
                    <div class="app-icon-large icon-about"><i class="fas fa-tasks"></i></div>
                    <div class="app-label">Task Manager</div>
                </div>
                <div class="app-card" onclick="wm.openApp('fileshare')">
                    <div class="app-icon-large icon-chat"><i class="fas fa-share-alt"></i></div>
                    <div class="app-label">File Share</div>
                </div>
                <div class="app-card" onclick="wm.openApp('world')">
                    <div class="app-icon-large icon-world"><i class="fas fa-globe"></i></div>
                    <div class="app-label">World Model</div>
                </div>
                <div class="app-card" onclick="wm.openApp('about')">
                    <div class="app-icon-large icon-about"><i class="fas fa-info-circle"></i></div>
                    <div class="app-label">About AI-KON</div>
                </div>
            </div>
        `);
    }

    function renderAbout(container) {
        container.html(`
            <div class="welcome-app">
                <h1>AI-KON OS</h1>
                <p>Welcome to <strong>AI-KON</strong> - Building the world's first fully autonomous AI company.</p>

                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #667eea;">About This Desktop</h3>
                <p>This is a browser-based operating system interface showcasing AI-powered demos. All applications run entirely in your browser using WebGPU acceleration.</p>

                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #764ba2;">Available Demos</h3>
                <ul style="line-height: 2;">
                    <li><strong>AI Chat</strong> - Conversational AI with Qwen2.5</li>
                    <li><strong>Image Analysis</strong> - Zero-shot classification with CLIP</li>
                    <li><strong>Code Assistant</strong> - AI-powered code generation</li>
                    <li><strong>Translation</strong> - Multilingual neural translation (8 languages)</li>
                    <li><strong>Summarization</strong> - AI text summarization with DistilBART</li>
                    <li><strong>Speech Recognition</strong> - Whisper speech-to-text</li>
                    <li><strong>Sentiment Analysis</strong> - Emotion detection in text</li>
                    <li><strong>Object Detection</strong> - YOLO real-time object detection</li>
                    <li><strong>Depth Estimation</strong> - Monocular depth perception with MiDaS</li>
                    <li><strong>P2P Messenger</strong> - WebRTC peer-to-peer messaging & calls</li>
                    <li><strong>Doc Editor</strong> - AI-powered document editor with writing assistance</li>
                    <li><strong>Spreadsheet</strong> - Excel-like spreadsheet with AI data analysis</li>
                    <li><strong>Meeting</strong> - Video conferencing with screen share & whiteboard</li>
                    <li><strong>Task Manager</strong> - Kanban task management with AI planning</li>
                    <li><strong>File Share</strong> - P2P file transfer with WebRTC</li>
                    <li><strong>World Model</strong> - Reinforcement learning demo</li>
                </ul>

                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #667eea;">Links</h3>
                <p>
                    <a href="https://github.com/ai-kon" target="_blank">GitHub</a> •
                    <a href="https://github.com/ai-kon/ai-kon/blob/main/VISION.md" target="_blank">Vision</a> •
                    <a href="https://github.com/ai-kon/ai-kon/blob/main/ROADMAP.md" target="_blank">Roadmap</a>
                </p>

                <p style="margin-top: 40px; opacity: 0.6; font-size: 12px;">
                    © 2025 AI-KON. Where autonomous AI meets interactive worlds.
                </p>
            </div>
        `);
    }

    function updateClock() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
        $('#clock').text(timeStr);
    }
    setInterval(updateClock, 1000);
    updateClock();

    $(window).on('load', () => {
        $('.loading-progress').css('width', '100%');
        setTimeout(() => {
            $('#boot-screen').fadeOut(500, function(){ $(this).remove(); });
            setTimeout(() => wm.openApp('launcher'), 600);
        }, 2000);
    });

</script>
</body>
</html>
