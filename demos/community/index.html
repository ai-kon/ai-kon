<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Board - AI-KON</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gradient-to-br from-green-400 to-blue-500 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        <div class="bg-white rounded-lg shadow-2xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-3xl font-bold text-gray-800"><i class="fas fa-users text-green-600 mr-3"></i>Community Board</h1>
                <button onclick="window.location.href='../'" class="px-4 py-2 bg-green-600 text-white rounded-lg">뒤로가기</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="md:col-span-1 space-y-4">
                    <div>
                        <h3 class="font-bold mb-4 text-gray-700">게시판</h3>
                        <div class="space-y-2" id="boards"></div>
                        <button onclick="createBoard()" class="w-full mt-4 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-plus mr-2"></i>게시판 추가
                        </button>
                    </div>
                    <div class="bg-green-50 p-4 rounded-lg">
                        <h4 class="font-bold text-gray-700 mb-2">통계</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between"><span>총 게시글</span><span id="totalPosts" class="font-bold">0</span></div>
                            <div class="flex justify-between"><span>오늘 게시글</span><span id="todayPosts" class="font-bold">0</span></div>
                        </div>
                    </div>
                </div>

                <div class="md:col-span-3">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-gray-800" id="boardTitle">자유게시판</h3>
                        <button onclick="createPost()" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors">
                            <i class="fas fa-pen mr-2"></i>글쓰기
                        </button>
                    </div>
                    <div id="posts" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let boards = [
            {id: 1, name: '자유게시판'},
            {id: 2, name: '정보공유'},
            {id: 3, name: 'Q&A'}
        ];
        let posts = [];
        let currentBoard = 1;

        function init() {
            const saved = localStorage.getItem('community_data');
            if (saved) {
                const data = JSON.parse(saved);
                boards = data.boards || boards;
                posts = data.posts || [];
            }
            renderBoards();
            renderPosts();
            updateStats();
        }

        function save() {
            localStorage.setItem('community_data', JSON.stringify({boards, posts}));
        }

        function renderBoards() {
            document.getElementById('boards').innerHTML = boards.map(b =>
                `<button onclick="selectBoard(${b.id})" class="w-full px-3 py-2 text-left rounded transition-colors ${currentBoard === b.id ? 'bg-green-100 font-bold text-green-700' : 'hover:bg-gray-100 text-gray-700'}">${b.name}</button>`
            ).join('');
        }

        function renderPosts() {
            const filtered = posts.filter(p => p.boardId === currentBoard);
            document.getElementById('posts').innerHTML = filtered.length ? filtered.map(p => `
                <div class="p-4 border-2 border-gray-200 rounded-lg hover:border-green-300 hover:bg-gray-50 transition-all cursor-pointer">
                    <h4 class="font-bold text-lg text-gray-800">${p.title}</h4>
                    <p class="text-gray-600 mt-2 line-clamp-2">${p.content}</p>
                    <div class="flex gap-4 mt-3 text-sm text-gray-500">
                        <span><i class="fas fa-user mr-1"></i>${p.author}</span>
                        <span><i class="fas fa-clock mr-1"></i>${formatDate(p.date)}</span>
                        <span class="text-red-500"><i class="fas fa-heart mr-1"></i>${p.likes}</span>
                        <span class="text-blue-500"><i class="fas fa-comment mr-1"></i>${p.comments || 0}</span>
                    </div>
                </div>
            `).join('') : '<div class="text-center text-gray-400 py-12 bg-gray-50 rounded-lg"><i class="fas fa-inbox text-4xl mb-3"></i><p>게시글이 없습니다</p></div>';
        }

        function updateStats() {
            document.getElementById('totalPosts').textContent = posts.length;
            const today = new Date().toDateString();
            const todayCount = posts.filter(p => new Date(p.date).toDateString() === today).length;
            document.getElementById('todayPosts').textContent = todayCount;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return date.toLocaleString('ko-KR', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        window.selectBoard = (id) => {
            currentBoard = id;
            document.getElementById('boardTitle').textContent = boards.find(b => b.id === id).name;
            renderPosts();
        };

        window.createBoard = () => {
            const name = prompt('게시판 이름을 입력하세요');
            if (name) {
                boards.push({id: Date.now(), name});
                renderBoards();
                save();
            }
        };

        window.createPost = () => {
            const title = prompt('제목을 입력하세요');
            if (!title) return;
            const content = prompt('내용을 입력하세요');
            if (!content) return;
            const author = prompt('작성자 이름', '익명');

            posts.unshift({
                id: Date.now(),
                boardId: currentBoard,
                title,
                content,
                author: author || '익명',
                date: new Date().toISOString(),
                likes: Math.floor(Math.random() * 10),
                comments: Math.floor(Math.random() * 5)
            });

            renderPosts();
            updateStats();
            save();
        };

        init();
    </script>
</body>
</html>
