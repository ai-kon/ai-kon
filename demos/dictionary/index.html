<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean-English Dictionary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card { backdrop-filter: blur(10px); background: rgba(255,255,255,0.95); }
        .word-card:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.2); }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="card rounded-lg shadow-xl p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <button onclick="window.location.href='../'" class="text-blue-600 hover:text-blue-800">
                    <i class="fas fa-arrow-left mr-2"></i>Back
                </button>
                <h1 class="text-3xl font-bold text-blue-900 flex items-center">
                    <i class="fas fa-book mr-3"></i>Korean-English Dictionary
                </h1>
                <button onclick="showAddModal()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                    <i class="fas fa-plus mr-2"></i>Add Word
                </button>
            </div>

            <!-- Search -->
            <div class="relative">
                <input type="text" id="searchInput" placeholder="Search Korean or English..."
                    class="w-full px-4 py-3 pl-12 border rounded-lg focus:ring-2 focus:ring-blue-500"
                    oninput="searchWords()">
                <i class="fas fa-search absolute left-4 top-4 text-gray-400"></i>
            </div>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="card rounded-lg shadow-lg p-4 text-center">
                <i class="fas fa-book-open text-3xl text-blue-600 mb-2"></i>
                <div class="text-2xl font-bold text-gray-800" id="totalWords">0</div>
                <div class="text-sm text-gray-600">Total Words</div>
            </div>
            <div class="card rounded-lg shadow-lg p-4 text-center">
                <i class="fas fa-heart text-3xl text-red-500 mb-2"></i>
                <div class="text-2xl font-bold text-gray-800" id="favorites">0</div>
                <div class="text-sm text-gray-600">Favorites</div>
            </div>
            <div class="card rounded-lg shadow-lg p-4 text-center">
                <i class="fas fa-star text-3xl text-yellow-500 mb-2"></i>
                <div class="text-2xl font-bold text-gray-800" id="wordOfDay">안녕</div>
                <div class="text-sm text-gray-600">Word of Day</div>
            </div>
            <div class="card rounded-lg shadow-lg p-4 text-center">
                <i class="fas fa-fire text-3xl text-orange-500 mb-2"></i>
                <div class="text-2xl font-bold text-gray-800" id="streak">0</div>
                <div class="text-sm text-gray-600">Day Streak</div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="card rounded-lg shadow-xl p-6 mb-6">
            <div class="flex gap-4 border-b mb-4">
                <button onclick="showTab('all')" id="tabAll" class="tab-btn px-4 py-2 font-semibold border-b-2 border-blue-600 text-blue-600">
                    All Words
                </button>
                <button onclick="showTab('favorites')" id="tabFavorites" class="tab-btn px-4 py-2 font-semibold text-gray-600 hover:text-blue-600">
                    Favorites
                </button>
            </div>

            <!-- Words List -->
            <div id="wordsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </div>
    </div>

    <!-- Add Word Modal -->
    <div id="addModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4" style="z-index: 1000;">
        <div class="card rounded-lg shadow-2xl p-6 max-w-md w-full">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Add New Word</h2>
            <input type="text" id="newKorean" placeholder="Korean word" class="w-full px-4 py-2 border rounded mb-3">
            <input type="text" id="newEnglish" placeholder="English translation" class="w-full px-4 py-2 border rounded mb-3">
            <textarea id="newExample" placeholder="Example sentence (optional)" class="w-full px-4 py-2 border rounded mb-4" rows="2"></textarea>
            <div class="flex gap-3">
                <button onclick="addWord()" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Add</button>
                <button onclick="closeAddModal()" class="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        const DEFAULT_WORDS = [
            { korean: "안녕", english: "Hello", example: "안녕하세요! Hello!" },
            { korean: "감사합니다", english: "Thank you", example: "정말 감사합니다. Thank you very much." },
            { korean: "사랑", english: "Love", example: "나는 너를 사랑해. I love you." },
            { korean: "친구", english: "Friend", example: "좋은 친구가 있어요. I have good friends." },
            { korean: "가족", english: "Family", example: "우리 가족은 네 명이에요. My family has four people." },
            { korean: "학교", english: "School", example: "학교에 가요. I go to school." },
            { korean: "음식", english: "Food", example: "한국 음식을 좋아해요. I like Korean food." },
            { korean: "물", english: "Water", example: "물 한 잔 주세요. Please give me a glass of water." },
            { korean: "책", english: "Book", example: "책을 읽어요. I read a book." },
            { korean: "집", english: "House", example: "집에 가요. I go home." },
            { korean: "시간", english: "Time", example: "시간이 없어요. I don't have time." },
            { korean: "일", english: "Work", example: "일이 많아요. I have a lot of work." },
            { korean: "돈", english: "Money", example: "돈이 필요해요. I need money." },
            { korean: "날씨", english: "Weather", example: "오늘 날씨가 좋아요. The weather is good today." },
            { korean: "행복", english: "Happiness", example: "행복해요. I'm happy." },
            { korean: "여행", english: "Travel", example: "여행을 좋아해요. I like traveling." },
            { korean: "음악", english: "Music", example: "음악을 들어요. I listen to music." },
            { korean: "영화", english: "Movie", example: "영화를 봐요. I watch a movie." },
            { korean: "커피", english: "Coffee", example: "커피를 마셔요. I drink coffee." },
            { korean: "고양이", english: "Cat", example: "고양이가 귀여워요. The cat is cute." }
        ];

        let words = [];
        let favorites = [];
        let currentTab = 'all';

        function init() {
            const stored = localStorage.getItem('dictionaryWords');
            const storedFav = localStorage.getItem('dictionaryFavorites');

            words = stored ? JSON.parse(stored) : DEFAULT_WORDS;
            favorites = storedFav ? JSON.parse(storedFav) : [];

            if (!stored) {
                localStorage.setItem('dictionaryWords', JSON.stringify(words));
            }

            updateStats();
            renderWords();
        }

        function updateStats() {
            document.getElementById('totalWords').textContent = words.length;
            document.getElementById('favorites').textContent = favorites.length;
            const randomWord = words[Math.floor(Math.random() * words.length)];
            document.getElementById('wordOfDay').textContent = randomWord ? randomWord.korean : '안녕';

            const lastVisit = localStorage.getItem('lastVisit');
            const today = new Date().toDateString();
            let streak = parseInt(localStorage.getItem('streak') || '0');

            if (lastVisit !== today) {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                streak = lastVisit === yesterday.toDateString() ? streak + 1 : 1;
                localStorage.setItem('streak', streak);
                localStorage.setItem('lastVisit', today);
            }

            document.getElementById('streak').textContent = streak;
        }

        function renderWords() {
            const container = document.getElementById('wordsList');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let displayWords = currentTab === 'favorites'
                ? words.filter(w => favorites.includes(w.korean))
                : words;

            if (searchTerm) {
                displayWords = displayWords.filter(w =>
                    w.korean.toLowerCase().includes(searchTerm) ||
                    w.english.toLowerCase().includes(searchTerm)
                );
            }

            container.innerHTML = displayWords.map(word => `
                <div class="word-card card rounded-lg shadow-lg p-4 transition-all">
                    <div class="flex justify-between items-start mb-2">
                        <div class="text-2xl font-bold text-blue-900">${word.korean}</div>
                        <button onclick="toggleFavorite('${word.korean}')" class="text-2xl ${favorites.includes(word.korean) ? 'text-red-500' : 'text-gray-300'} hover:text-red-500">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="text-lg text-gray-700 mb-2">${word.english}</div>
                    <div class="text-sm text-gray-500 italic">${word.example || ''}</div>
                </div>
            `).join('');
        }

        function searchWords() {
            renderWords();
        }

        function showTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('border-blue-600', 'text-blue-600');
                btn.classList.add('text-gray-600');
            });
            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('border-blue-600', 'text-blue-600');
            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('text-gray-600');
            renderWords();
        }

        function toggleFavorite(korean) {
            const index = favorites.indexOf(korean);
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(korean);
            }
            localStorage.setItem('dictionaryFavorites', JSON.stringify(favorites));
            updateStats();
            renderWords();
        }

        function showAddModal() {
            document.getElementById('addModal').classList.remove('hidden');
        }

        function closeAddModal() {
            document.getElementById('addModal').classList.add('hidden');
            document.getElementById('newKorean').value = '';
            document.getElementById('newEnglish').value = '';
            document.getElementById('newExample').value = '';
        }

        function addWord() {
            const korean = document.getElementById('newKorean').value.trim();
            const english = document.getElementById('newEnglish').value.trim();
            const example = document.getElementById('newExample').value.trim();

            if (!korean || !english) {
                alert('Please enter both Korean and English words');
                return;
            }

            words.push({ korean, english, example });
            localStorage.setItem('dictionaryWords', JSON.stringify(words));
            closeAddModal();
            updateStats();
            renderWords();
        }

        init();
    </script>
</body>
</html>
