<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‡¼í•‘ëª° - Coupang ìŠ¤íƒ€ì¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #ff6b00 0%, #ff0000 100%);
            min-height: 100vh;
        }
        .product-card:hover {
            transform: translateY(-5px);
            transition: transform 0.3s;
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold text-orange-600">
                    <i class="fas fa-shopping-bag mr-2"></i>ì‡¼í•‘ëª°
                </h1>
                <button id="cartBtn" class="relative bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600">
                    <i class="fas fa-shopping-cart mr-2"></i>ì¥ë°”êµ¬ë‹ˆ
                    <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm">0</span>
                </button>
            </div>

            <!-- Search and Filter -->
            <div class="flex gap-4 mb-4">
                <input type="text" id="searchInput" placeholder="ìƒí’ˆ ê²€ìƒ‰..." class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                <select id="categoryFilter" class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                    <option value="all">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                    <option value="ì „ìì œí’ˆ">ì „ìì œí’ˆ</option>
                    <option value="íŒ¨ì…˜">íŒ¨ì…˜</option>
                    <option value="ì‹í’ˆ">ì‹í’ˆ</option>
                </select>
            </div>

            <!-- Category Buttons -->
            <div class="flex gap-2 flex-wrap">
                <button class="category-btn bg-orange-100 text-orange-700 px-4 py-2 rounded-full hover:bg-orange-200" data-category="all">ì „ì²´</button>
                <button class="category-btn bg-blue-100 text-blue-700 px-4 py-2 rounded-full hover:bg-blue-200" data-category="ì „ìì œí’ˆ">ì „ìì œí’ˆ</button>
                <button class="category-btn bg-pink-100 text-pink-700 px-4 py-2 rounded-full hover:bg-pink-200" data-category="íŒ¨ì…˜">íŒ¨ì…˜</button>
                <button class="category-btn bg-green-100 text-green-700 px-4 py-2 rounded-full hover:bg-green-200" data-category="ì‹í’ˆ">ì‹í’ˆ</button>
            </div>
        </div>

        <!-- Product Grid -->
        <div id="productGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"></div>

        <!-- Cart Modal -->
        <div id="cartModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">ì¥ë°”êµ¬ë‹ˆ</h2>
                        <button id="closeCart" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                    <div id="cartItems" class="space-y-4 mb-4"></div>
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xl font-bold">ì´ ê¸ˆì•¡:</span>
                            <span id="totalPrice" class="text-2xl font-bold text-orange-600">0ì›</span>
                        </div>
                        <button id="checkoutBtn" class="w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 font-bold">
                            <i class="fas fa-credit-card mr-2"></i>ì£¼ë¬¸í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Order History -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-4">
                <i class="fas fa-history mr-2 text-orange-600"></i>ì£¼ë¬¸ ë‚´ì—­
            </h2>
            <div id="orderHistory" class="space-y-4"></div>
        </div>
    </div>

    <script>
        // Sample product data
        const sampleProducts = [
            { id: 1, name: 'ë…¸íŠ¸ë¶', category: 'ì „ìì œí’ˆ', price: 1500000, image: 'ğŸ’»' },
            { id: 2, name: 'ìŠ¤ë§ˆíŠ¸í°', category: 'ì „ìì œí’ˆ', price: 1200000, image: 'ğŸ“±' },
            { id: 3, name: 'ë¬´ì„  ì´ì–´í°', category: 'ì „ìì œí’ˆ', price: 200000, image: 'ğŸ§' },
            { id: 4, name: 'ìŠ¤ë§ˆíŠ¸ì›Œì¹˜', category: 'ì „ìì œí’ˆ', price: 350000, image: 'âŒš' },
            { id: 5, name: 'í‹°ì…”ì¸ ', category: 'íŒ¨ì…˜', price: 25000, image: 'ğŸ‘•' },
            { id: 6, name: 'ì²­ë°”ì§€', category: 'íŒ¨ì…˜', price: 80000, image: 'ğŸ‘–' },
            { id: 7, name: 'ìš´ë™í™”', category: 'íŒ¨ì…˜', price: 120000, image: 'ğŸ‘Ÿ' },
            { id: 8, name: 'ê°€ë°©', category: 'íŒ¨ì…˜', price: 65000, image: 'ğŸ’' },
            { id: 9, name: 'ì‚¬ê³¼', category: 'ì‹í’ˆ', price: 5000, image: 'ğŸ' },
            { id: 10, name: 'ë°”ë‚˜ë‚˜', category: 'ì‹í’ˆ', price: 3000, image: 'ğŸŒ' },
            { id: 11, name: 'ìš°ìœ ', category: 'ì‹í’ˆ', price: 2500, image: 'ğŸ¥›' },
            { id: 12, name: 'ë¹µ', category: 'ì‹í’ˆ', price: 4000, image: 'ğŸ' },
        ];

        // Initialize localStorage
        if (!localStorage.getItem('products')) {
            localStorage.setItem('products', JSON.stringify(sampleProducts));
        }
        if (!localStorage.getItem('cart')) {
            localStorage.setItem('cart', JSON.stringify([]));
        }
        if (!localStorage.getItem('orders')) {
            localStorage.setItem('orders', JSON.stringify([]));
        }

        // Get data from localStorage
        let products = JSON.parse(localStorage.getItem('products'));
        let cart = JSON.parse(localStorage.getItem('cart'));
        let orders = JSON.parse(localStorage.getItem('orders'));

        function saveToLocalStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
            localStorage.setItem('orders', JSON.stringify(orders));
        }

        function formatPrice(price) {
            return price.toLocaleString('ko-KR') + 'ì›';
        }

        function renderProducts(filteredProducts = products) {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card bg-white rounded-lg shadow-lg p-4 hover:shadow-xl transition-shadow">
                    <div class="text-6xl text-center mb-4">${product.image}</div>
                    <div class="text-sm text-gray-500 mb-1">${product.category}</div>
                    <h3 class="font-bold text-lg mb-2">${product.name}</h3>
                    <div class="text-orange-600 font-bold text-xl mb-4">${formatPrice(product.price)}</div>
                    <button onclick="addToCart(${product.id})" class="w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600">
                        <i class="fas fa-cart-plus mr-2"></i>ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
                    </button>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            saveToLocalStorage();
            updateCartCount();
            alert(`${product.name}ì´(ê°€) ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="text-center text-gray-500 py-8">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</div>';
                document.getElementById('totalPrice').textContent = '0ì›';
                return;
            }

            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center gap-4 border-b pb-4">
                    <div class="text-4xl">${item.image}</div>
                    <div class="flex-1">
                        <h3 class="font-bold">${item.name}</h3>
                        <div class="text-orange-600 font-bold">${formatPrice(item.price)}</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="updateQuantity(${item.id}, -1)" class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">-</button>
                        <span class="font-bold">${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)" class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">+</button>
                    </div>
                    <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('totalPrice').textContent = formatPrice(total);
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    saveToLocalStorage();
                    renderCart();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveToLocalStorage();
            renderCart();
            updateCartCount();
        }

        function checkout() {
            if (cart.length === 0) {
                alert('ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤!');
                return;
            }

            const order = {
                id: Date.now(),
                date: new Date().toLocaleString('ko-KR'),
                items: [...cart],
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            };

            orders.unshift(order);
            cart = [];
            saveToLocalStorage();

            renderCart();
            updateCartCount();
            renderOrderHistory();

            document.getElementById('cartModal').classList.add('hidden');
            alert('ì£¼ë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function renderOrderHistory() {
            const orderHistory = document.getElementById('orderHistory');
            if (orders.length === 0) {
                orderHistory.innerHTML = '<div class="text-center text-gray-500 py-8">ì£¼ë¬¸ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</div>';
                return;
            }

            orderHistory.innerHTML = orders.map(order => `
                <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-bold text-lg">ì£¼ë¬¸ #${order.id}</div>
                            <div class="text-sm text-gray-500">${order.date}</div>
                        </div>
                        <div class="text-orange-600 font-bold text-xl">${formatPrice(order.total)}</div>
                    </div>
                    <div class="text-sm text-gray-700">
                        ${order.items.map(item => `${item.name} x${item.quantity}`).join(', ')}
                    </div>
                </div>
            `).join('');
        }

        // Search and filter
        document.getElementById('searchInput').addEventListener('input', filterProducts);
        document.getElementById('categoryFilter').addEventListener('change', filterProducts);

        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.dataset.category;
                document.getElementById('categoryFilter').value = category === 'all' ? 'all' : category;
                filterProducts();
            });
        });

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;

            let filtered = products;

            if (category !== 'all') {
                filtered = filtered.filter(p => p.category === category);
            }

            if (searchTerm) {
                filtered = filtered.filter(p =>
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.category.toLowerCase().includes(searchTerm)
                );
            }

            renderProducts(filtered);
        }

        // Cart modal
        document.getElementById('cartBtn').addEventListener('click', () => {
            document.getElementById('cartModal').classList.remove('hidden');
            renderCart();
        });

        document.getElementById('closeCart').addEventListener('click', () => {
            document.getElementById('cartModal').classList.add('hidden');
        });

        document.getElementById('checkoutBtn').addEventListener('click', checkout);

        // Initial render
        renderProducts();
        updateCartCount();
        renderOrderHistory();
    </script>
</body>
</html>
