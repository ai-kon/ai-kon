<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>쇼핑몰 - Coupang 스타일</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #ff6b00 0%, #ff0000 100%);
            min-height: 100vh;
        }
        .product-card:hover {
            transform: translateY(-5px);
            transition: transform 0.3s;
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold text-orange-600">
                    <i class="fas fa-shopping-bag mr-2"></i>쇼핑몰
                </h1>
                <button id="cartBtn" class="relative bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600">
                    <i class="fas fa-shopping-cart mr-2"></i>장바구니
                    <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm">0</span>
                </button>
            </div>

            <!-- Search and Filter -->
            <div class="flex gap-4 mb-4">
                <input type="text" id="searchInput" placeholder="상품 검색..." class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                <select id="categoryFilter" class="px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                    <option value="all">전체 카테고리</option>
                    <option value="전자제품">전자제품</option>
                    <option value="패션">패션</option>
                    <option value="식품">식품</option>
                </select>
            </div>

            <!-- Category Buttons -->
            <div class="flex gap-2 flex-wrap">
                <button class="category-btn bg-orange-100 text-orange-700 px-4 py-2 rounded-full hover:bg-orange-200" data-category="all">전체</button>
                <button class="category-btn bg-blue-100 text-blue-700 px-4 py-2 rounded-full hover:bg-blue-200" data-category="전자제품">전자제품</button>
                <button class="category-btn bg-pink-100 text-pink-700 px-4 py-2 rounded-full hover:bg-pink-200" data-category="패션">패션</button>
                <button class="category-btn bg-green-100 text-green-700 px-4 py-2 rounded-full hover:bg-green-200" data-category="식품">식품</button>
            </div>
        </div>

        <!-- Product Grid -->
        <div id="productGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"></div>

        <!-- Cart Modal -->
        <div id="cartModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">장바구니</h2>
                        <button id="closeCart" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>
                    <div id="cartItems" class="space-y-4 mb-4"></div>
                    <div class="border-t pt-4">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xl font-bold">총 금액:</span>
                            <span id="totalPrice" class="text-2xl font-bold text-orange-600">0원</span>
                        </div>
                        <button id="checkoutBtn" class="w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 font-bold">
                            <i class="fas fa-credit-card mr-2"></i>주문하기
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Order History -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-4">
                <i class="fas fa-history mr-2 text-orange-600"></i>주문 내역
            </h2>
            <div id="orderHistory" class="space-y-4"></div>
        </div>
    </div>

    <script>
        // Sample product data
        const sampleProducts = [
            { id: 1, name: '노트북', category: '전자제품', price: 1500000, image: '💻' },
            { id: 2, name: '스마트폰', category: '전자제품', price: 1200000, image: '📱' },
            { id: 3, name: '무선 이어폰', category: '전자제품', price: 200000, image: '🎧' },
            { id: 4, name: '스마트워치', category: '전자제품', price: 350000, image: '⌚' },
            { id: 5, name: '티셔츠', category: '패션', price: 25000, image: '👕' },
            { id: 6, name: '청바지', category: '패션', price: 80000, image: '👖' },
            { id: 7, name: '운동화', category: '패션', price: 120000, image: '👟' },
            { id: 8, name: '가방', category: '패션', price: 65000, image: '🎒' },
            { id: 9, name: '사과', category: '식품', price: 5000, image: '🍎' },
            { id: 10, name: '바나나', category: '식품', price: 3000, image: '🍌' },
            { id: 11, name: '우유', category: '식품', price: 2500, image: '🥛' },
            { id: 12, name: '빵', category: '식품', price: 4000, image: '🍞' },
        ];

        // Initialize localStorage
        if (!localStorage.getItem('products')) {
            localStorage.setItem('products', JSON.stringify(sampleProducts));
        }
        if (!localStorage.getItem('cart')) {
            localStorage.setItem('cart', JSON.stringify([]));
        }
        if (!localStorage.getItem('orders')) {
            localStorage.setItem('orders', JSON.stringify([]));
        }

        // Get data from localStorage
        let products = JSON.parse(localStorage.getItem('products'));
        let cart = JSON.parse(localStorage.getItem('cart'));
        let orders = JSON.parse(localStorage.getItem('orders'));

        function saveToLocalStorage() {
            localStorage.setItem('cart', JSON.stringify(cart));
            localStorage.setItem('orders', JSON.stringify(orders));
        }

        function formatPrice(price) {
            return price.toLocaleString('ko-KR') + '원';
        }

        function renderProducts(filteredProducts = products) {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = filteredProducts.map(product => `
                <div class="product-card bg-white rounded-lg shadow-lg p-4 hover:shadow-xl transition-shadow">
                    <div class="text-6xl text-center mb-4">${product.image}</div>
                    <div class="text-sm text-gray-500 mb-1">${product.category}</div>
                    <h3 class="font-bold text-lg mb-2">${product.name}</h3>
                    <div class="text-orange-600 font-bold text-xl mb-4">${formatPrice(product.price)}</div>
                    <button onclick="addToCart(${product.id})" class="w-full bg-orange-500 text-white py-2 rounded-lg hover:bg-orange-600">
                        <i class="fas fa-cart-plus mr-2"></i>장바구니 담기
                    </button>
                </div>
            `).join('');
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            saveToLocalStorage();
            updateCartCount();
            alert(`${product.name}이(가) 장바구니에 추가되었습니다!`);
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="text-center text-gray-500 py-8">장바구니가 비어있습니다</div>';
                document.getElementById('totalPrice').textContent = '0원';
                return;
            }

            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center gap-4 border-b pb-4">
                    <div class="text-4xl">${item.image}</div>
                    <div class="flex-1">
                        <h3 class="font-bold">${item.name}</h3>
                        <div class="text-orange-600 font-bold">${formatPrice(item.price)}</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="updateQuantity(${item.id}, -1)" class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">-</button>
                        <span class="font-bold">${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)" class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">+</button>
                    </div>
                    <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('totalPrice').textContent = formatPrice(total);
        }

        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    saveToLocalStorage();
                    renderCart();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveToLocalStorage();
            renderCart();
            updateCartCount();
        }

        function checkout() {
            if (cart.length === 0) {
                alert('장바구니가 비어있습니다!');
                return;
            }

            const order = {
                id: Date.now(),
                date: new Date().toLocaleString('ko-KR'),
                items: [...cart],
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            };

            orders.unshift(order);
            cart = [];
            saveToLocalStorage();

            renderCart();
            updateCartCount();
            renderOrderHistory();

            document.getElementById('cartModal').classList.add('hidden');
            alert('주문이 완료되었습니다!');
        }

        function renderOrderHistory() {
            const orderHistory = document.getElementById('orderHistory');
            if (orders.length === 0) {
                orderHistory.innerHTML = '<div class="text-center text-gray-500 py-8">주문 내역이 없습니다</div>';
                return;
            }

            orderHistory.innerHTML = orders.map(order => `
                <div class="border rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="font-bold text-lg">주문 #${order.id}</div>
                            <div class="text-sm text-gray-500">${order.date}</div>
                        </div>
                        <div class="text-orange-600 font-bold text-xl">${formatPrice(order.total)}</div>
                    </div>
                    <div class="text-sm text-gray-700">
                        ${order.items.map(item => `${item.name} x${item.quantity}`).join(', ')}
                    </div>
                </div>
            `).join('');
        }

        // Search and filter
        document.getElementById('searchInput').addEventListener('input', filterProducts);
        document.getElementById('categoryFilter').addEventListener('change', filterProducts);

        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.dataset.category;
                document.getElementById('categoryFilter').value = category === 'all' ? 'all' : category;
                filterProducts();
            });
        });

        function filterProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;

            let filtered = products;

            if (category !== 'all') {
                filtered = filtered.filter(p => p.category === category);
            }

            if (searchTerm) {
                filtered = filtered.filter(p =>
                    p.name.toLowerCase().includes(searchTerm) ||
                    p.category.toLowerCase().includes(searchTerm)
                );
            }

            renderProducts(filtered);
        }

        // Cart modal
        document.getElementById('cartBtn').addEventListener('click', () => {
            document.getElementById('cartModal').classList.remove('hidden');
            renderCart();
        });

        document.getElementById('closeCart').addEventListener('click', () => {
            document.getElementById('cartModal').classList.add('hidden');
        });

        document.getElementById('checkoutBtn').addEventListener('click', checkout);

        // Initial render
        renderProducts();
        updateCartCount();
        renderOrderHistory();
    </script>
</body>
</html>
