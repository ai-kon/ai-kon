<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î¨¥Ïã†ÏÇ¨ - ÎåÄÌïúÎØºÍµ≠ No.1 Ìå®ÏÖò ÌîåÎû´Ìèº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
        }
        .product-card:hover {
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            transform: translateY(-5px);
            transition: all 0.3s;
        }
        .category-btn.active {
            background-color: #000;
            color: #fff;
        }
    </style>
</head>
<body class="bg-white">
    <div class="max-w-6xl mx-auto bg-white min-h-screen">
        <!-- Header -->
        <div class="bg-black text-white p-4 sticky top-0 z-50">
            <div class="flex items-center justify-between">
                <button onclick="window.location.href='../'" class="text-2xl">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1 class="text-2xl font-bold">MUSINSA</h1>
                <div class="flex space-x-4">
                    <button onclick="toggleCart()" class="relative">
                        <i class="fas fa-shopping-bag text-xl"></i>
                        <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                    </button>
                    <button onclick="toggleWishlist()">
                        <i class="fas fa-heart text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="p-4 border-b">
            <div class="flex items-center bg-gray-100 rounded-lg px-4 py-3">
                <i class="fas fa-search text-gray-400 mr-3"></i>
                <input type="text" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" class="bg-transparent flex-1 outline-none" id="searchInput" oninput="filterProducts()">
            </div>
        </div>

        <!-- Categories -->
        <div class="overflow-x-auto border-b">
            <div class="flex p-4 space-x-2 whitespace-nowrap">
                <button class="category-btn active px-4 py-2 rounded-full border" onclick="filterCategory('Ï†ÑÏ≤¥')">Ï†ÑÏ≤¥</button>
                <button class="category-btn px-4 py-2 rounded-full border" onclick="filterCategory('ÏÉÅÏùò')">ÏÉÅÏùò</button>
                <button class="category-btn px-4 py-2 rounded-full border" onclick="filterCategory('ÌïòÏùò')">ÌïòÏùò</button>
                <button class="category-btn px-4 py-2 rounded-full border" onclick="filterCategory('ÏïÑÏö∞ÌÑ∞')">ÏïÑÏö∞ÌÑ∞</button>
                <button class="category-btn px-4 py-2 rounded-full border" onclick="filterCategory('Ïã†Î∞ú')">Ïã†Î∞ú</button>
                <button class="category-btn px-4 py-2 rounded-full border" onclick="filterCategory('Í∞ÄÎ∞©')">Í∞ÄÎ∞©</button>
                <button class="category-btn px-4 py-2 rounded-full border" onclick="filterCategory('Ïï°ÏÑ∏ÏÑúÎ¶¨')">Ïï°ÏÑ∏ÏÑúÎ¶¨</button>
            </div>
        </div>

        <!-- Products Grid -->
        <div id="productsContainer" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4">
            <!-- Products will be populated here -->
        </div>

        <!-- Cart Modal -->
        <div id="cartModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
            <div class="absolute right-0 top-0 bottom-0 w-full md:w-96 bg-white">
                <div class="p-4 border-b flex justify-between items-center">
                    <h2 class="text-xl font-bold">Ïû•Î∞îÍµ¨Îãà</h2>
                    <button onclick="toggleCart()" class="text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="cartItems" class="overflow-y-auto p-4" style="height: calc(100vh - 180px);">
                    <!-- Cart items will be populated here -->
                </div>
                <div class="absolute bottom-0 left-0 right-0 p-4 border-t bg-white">
                    <div class="flex justify-between mb-3">
                        <span class="font-bold">Ï¥ù Í∏àÏï°</span>
                        <span id="totalPrice" class="font-bold text-xl">0Ïõê</span>
                    </div>
                    <button class="w-full bg-black text-white py-4 rounded-lg font-bold">
                        Íµ¨Îß§ÌïòÍ∏∞
                    </button>
                </div>
            </div>
        </div>

        <!-- Wishlist Modal -->
        <div id="wishlistModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
            <div class="absolute right-0 top-0 bottom-0 w-full md:w-96 bg-white">
                <div class="p-4 border-b flex justify-between items-center">
                    <h2 class="text-xl font-bold">Ï∞ú Î™©Î°ù</h2>
                    <button onclick="toggleWishlist()" class="text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div id="wishlistItems" class="overflow-y-auto p-4" style="height: calc(100vh - 80px);">
                    <!-- Wishlist items will be populated here -->
                </div>
            </div>
        </div>

        <!-- Product Detail Modal -->
        <div id="productModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto">
            <div class="min-h-screen flex items-center justify-center p-4">
                <div class="bg-white rounded-lg max-w-2xl w-full">
                    <div class="p-4 border-b flex justify-between items-center">
                        <h2 class="text-xl font-bold">ÏÉÅÌíà ÏÉÅÏÑ∏</h2>
                        <button onclick="closeProductModal()" class="text-2xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="productDetail" class="p-6">
                        <!-- Product detail will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const products = [
            { id: 1, brand: 'ÎÇòÏù¥ÌÇ§', name: 'ÏóêÏñ¥Ìè¨Ïä§ 1 ÌôîÏù¥Ìä∏', category: 'Ïã†Î∞ú', price: 129000, image: 'üëü', rating: 4.8, reviews: 1523, sizes: ['250', '255', '260', '265', '270', '275', '280'] },
            { id: 2, brand: 'ÏïÑÎîîÎã§Ïä§', name: 'ÏäàÌçºÏä§ÌÉÄ ÌÅ¥ÎûòÏãù', category: 'Ïã†Î∞ú', price: 119000, image: 'üëü', rating: 4.7, reviews: 892, sizes: ['250', '255', '260', '265', '270', '275'] },
            { id: 3, brand: 'ÎîîÏä§Ïª§Î≤ÑÎ¶¨', name: 'Ïò§Î≤ÑÌïè ÌõÑÎìú Ìã∞ÏÖîÏ∏†', category: 'ÏÉÅÏùò', price: 39000, image: 'üëï', rating: 4.5, reviews: 456, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 4, brand: 'MLB', name: 'Îâ¥Ïöï ÏñëÌÇ§Ïä§ Î≥ºÏ∫°', category: 'Ïï°ÏÑ∏ÏÑúÎ¶¨', price: 49000, image: 'üß¢', rating: 4.9, reviews: 2341, sizes: ['FREE'] },
            { id: 5, brand: 'ÎÖ∏Ïä§ÌéòÏù¥Ïä§', name: 'ÎàïÏãú Ìå®Îî© ÏûêÏºì', category: 'ÏïÑÏö∞ÌÑ∞', price: 389000, image: 'üß•', rating: 4.9, reviews: 678, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 6, brand: 'Î¶¨Î∞îÏù¥Ïä§', name: '501 Ïò§Î¶¨ÏßÄÎÑê Ìïè Ï≤≠Î∞îÏßÄ', category: 'ÌïòÏùò', price: 129000, image: 'üëñ', rating: 4.6, reviews: 1234, sizes: ['28', '30', '32', '34', '36'] },
            { id: 7, brand: 'Ï±îÌîºÏò®', name: 'Î¶¨Î≤ÑÏä§ÏúÑÎ∏å ÌõÑÎìúÏßëÏóÖ', category: 'ÏÉÅÏùò', price: 89000, image: 'üëï', rating: 4.7, reviews: 567, sizes: ['M', 'L', 'XL'] },
            { id: 8, brand: 'Î∞òÏä§', name: 'Ïò¨ÎìúÏä§Ïø® Î∏îÎûôÌôîÏù¥Ìä∏', category: 'Ïã†Î∞ú', price: 79000, image: 'üëü', rating: 4.8, reviews: 2156, sizes: ['250', '255', '260', '265', '270'] },
            { id: 9, brand: 'Ïπ¥Î•¥ÌïòÌä∏', name: 'ÎîîÌä∏Î°úÏù¥Ìä∏ ÏûêÏºì', category: 'ÏïÑÏö∞ÌÑ∞', price: 259000, image: 'üß•', rating: 4.8, reviews: 432, sizes: ['M', 'L', 'XL'] },
            { id: 10, brand: 'Îâ¥Î∞úÎûÄÏä§', name: '992 Í∑∏Î†àÏù¥', category: 'Ïã†Î∞ú', price: 259000, image: 'üëü', rating: 4.9, reviews: 1823, sizes: ['250', '255', '260', '265', '270', '275', '280'] },
            { id: 11, brand: 'ÌÉÄÎØ∏ÌûêÌîºÍ±∞', name: 'Î°úÍ≥† Ïä§Ïõ®ÌÑ∞', category: 'ÏÉÅÏùò', price: 149000, image: 'üëï', rating: 4.5, reviews: 234, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 12, brand: 'Îã•ÌÑ∞ÎßàÌã¥', name: '1460 8ÌôÄ Î∂ÄÏ∏†', category: 'Ïã†Î∞ú', price: 229000, image: 'ü•æ', rating: 4.7, reviews: 987, sizes: ['250', '255', '260', '265', '270'] },
            { id: 13, brand: 'Ìè¥Î°ú ÎûÑÌîÑÎ°úÎ†å', name: 'Ïò•Ïä§Ìè¨Îìú ÏÖîÏ∏†', category: 'ÏÉÅÏùò', price: 119000, image: 'üëî', rating: 4.6, reviews: 456, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 14, brand: 'ÎπàÌè¥', name: 'Ïö∏ Î∏îÎ†åÎìú ÏΩîÌä∏', category: 'ÏïÑÏö∞ÌÑ∞', price: 589000, image: 'üß•', rating: 4.8, reviews: 234, sizes: ['M', 'L', 'XL'] },
            { id: 15, brand: 'Ïú†ÎãàÌÅ¥Î°ú', name: 'ÌûàÌä∏ÌÖç Í∏¥ÌåîÌã∞', category: 'ÏÉÅÏùò', price: 29000, image: 'üëï', rating: 4.4, reviews: 3456, sizes: ['S', 'M', 'L', 'XL', 'XXL'] },
            { id: 16, brand: 'Íµ¨Ï∞å', name: 'Î†àÎçî Î≤®Ìä∏', category: 'Ïï°ÏÑ∏ÏÑúÎ¶¨', price: 459000, image: 'üéÄ', rating: 4.9, reviews: 123, sizes: ['85', '90', '95', '100'] },
            { id: 17, brand: 'ÏßÄÏò§Îã§ÎÖ∏', name: 'Ïä¨Î¶ºÌïè ÏπòÎÖ∏Ìå¨Ï∏†', category: 'ÌïòÏùò', price: 59000, image: 'üëñ', rating: 4.5, reviews: 789, sizes: ['28', '30', '32', '34', '36'] },
            { id: 18, brand: 'ÏóêÏûáÏÑ∏Ïª®Ï¶à', name: 'Î≤†Ïù¥ÏßÅ Î∞òÌåîÌã∞', category: 'ÏÉÅÏùò', price: 19900, image: 'üëï', rating: 4.3, reviews: 2345, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 19, brand: 'Ìú†Îùº', name: 'ÎîîÏä§ÎüΩÌÑ∞2 ÌôîÏù¥Ìä∏', category: 'Ïã†Î∞ú', price: 89000, image: 'üëü', rating: 4.6, reviews: 1567, sizes: ['250', '255', '260', '265', '270'] },
            { id: 20, brand: 'Ïª®Î≤ÑÏä§', name: 'Ï≤ôÌÖåÏùºÎü¨ Ïò¨Ïä§ÌÉÄ', category: 'Ïã†Î∞ú', price: 65000, image: 'üëü', rating: 4.7, reviews: 2890, sizes: ['250', '255', '260', '265', '270', '275'] },
            { id: 21, brand: 'Ìë∏Îßà', name: 'Ïä§Ïõ®Ïù¥Îìú ÌÅ¥ÎûòÏãù', category: 'Ïã†Î∞ú', price: 99000, image: 'üëü', rating: 4.6, reviews: 678, sizes: ['250', '255', '260', '265', '270'] },
            { id: 22, brand: 'Ïä§Ìà¨Ïãú', name: 'Î≤†Ïù¥ÏßÅ Î°úÍ≥† ÌõÑÎìúÌã∞', category: 'ÏÉÅÏùò', price: 159000, image: 'üëï', rating: 4.8, reviews: 456, sizes: ['M', 'L', 'XL'] },
            { id: 23, brand: 'ÏïÑÌÅ¨ÌÖåÎ¶≠Ïä§', name: 'Î≤†ÌÉÄ LT ÏûêÏºì', category: 'ÏïÑÏö∞ÌÑ∞', price: 589000, image: 'üß•', rating: 4.9, reviews: 234, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 24, brand: 'Î•¥Íº¨ÎÅÑ', name: 'Ìä∏Î†àÏù¥Îãù Ìå¨Ï∏†', category: 'ÌïòÏùò', price: 79000, image: 'üëñ', rating: 4.5, reviews: 567, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 25, brand: 'ÎÆ§Ïù¥', name: 'ÎØ∏ÎãàÎ©Ä ÌÅ¨Î°úÏä§Î∞±', category: 'Í∞ÄÎ∞©', price: 129000, image: 'üëú', rating: 4.7, reviews: 345, sizes: ['FREE'] },
            { id: 26, brand: 'MCM', name: 'Î∞±Ìå© Ïä§Î™∞', category: 'Í∞ÄÎ∞©', price: 1290000, image: 'üéí', rating: 4.9, reviews: 123, sizes: ['FREE'] },
            { id: 27, brand: 'ÎßàÎ•¥ÎîîÎ©îÌÅ¨Î•¥Îîî', name: 'ÌîåÎ°úÏö∞ Î∞±Ìå©', category: 'Í∞ÄÎ∞©', price: 89000, image: 'üéí', rating: 4.6, reviews: 890, sizes: ['FREE'] },
            { id: 28, brand: 'Ïï§ÎçîÏä®Î≤®', name: 'Ïä§Ïπ¥Ïπò Ï≤¥ÌÅ¨ ÏÖîÏ∏†', category: 'ÏÉÅÏùò', price: 109000, image: 'üëî', rating: 4.7, reviews: 234, sizes: ['M', 'L', 'XL'] },
            { id: 29, brand: 'Ïª§Î≤ÑÎÇ´', name: 'ÏïÑÏπò Î°úÍ≥† Îß®Ìà¨Îß®', category: 'ÏÉÅÏùò', price: 79000, image: 'üëï', rating: 4.6, reviews: 456, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 30, brand: 'Ïö∞ÏòÅÎØ∏', name: 'Ïö∏ Ïä¨ÎûôÏä§', category: 'ÌïòÏùò', price: 289000, image: 'üëñ', rating: 4.8, reviews: 178, sizes: ['28', '30', '32', '34'] },
            { id: 31, brand: 'ÏïÑÎØ∏', name: 'ÌïòÌä∏ Î°úÍ≥† Í∞ÄÎîîÍ±¥', category: 'ÏÉÅÏùò', price: 359000, image: 'üëï', rating: 4.8, reviews: 234, sizes: ['S', 'M', 'L'] },
            { id: 32, brand: 'Î©îÏ¢ÖÌÇ§Ï∏†ÎÑ§', name: 'Ìè≠Ïä§ Ìå®Ïπò Ìã∞ÏÖîÏ∏†', category: 'ÏÉÅÏùò', price: 129000, image: 'üëï', rating: 4.7, reviews: 345, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 33, brand: 'ÏïÑÌéòÏéÑ', name: 'Îç∞Îãò Ìä∏Îü¨Ïª§ ÏûêÏºì', category: 'ÏïÑÏö∞ÌÑ∞', price: 329000, image: 'üß•', rating: 4.7, reviews: 189, sizes: ['S', 'M', 'L', 'XL'] },
            { id: 34, brand: 'ÎÑ§Ïù¥Î®∏ÌÅ¥Î°úÎî©', name: 'ÏãúÍ∑∏ÎãàÏ≤ò Î≥ºÏ∫°', category: 'Ïï°ÏÑ∏ÏÑúÎ¶¨', price: 39000, image: 'üß¢', rating: 4.5, reviews: 678, sizes: ['FREE'] },
            { id: 35, brand: 'Ï†úÎÑ§Îü¥ÏïÑÏù¥ÎîîÏñ¥', name: 'Î†àÎçî Ïä§ÎãàÏª§Ï¶à', category: 'Ïã†Î∞ú', price: 189000, image: 'üëü', rating: 4.6, reviews: 234, sizes: ['250', '255', '260', '265', '270'] },
            { id: 36, brand: 'ÎîîÏä§Ïù¥Ï¶àÎÑ§Î≤ÑÎåì', name: 'Î°úÍ≥† ÌõÑÎìúÏßëÏóÖ', category: 'ÏÉÅÏùò', price: 119000, image: 'üëï', rating: 4.7, reviews: 456, sizes: ['M', 'L', 'XL'] },
            { id: 37, brand: 'ÎßàÎóëÌÇ¥', name: 'Ïò§Î≤ÑÏÇ¨Ïù¥Ï¶à ÏÖîÏ∏†', category: 'ÏÉÅÏùò', price: 229000, image: 'üëî', rating: 4.8, reviews: 123, sizes: ['M', 'L'] },
            { id: 38, brand: 'ÏãúÍ∑∏ÎãàÏ≤ò', name: 'Ï∫êÏãúÎØ∏Ïñ¥ Î®∏ÌîåÎü¨', category: 'Ïï°ÏÑ∏ÏÑúÎ¶¨', price: 159000, image: 'üß£', rating: 4.9, reviews: 234, sizes: ['FREE'] },
        ];

        let cart = JSON.parse(localStorage.getItem('musinsaCart') || '[]');
        let wishlist = JSON.parse(localStorage.getItem('musinsaWishlist') || '[]');
        let currentCategory = 'Ï†ÑÏ≤¥';

        function init() {
            renderProducts();
            updateCartCount();
        }

        function renderProducts() {
            const container = document.getElementById('productsContainer');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            const filtered = products.filter(p => {
                const matchCategory = currentCategory === 'Ï†ÑÏ≤¥' || p.category === currentCategory;
                const matchSearch = p.name.toLowerCase().includes(searchTerm) ||
                                  p.brand.toLowerCase().includes(searchTerm);
                return matchCategory && matchSearch;
            });

            container.innerHTML = filtered.map(product => `
                <div class="product-card bg-white rounded-lg overflow-hidden cursor-pointer" onclick="showProductDetail(${product.id})">
                    <div class="aspect-square bg-gray-100 flex items-center justify-center text-6xl">
                        ${product.image}
                    </div>
                    <div class="p-3">
                        <p class="text-xs text-gray-500 font-bold">${product.brand}</p>
                        <p class="text-sm mt-1 line-clamp-2">${product.name}</p>
                        <div class="flex items-center mt-2 text-xs text-gray-500">
                            <i class="fas fa-star text-yellow-400"></i>
                            <span class="ml-1">${product.rating}</span>
                            <span class="ml-2">Î¶¨Î∑∞ ${product.reviews}</span>
                        </div>
                        <p class="text-lg font-bold mt-2">${product.price.toLocaleString()}Ïõê</p>
                        <button onclick="addToCart(${product.id}); event.stopPropagation();"
                                class="w-full mt-2 bg-black text-white py-2 rounded text-sm hover:bg-gray-800">
                            Ïû•Î∞îÍµ¨Îãà
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            const isWishlisted = wishlist.includes(productId);

            document.getElementById('productDetail').innerHTML = `
                <div class="aspect-square bg-gray-100 flex items-center justify-center text-9xl mb-6">
                    ${product.image}
                </div>
                <div class="space-y-4">
                    <div>
                        <p class="text-sm text-gray-500 font-bold">${product.brand}</p>
                        <h3 class="text-2xl font-bold mt-1">${product.name}</h3>
                    </div>
                    <div class="flex items-center text-sm">
                        <i class="fas fa-star text-yellow-400"></i>
                        <span class="ml-1 font-bold">${product.rating}</span>
                        <span class="ml-2 text-gray-500">Î¶¨Î∑∞ ${product.reviews}Í∞ú</span>
                    </div>
                    <p class="text-3xl font-bold">${product.price.toLocaleString()}Ïõê</p>
                    <div>
                        <p class="font-bold mb-2">ÏÇ¨Ïù¥Ï¶à ÏÑ†ÌÉù</p>
                        <div class="grid grid-cols-4 gap-2">
                            ${product.sizes.map(size => `
                                <button class="border py-2 rounded hover:border-black">${size}</button>
                            `).join('')}
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="toggleWishlistItem(${product.id})"
                                class="flex-1 border-2 ${isWishlisted ? 'border-red-500 text-red-500' : 'border-gray-300'} py-3 rounded-lg">
                            <i class="fas fa-heart"></i> Ï∞ú
                        </button>
                        <button onclick="addToCart(${product.id})"
                                class="flex-1 bg-black text-white py-3 rounded-lg">
                            Ïû•Î∞îÍµ¨Îãà
                        </button>
                    </div>
                    <div class="border-t pt-4 space-y-2 text-sm">
                        <p><strong>Î∞∞ÏÜ°:</strong> Î¨¥Î£åÎ∞∞ÏÜ° (3ÎßåÏõê Ïù¥ÏÉÅ)</p>
                        <p><strong>Î∞∞ÏÜ°Í∏∞Í∞Ñ:</strong> 1-2Ïùº ÏÜåÏöî</p>
                        <p><strong>Î∞òÌíà/ÍµêÌôò:</strong> 7Ïùº Ïù¥ÎÇ¥ Í∞ÄÎä•</p>
                    </div>
                </div>
            `;
            document.getElementById('productModal').classList.remove('hidden');
        }

        function closeProductModal() {
            document.getElementById('productModal').classList.add('hidden');
        }

        function filterCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            renderProducts();
        }

        function filterProducts() {
            renderProducts();
        }

        function addToCart(productId) {
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: productId, quantity: 1 });
            }
            localStorage.setItem('musinsaCart', JSON.stringify(cart));
            updateCartCount();
            renderCart();
            alert('Ïû•Î∞îÍµ¨ÎãàÏóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§!');
        }

        function toggleCart() {
            document.getElementById('cartModal').classList.toggle('hidden');
            renderCart();
        }

        function toggleWishlist() {
            document.getElementById('wishlistModal').classList.toggle('hidden');
            renderWishlist();
        }

        function toggleWishlistItem(productId) {
            const index = wishlist.indexOf(productId);
            if (index > -1) {
                wishlist.splice(index, 1);
            } else {
                wishlist.push(productId);
            }
            localStorage.setItem('musinsaWishlist', JSON.stringify(wishlist));
            showProductDetail(productId);
            renderWishlist();
        }

        function renderCart() {
            const container = document.getElementById('cartItems');
            if (cart.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 py-10">Ïû•Î∞îÍµ¨ÎãàÍ∞Ä ÎπÑÏñ¥ÏûàÏäµÎãàÎã§</p>';
                document.getElementById('totalPrice').textContent = '0Ïõê';
                return;
            }

            let total = 0;
            container.innerHTML = cart.map(item => {
                const product = products.find(p => p.id === item.id);
                total += product.price * item.quantity;
                return `
                    <div class="border-b pb-4 mb-4">
                        <div class="flex items-center">
                            <div class="w-20 h-20 bg-gray-100 flex items-center justify-center text-3xl mr-3">
                                ${product.image}
                            </div>
                            <div class="flex-1">
                                <p class="text-xs text-gray-500">${product.brand}</p>
                                <p class="text-sm font-semibold">${product.name}</p>
                                <p class="text-sm font-bold mt-1">${product.price.toLocaleString()}Ïõê</p>
                                <div class="flex items-center mt-2">
                                    <button onclick="updateCartQuantity(${product.id}, -1)" class="border px-2 py-1 text-sm">-</button>
                                    <span class="px-3">${item.quantity}</span>
                                    <button onclick="updateCartQuantity(${product.id}, 1)" class="border px-2 py-1 text-sm">+</button>
                                    <button onclick="removeFromCart(${product.id})" class="ml-auto text-red-500 text-sm">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('totalPrice').textContent = total.toLocaleString() + 'Ïõê';
        }

        function renderWishlist() {
            const container = document.getElementById('wishlistItems');
            if (wishlist.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500 py-10">Ï∞úÌïú ÏÉÅÌíàÏù¥ ÏóÜÏäµÎãàÎã§</p>';
                return;
            }

            container.innerHTML = wishlist.map(productId => {
                const product = products.find(p => p.id === productId);
                return `
                    <div class="border-b pb-4 mb-4">
                        <div class="flex items-center cursor-pointer" onclick="showProductDetail(${product.id}); toggleWishlist();">
                            <div class="w-20 h-20 bg-gray-100 flex items-center justify-center text-3xl mr-3">
                                ${product.image}
                            </div>
                            <div class="flex-1">
                                <p class="text-xs text-gray-500">${product.brand}</p>
                                <p class="text-sm font-semibold">${product.name}</p>
                                <p class="text-sm font-bold mt-1">${product.price.toLocaleString()}Ïõê</p>
                            </div>
                            <button onclick="toggleWishlistItem(${product.id}); event.stopPropagation();" class="text-red-500">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function updateCartQuantity(productId, change) {
            const item = cart.find(i => i.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    localStorage.setItem('musinsaCart', JSON.stringify(cart));
                    updateCartCount();
                    renderCart();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('musinsaCart', JSON.stringify(cart));
            updateCartCount();
            renderCart();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        init();
    </script>
</body>
</html>
