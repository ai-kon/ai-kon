<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카카오페이지 - 웹툰, 웹소설, 만화</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --kakao-yellow: #FEE500;
            --kakao-brown: #3C1E1E;
            --kakao-orange: #FF9900;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', '맑은 고딕', 'Apple SD Gothic Neo', sans-serif;
        }

        .kakao-gradient {
            background: linear-gradient(135deg, #FEE500 0%, #FF9900 100%);
        }

        .kakao-bg {
            background-color: var(--kakao-yellow);
        }

        .content-card {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .content-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
        }

        .badge {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .badge-free {
            background: #10B981;
            color: white;
        }

        .badge-wait {
            background: #3B82F6;
            color: white;
        }

        .badge-paid {
            background: #EF4444;
            color: white;
        }

        .badge-new {
            background: #EC4899;
            color: white;
        }

        .badge-up {
            background: #8B5CF6;
            color: white;
        }

        .rank-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(0,0,0,0.8);
            color: #FEE500;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .rank-badge.top3 {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
        }

        .tab-active {
            color: var(--kakao-brown);
            border-bottom: 3px solid var(--kakao-yellow);
            font-weight: bold;
        }

        .genre-tab {
            transition: all 0.2s;
        }

        .genre-tab:hover {
            background: #FFF9E6;
        }

        .genre-active {
            background: var(--kakao-yellow);
            color: var(--kakao-brown);
            font-weight: bold;
        }

        .reading-panel {
            background: #1a1a1a;
            color: white;
        }

        .timer-badge {
            background: #3B82F6;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .coin-icon {
            color: #FFD700;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .cover-placeholder {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
            text-align: center;
            padding: 8px;
        }

        .star-rating {
            color: #FFD700;
        }

        .progress-bar {
            height: 4px;
            background: #e5e7eb;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--kakao-yellow);
            transition: width 0.3s;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="kakao-bg shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-6">
                    <h1 class="text-2xl font-bold text-gray-900 cursor-pointer" onclick="showHome()">
                        <i class="fas fa-book-open"></i> 카카오페이지
                    </h1>
                    <nav class="hidden md:flex gap-6">
                        <a href="#" class="nav-tab tab-active" data-category="webtoon" onclick="filterCategory('webtoon')">웹툰</a>
                        <a href="#" class="nav-tab" data-category="webnovel" onclick="filterCategory('webnovel')">웹소설</a>
                        <a href="#" class="nav-tab" data-category="manga" onclick="filterCategory('manga')">만화</a>
                        <a href="#" class="nav-tab" data-category="novel" onclick="filterCategory('novel')">라이트노벨</a>
                    </nav>
                </div>
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 bg-white px-3 py-2 rounded-full cursor-pointer" onclick="showCoinModal()">
                        <i class="fas fa-coins coin-icon"></i>
                        <span class="font-bold" id="coinBalance">50</span>
                        <i class="fas fa-plus text-xs"></i>
                    </div>
                    <button class="px-4 py-2 bg-white rounded-full font-bold hover:bg-gray-100" onclick="showLibrary()">
                        <i class="fas fa-bookmark"></i> 보관함
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-6" id="mainContent">
        <!-- Genre Tabs -->
        <div class="mb-6 overflow-x-auto">
            <div class="flex gap-2 min-w-max">
                <button class="genre-tab genre-active px-4 py-2 rounded-full whitespace-nowrap" data-genre="all" onclick="filterGenre('all')">전체</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="romance" onclick="filterGenre('romance')">로맨스</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="fantasy" onclick="filterGenre('fantasy')">판타지</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="action" onclick="filterGenre('action')">무협/액션</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="bl" onclick="filterGenre('bl')">BL</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="drama" onclick="filterGenre('drama')">드라마</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="thriller" onclick="filterGenre('thriller')">스릴러</button>
                <button class="genre-tab px-4 py-2 rounded-full whitespace-nowrap" data-genre="comedy" onclick="filterGenre('comedy')">코미디</button>
            </div>
        </div>

        <!-- Ranking Section -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold flex items-center gap-2">
                    <i class="fas fa-trophy text-yellow-500"></i> 인기 랭킹
                </h2>
                <button class="text-sm text-gray-600 hover:text-gray-900">
                    더보기 <i class="fas fa-chevron-right text-xs"></i>
                </button>
            </div>
        </div>

        <!-- Content Grid -->
        <div id="contentGrid" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
            <!-- Content will be dynamically loaded here -->
        </div>
    </main>

    <!-- Detail Modal -->
    <div id="detailModal" class="modal">
        <div class="modal-content w-full md:w-3/4 lg:w-2/3">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold" id="detailTitle"></h2>
                    <button onclick="closeDetailModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>

                <div class="grid md:grid-cols-3 gap-6 mb-6">
                    <div>
                        <div id="detailCover" class="aspect-[3/4] rounded-lg shadow-lg"></div>
                    </div>
                    <div class="md:col-span-2">
                        <div class="mb-4">
                            <div class="flex gap-2 mb-3" id="detailBadges"></div>
                            <div class="flex items-center gap-4 mb-3">
                                <div class="star-rating" id="detailRating"></div>
                                <span class="text-gray-600" id="detailRatingText"></span>
                            </div>
                            <p class="text-gray-600 mb-2" id="detailAuthor"></p>
                            <p class="text-gray-700 leading-relaxed" id="detailDescription"></p>
                        </div>
                        <div class="flex gap-3 mb-4">
                            <button onclick="addToLibrary()" class="flex-1 kakao-bg px-6 py-3 rounded-lg font-bold hover:opacity-90">
                                <i class="fas fa-bookmark"></i> 보관함에 추가
                            </button>
                            <button onclick="startReading()" class="flex-1 bg-gray-900 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-800">
                                <i class="fas fa-play"></i> 첫화 보기
                            </button>
                        </div>
                        <div id="detailTimer" class="mb-4"></div>
                    </div>
                </div>

                <!-- Episodes List -->
                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-4">에피소드 목록</h3>
                    <div id="episodesList" class="space-y-2 max-h-96 overflow-y-auto">
                        <!-- Episodes will be loaded here -->
                    </div>
                </div>

                <!-- Comments Section -->
                <div>
                    <h3 class="text-xl font-bold mb-4">댓글 <span class="text-gray-500 text-sm" id="commentCount"></span></h3>
                    <div class="mb-4">
                        <textarea id="commentInput" class="w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-yellow-400" rows="3" placeholder="댓글을 입력하세요..."></textarea>
                        <button onclick="addComment()" class="mt-2 kakao-bg px-6 py-2 rounded-lg font-bold hover:opacity-90">
                            댓글 작성
                        </button>
                    </div>
                    <div id="commentsList" class="space-y-4">
                        <!-- Comments will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reading Modal -->
    <div id="readingModal" class="modal">
        <div class="modal-content w-full h-full md:w-4/5 md:h-auto bg-black">
            <div class="reading-panel h-full flex flex-col">
                <div class="flex items-center justify-between p-4 border-b border-gray-700">
                    <div>
                        <h3 class="font-bold" id="readingTitle"></h3>
                        <p class="text-sm text-gray-400" id="readingEpisode"></p>
                    </div>
                    <button onclick="closeReadingModal()" class="text-white hover:text-gray-300">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>

                <div class="flex-1 overflow-y-auto p-8" id="readingContent">
                    <!-- Reading content will be loaded here -->
                </div>

                <div class="flex items-center justify-between p-4 border-t border-gray-700">
                    <button onclick="previousEpisode()" class="px-4 py-2 bg-gray-700 rounded hover:bg-gray-600">
                        <i class="fas fa-chevron-left"></i> 이전화
                    </button>
                    <div class="flex gap-4">
                        <button class="px-4 py-2 bg-gray-700 rounded hover:bg-gray-600">
                            <i class="fas fa-list"></i>
                        </button>
                        <button class="px-4 py-2 bg-gray-700 rounded hover:bg-gray-600">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                    <button onclick="nextEpisode()" class="px-4 py-2 kakao-bg text-gray-900 rounded font-bold hover:opacity-90">
                        다음화 <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Coin Purchase Modal -->
    <div id="coinModal" class="modal">
        <div class="modal-content w-full md:w-1/2 lg:w-1/3">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold flex items-center gap-2">
                        <i class="fas fa-coins coin-icon"></i> 코인 충전
                    </h2>
                    <button onclick="closeCoinModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>

                <div class="mb-6">
                    <div class="text-center p-4 bg-gray-100 rounded-lg mb-4">
                        <p class="text-gray-600 mb-2">보유 코인</p>
                        <p class="text-3xl font-bold flex items-center justify-center gap-2">
                            <i class="fas fa-coins coin-icon"></i>
                            <span id="modalCoinBalance">50</span>
                        </p>
                    </div>
                </div>

                <div class="space-y-3">
                    <button onclick="purchaseCoins(10, 1000)" class="w-full p-4 border-2 rounded-lg hover:border-yellow-400 transition">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-bold text-lg">10 코인</p>
                                <p class="text-sm text-gray-600">보너스 +2코인</p>
                            </div>
                            <p class="font-bold text-xl">₩1,000</p>
                        </div>
                    </button>

                    <button onclick="purchaseCoins(50, 4500)" class="w-full p-4 border-2 rounded-lg hover:border-yellow-400 transition">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-bold text-lg">50 코인</p>
                                <p class="text-sm text-gray-600">보너스 +15코인</p>
                            </div>
                            <p class="font-bold text-xl">₩4,500</p>
                        </div>
                    </button>

                    <button onclick="purchaseCoins(100, 8000)" class="w-full p-4 border-2 rounded-lg hover:border-yellow-400 transition border-yellow-400 bg-yellow-50">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-bold text-lg">100 코인</p>
                                <p class="text-sm text-yellow-600">보너스 +35코인 (인기!)</p>
                            </div>
                            <p class="font-bold text-xl">₩8,000</p>
                        </div>
                    </button>

                    <button onclick="purchaseCoins(300, 20000)" class="w-full p-4 border-2 rounded-lg hover:border-yellow-400 transition">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="font-bold text-lg">300 코인</p>
                                <p class="text-sm text-gray-600">보너스 +150코인</p>
                            </div>
                            <p class="font-bold text-xl">₩20,000</p>
                        </div>
                    </button>
                </div>

                <p class="text-xs text-gray-500 text-center mt-6">
                    결제 시 카카오페이를 통해 안전하게 결제됩니다
                </p>
            </div>
        </div>
    </div>

    <!-- Library Modal -->
    <div id="libraryModal" class="modal">
        <div class="modal-content w-full md:w-3/4">
            <div class="p-6">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold">
                        <i class="fas fa-bookmark"></i> 내 보관함
                    </h2>
                    <button onclick="closeLibraryModal()" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times text-2xl"></i>
                    </button>
                </div>

                <div id="libraryContent" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4">
                    <!-- Library items will be loaded here -->
                </div>

                <div id="emptyLibrary" class="text-center py-12 hidden">
                    <i class="fas fa-bookmark text-6xl text-gray-300 mb-4"></i>
                    <p class="text-gray-500">보관함이 비어있습니다</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Content Database
        const contentDB = [
            // Webtoons
            {
                id: 1,
                title: "김부장",
                author: "박만사",
                category: "webtoon",
                genre: "drama",
                rating: 4.9,
                episodes: 156,
                description: "평범한 회사원 김 부장의 일상과 직장생활을 그린 공감 100% 웹툰",
                price: 3,
                waitFree: true,
                waitTime: "23:45:00",
                isFree: false,
                isNew: false,
                rank: 1
            },
            {
                id: 2,
                title: "바른연애 길라잡이",
                author: "남수",
                category: "webtoon",
                genre: "romance",
                rating: 4.8,
                episodes: 89,
                description: "연애 서툰 남녀의 알콩달콩 로맨스 웹툰",
                price: 3,
                waitFree: true,
                waitTime: "05:30:00",
                isFree: false,
                isNew: false,
                rank: 2
            },
            {
                id: 3,
                title: "여신강림",
                author: "야옹이",
                category: "webtoon",
                genre: "romance",
                rating: 4.9,
                episodes: 178,
                description: "화장으로 완벽하게 변신한 여고생의 학교생활 로맨스",
                price: 3,
                waitFree: true,
                waitTime: "12:20:00",
                isFree: false,
                isNew: false,
                rank: 3
            },
            {
                id: 4,
                title: "나 혼자만 레벨업",
                author: "추공",
                category: "webtoon",
                genre: "fantasy",
                rating: 4.9,
                episodes: 200,
                description: "최약체 헌터에서 최강자로! 혼자만 레벨업하는 성진우의 이야기",
                price: 5,
                waitFree: false,
                isFree: false,
                isNew: false,
                rank: 4
            },
            {
                id: 5,
                title: "신의 탑",
                author: "SIU",
                category: "webtoon",
                genre: "fantasy",
                rating: 4.7,
                episodes: 567,
                description: "탑의 꼭대기에 오르기 위한 소년의 모험",
                price: 3,
                waitFree: true,
                waitTime: "18:15:00",
                isFree: false,
                isNew: false,
                rank: 5
            },
            {
                id: 6,
                title: "화산귀환",
                author: "비가",
                category: "webtoon",
                genre: "action",
                rating: 4.8,
                episodes: 134,
                description: "화산파 최강 검사, 100년 전으로 회귀하다!",
                price: 3,
                waitFree: true,
                waitTime: "08:40:00",
                isFree: false,
                isNew: false,
                rank: 6
            },
            {
                id: 7,
                title: "싸움독학",
                author: "박태준",
                category: "webtoon",
                genre: "action",
                rating: 4.8,
                episodes: 201,
                description: "유튜브로 싸움을 배운 소년의 학원 액션",
                price: 3,
                waitFree: true,
                waitTime: "14:25:00",
                isFree: false,
                isNew: false,
                rank: 7
            },
            {
                id: 8,
                title: "입학용병",
                author: "YC",
                category: "webtoon",
                genre: "action",
                rating: 4.7,
                episodes: 98,
                description: "전직 용병이 고등학교에 입학한다면?",
                price: 3,
                waitFree: true,
                waitTime: "03:10:00",
                isFree: false,
                isNew: true,
                rank: 8
            },
            {
                id: 9,
                title: "프리드로우",
                author: "전선욱",
                category: "webtoon",
                genre: "drama",
                rating: 4.6,
                episodes: 145,
                description: "축구 천재의 성장 스토리",
                price: 3,
                waitFree: true,
                waitTime: "20:50:00",
                isFree: false,
                isNew: false,
                rank: 9
            },
            {
                id: 10,
                title: "재혼황후",
                author: "알파타르트",
                category: "webtoon",
                genre: "romance",
                rating: 4.9,
                episodes: 187,
                description: "완벽한 황후의 재혼 로맨스 판타지",
                price: 3,
                waitFree: true,
                waitTime: "16:35:00",
                isFree: false,
                isNew: false,
                rank: 10
            },
            {
                id: 11,
                title: "유미의 세포들",
                author: "이동건",
                category: "webtoon",
                genre: "romance",
                rating: 4.8,
                episodes: 545,
                description: "유미의 머릿속 세포들이 펼치는 로맨스 코미디",
                price: 0,
                waitFree: false,
                isFree: true,
                isNew: false,
                rank: 11
            },
            {
                id: 12,
                title: "체크포인트",
                author: "이레",
                category: "webtoon",
                genre: "bl",
                rating: 4.7,
                episodes: 76,
                description: "게임 같은 현실, 세이브 포인트를 찾아라",
                price: 5,
                waitFree: false,
                isFree: false,
                isNew: true,
                rank: 12
            },
            // Web Novels
            {
                id: 13,
                title: "전지적 독자 시점",
                author: "싱숑",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.9,
                episodes: 551,
                description: "완결된 소설 속 세계가 현실이 된다면?",
                price: 3,
                waitFree: true,
                waitTime: "10:30:00",
                isFree: false,
                isNew: false,
                rank: 1
            },
            {
                id: 14,
                title: "달빛조각사",
                author: "남희성",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.8,
                episodes: 1200,
                description: "가상현실 게임 로열로드의 전설적인 조각사",
                price: 3,
                waitFree: true,
                waitTime: "07:15:00",
                isFree: false,
                isNew: false,
                rank: 2
            },
            {
                id: 15,
                title: "나는 귀족이다",
                author: "구판다",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.7,
                episodes: 450,
                description: "몰락한 귀족 가문의 재건기",
                price: 3,
                waitFree: true,
                waitTime: "15:20:00",
                isFree: false,
                isNew: false,
                rank: 3
            },
            {
                id: 16,
                title: "화산전생",
                author: "비가",
                category: "webnovel",
                genre: "action",
                rating: 4.8,
                episodes: 389,
                description: "화산파 대제자, 13도 매화검으로 강호를 평정하다",
                price: 3,
                waitFree: true,
                waitTime: "22:45:00",
                isFree: false,
                isNew: false,
                rank: 4
            },
            {
                id: 17,
                title: "무한의 마법사",
                author: "나는 엔피씨다",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.6,
                episodes: 678,
                description: "무한한 마나를 가진 마법사의 모험",
                price: 3,
                waitFree: true,
                waitTime: "04:55:00",
                isFree: false,
                isNew: false,
                rank: 5
            },
            {
                id: 18,
                title: "역대급 영지 설계사",
                author: "뭉둥바지",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.7,
                episodes: 234,
                description: "건축 지식으로 영지를 발전시키는 판타지",
                price: 3,
                waitFree: true,
                waitTime: "11:40:00",
                isFree: false,
                isNew: true,
                rank: 6
            },
            {
                id: 19,
                title: "백작가의 망나니가 되었다",
                author: "유려한",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.8,
                episodes: 345,
                description: "망나니로 빙의했지만 가문을 지킨다",
                price: 3,
                waitFree: true,
                waitTime: "19:25:00",
                isFree: false,
                isNew: false,
                rank: 7
            },
            {
                id: 20,
                title: "게임 속 바바리안으로 살아남기",
                author: "정서류",
                category: "webnovel",
                genre: "fantasy",
                rating: 4.7,
                episodes: 289,
                description: "야만인이 되어 게임 세계에서 살아남기",
                price: 3,
                waitFree: true,
                waitTime: "06:30:00",
                isFree: false,
                isNew: false,
                rank: 8
            },
            // Manga
            {
                id: 21,
                title: "나루토",
                author: "마사시 키시모토",
                category: "manga",
                genre: "action",
                rating: 4.9,
                episodes: 700,
                description: "닌자가 되려는 소년 나루토의 모험",
                price: 0,
                waitFree: false,
                isFree: true,
                isNew: false,
                rank: 1
            },
            {
                id: 22,
                title: "원피스",
                author: "오다 에이이치로",
                category: "manga",
                genre: "action",
                rating: 4.9,
                episodes: 1100,
                description: "해적왕을 꿈꾸는 루피의 대모험",
                price: 3,
                waitFree: true,
                waitTime: "13:20:00",
                isFree: false,
                isNew: false,
                rank: 2
            },
            {
                id: 23,
                title: "귀멸의 칼날",
                author: "고토게 코요하루",
                category: "manga",
                genre: "action",
                rating: 4.9,
                episodes: 205,
                description: "귀살대가 되어 귀를 물리치는 이야기",
                price: 3,
                waitFree: true,
                waitTime: "09:45:00",
                isFree: false,
                isNew: false,
                rank: 3
            },
            // Light Novels
            {
                id: 24,
                title: "소드 아트 온라인",
                author: "카와하라 레키",
                category: "novel",
                genre: "fantasy",
                rating: 4.8,
                episodes: 89,
                description: "가상현실 게임에 갇힌 플레이어들의 생존기",
                price: 3,
                waitFree: true,
                waitTime: "17:10:00",
                isFree: false,
                isNew: false,
                rank: 1
            },
            {
                id: 25,
                title: "Re: 제로부터 시작하는 이세계 생활",
                author: "나가츠키 탓페이",
                category: "novel",
                genre: "fantasy",
                rating: 4.9,
                episodes: 156,
                description: "죽으면 시간을 되돌리는 능력을 얻은 소년",
                price: 3,
                waitFree: true,
                waitTime: "21:35:00",
                isFree: false,
                isNew: false,
                rank: 2
            },
            {
                id: 26,
                title: "오버로드",
                author: "마루야마 쿠가네",
                category: "novel",
                genre: "fantasy",
                rating: 4.8,
                episodes: 134,
                description: "게임 세계에 남겨진 최강 마법사의 지배",
                price: 3,
                waitFree: true,
                waitTime: "02:20:00",
                isFree: false,
                isNew: false,
                rank: 3
            },
            {
                id: 27,
                title: "던전에서 만남을 추구하면 안 되는 걸까",
                author: "오모리 후지노",
                category: "novel",
                genre: "fantasy",
                rating: 4.7,
                episodes: 178,
                description: "던전 도시에서 펼쳐지는 모험 판타지",
                price: 3,
                waitFree: true,
                waitTime: "14:50:00",
                isFree: false,
                isNew: false,
                rank: 4
            },
            {
                id: 28,
                title: "이 멋진 세계에 축복을!",
                author: "나츠메 아카츠키",
                category: "novel",
                genre: "comedy",
                rating: 4.8,
                episodes: 167,
                description: "개그 넘치는 이세계 판타지 코미디",
                price: 3,
                waitFree: true,
                waitTime: "08:15:00",
                isFree: false,
                isNew: true,
                rank: 5
            }
        ];

        // State
        let currentCategory = 'webtoon';
        let currentGenre = 'all';
        let currentContent = null;
        let currentEpisode = 1;
        let coinBalance = 50;
        let library = JSON.parse(localStorage.getItem('kakaopage_library') || '[]');

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadContent();
            updateCoinDisplay();
        });

        // Filter by category
        function filterCategory(category) {
            currentCategory = category;
            currentGenre = 'all';

            // Update nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('tab-active');
                if (tab.dataset.category === category) {
                    tab.classList.add('tab-active');
                }
            });

            // Reset genre tabs
            document.querySelectorAll('.genre-tab').forEach(tab => {
                tab.classList.remove('genre-active');
                if (tab.dataset.genre === 'all') {
                    tab.classList.add('genre-active');
                }
            });

            loadContent();
        }

        // Filter by genre
        function filterGenre(genre) {
            currentGenre = genre;

            // Update genre tabs
            document.querySelectorAll('.genre-tab').forEach(tab => {
                tab.classList.remove('genre-active');
                if (tab.dataset.genre === genre) {
                    tab.classList.add('genre-active');
                }
            });

            loadContent();
        }

        // Load content
        function loadContent() {
            let filtered = contentDB.filter(item => item.category === currentCategory);

            if (currentGenre !== 'all') {
                filtered = filtered.filter(item => item.genre === currentGenre);
            }

            // Sort by rank
            filtered.sort((a, b) => (a.rank || 999) - (b.rank || 999));

            const grid = document.getElementById('contentGrid');
            grid.innerHTML = filtered.map(item => createContentCard(item)).join('');
        }

        // Create content card
        function createContentCard(item) {
            const gradient = `linear-gradient(135deg,
                ${item.genre === 'romance' ? '#ec4899, #f472b6' :
                  item.genre === 'fantasy' ? '#8b5cf6, #a78bfa' :
                  item.genre === 'action' ? '#ef4444, #f87171' :
                  item.genre === 'bl' ? '#6366f1, #818cf8' :
                  item.genre === 'drama' ? '#14b8a6, #2dd4bf' :
                  item.genre === 'thriller' ? '#1f2937, #4b5563' :
                  item.genre === 'comedy' ? '#f59e0b, #fbbf24' :
                  '#667eea, #764ba2'})`;

            return `
                <div class="content-card bg-white rounded-lg shadow overflow-hidden" onclick="showDetail(${item.id})">
                    <div class="relative">
                        ${item.rank && item.rank <= 20 ? `<div class="rank-badge ${item.rank <= 3 ? 'top3' : ''}">${item.rank}</div>` : ''}
                        <div class="cover-placeholder aspect-[3/4]" style="background: ${gradient}">
                            ${item.title}
                        </div>
                    </div>
                    <div class="p-3">
                        <div class="flex gap-1 mb-2 flex-wrap">
                            ${item.isFree ? '<span class="badge badge-free">무료</span>' : ''}
                            ${item.waitFree && !item.isFree ? '<span class="badge badge-wait">기다무</span>' : ''}
                            ${!item.isFree && !item.waitFree ? `<span class="badge badge-paid">${item.price}코인</span>` : ''}
                            ${item.isNew ? '<span class="badge badge-new">NEW</span>' : ''}
                            ${item.rank && item.rank <= 10 ? '<span class="badge badge-up">UP</span>' : ''}
                        </div>
                        <h3 class="font-bold text-sm mb-1 truncate">${item.title}</h3>
                        <p class="text-xs text-gray-500 mb-1">${item.author}</p>
                        <div class="flex items-center justify-between text-xs">
                            <div class="star-rating text-xs">
                                ${'★'.repeat(Math.floor(item.rating))}${item.rating % 1 ? '☆' : ''} ${item.rating}
                            </div>
                            <span class="text-gray-500">${item.episodes}화</span>
                        </div>
                        ${item.waitFree && !item.isFree ? `
                            <div class="mt-2">
                                <div class="timer-badge text-xs">
                                    <i class="far fa-clock"></i>
                                    <span class="timer" data-time="${item.waitTime}">${item.waitTime}</span>
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }

        // Show detail modal
        function showDetail(id) {
            currentContent = contentDB.find(item => item.id === id);
            if (!currentContent) return;

            const modal = document.getElementById('detailModal');

            const gradient = `linear-gradient(135deg,
                ${currentContent.genre === 'romance' ? '#ec4899, #f472b6' :
                  currentContent.genre === 'fantasy' ? '#8b5cf6, #a78bfa' :
                  currentContent.genre === 'action' ? '#ef4444, #f87171' :
                  currentContent.genre === 'bl' ? '#6366f1, #818cf8' :
                  currentContent.genre === 'drama' ? '#14b8a6, #2dd4bf' :
                  currentContent.genre === 'thriller' ? '#1f2937, #4b5563' :
                  currentContent.genre === 'comedy' ? '#f59e0b, #fbbf24' :
                  '#667eea, #764ba2'})`;

            document.getElementById('detailTitle').textContent = currentContent.title;
            document.getElementById('detailCover').innerHTML = `
                <div class="cover-placeholder h-full" style="background: ${gradient}">
                    ${currentContent.title}
                </div>
            `;

            document.getElementById('detailBadges').innerHTML = `
                ${currentContent.isFree ? '<span class="badge badge-free">무료</span>' : ''}
                ${currentContent.waitFree && !currentContent.isFree ? '<span class="badge badge-wait">기다리면 무료</span>' : ''}
                ${!currentContent.isFree && !currentContent.waitFree ? `<span class="badge badge-paid">${currentContent.price}코인</span>` : ''}
                ${currentContent.isNew ? '<span class="badge badge-new">NEW</span>' : ''}
            `;

            document.getElementById('detailRating').innerHTML = '★'.repeat(Math.floor(currentContent.rating)) +
                (currentContent.rating % 1 ? '☆' : '');
            document.getElementById('detailRatingText').textContent = `${currentContent.rating} (리뷰 ${Math.floor(Math.random() * 10000 + 1000)}개)`;
            document.getElementById('detailAuthor').textContent = currentContent.author;
            document.getElementById('detailDescription').textContent = currentContent.description;

            if (currentContent.waitFree && !currentContent.isFree) {
                document.getElementById('detailTimer').innerHTML = `
                    <div class="p-4 bg-blue-50 rounded-lg">
                        <div class="flex items-center gap-2 text-blue-600">
                            <i class="far fa-clock"></i>
                            <span class="font-bold">다음 무료 회차까지:</span>
                            <span class="timer font-bold" data-time="${currentContent.waitTime}">${currentContent.waitTime}</span>
                        </div>
                    </div>
                `;
            } else {
                document.getElementById('detailTimer').innerHTML = '';
            }

            // Load episodes
            loadEpisodes();

            // Load comments
            loadComments();

            modal.classList.add('active');
            startTimers();
        }

        function closeDetailModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        // Load episodes
        function loadEpisodes() {
            const episodesList = document.getElementById('episodesList');
            let html = '';

            for (let i = 1; i <= Math.min(currentContent.episodes, 50); i++) {
                const isFree = i <= 3 || currentContent.isFree;
                const price = isFree ? 0 : currentContent.price;

                html += `
                    <div class="flex items-center justify-between p-3 border rounded hover:bg-gray-50 cursor-pointer" onclick="readEpisode(${i})">
                        <div class="flex-1">
                            <div class="font-bold">${i}화. ${currentContent.title} - ${i}화</div>
                            <div class="text-sm text-gray-500">${new Date(Date.now() - i * 86400000).toLocaleDateString('ko-KR')}</div>
                        </div>
                        <div class="flex items-center gap-2">
                            ${isFree ?
                                '<span class="badge badge-free">무료</span>' :
                                currentContent.waitFree ?
                                    '<span class="badge badge-wait">기다무</span>' :
                                    `<span class="badge badge-paid">${price}코인</span>`
                            }
                        </div>
                    </div>
                `;
            }

            if (currentContent.episodes > 50) {
                html += `
                    <div class="text-center py-4 text-gray-500">
                        ... 외 ${currentContent.episodes - 50}화
                    </div>
                `;
            }

            episodesList.innerHTML = html;
        }

        // Load comments
        function loadComments() {
            const comments = [
                { user: "독자123", text: "완전 재밌어요! 매일 기다려집니다", time: "1시간 전", likes: 245 },
                { user: "웹툰러버", text: "이번화 진짜 대박이네요ㅠㅠ", time: "3시간 전", likes: 189 },
                { user: "팬심가득", text: "작가님 항상 감사합니다!", time: "5시간 전", likes: 156 },
                { user: "매일봐요", text: "다음화 언제 나와요? 너무 궁금해요", time: "1일 전", likes: 234 },
                { user: "감동받음", text: "이 장면 진짜 울컥했어요...", time: "1일 전", likes: 198 }
            ];

            document.getElementById('commentCount').textContent = `(${comments.length + Math.floor(Math.random() * 500)})`;

            const commentsList = document.getElementById('commentsList');
            commentsList.innerHTML = comments.map(comment => `
                <div class="border-b pb-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center">
                                <i class="fas fa-user text-gray-600 text-xs"></i>
                            </div>
                            <div>
                                <div class="font-bold text-sm">${comment.user}</div>
                                <div class="text-xs text-gray-500">${comment.time}</div>
                            </div>
                        </div>
                        <button class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                    </div>
                    <p class="text-gray-700 mb-2">${comment.text}</p>
                    <div class="flex items-center gap-4">
                        <button class="text-sm text-gray-500 hover:text-gray-700">
                            <i class="far fa-thumbs-up"></i> ${comment.likes}
                        </button>
                        <button class="text-sm text-gray-500 hover:text-gray-700">
                            <i class="far fa-comment"></i> 답글
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Add comment
        function addComment() {
            const input = document.getElementById('commentInput');
            const text = input.value.trim();

            if (!text) {
                alert('댓글을 입력해주세요.');
                return;
            }

            alert('댓글이 작성되었습니다!');
            input.value = '';
            loadComments();
        }

        // Read episode
        function readEpisode(episode) {
            currentEpisode = episode;

            const isFree = episode <= 3 || currentContent.isFree;
            const price = isFree ? 0 : currentContent.price;

            if (!isFree && !currentContent.waitFree) {
                if (coinBalance < price) {
                    if (confirm(`코인이 부족합니다. ${price}코인이 필요합니다.\n코인을 충전하시겠습니까?`)) {
                        showCoinModal();
                    }
                    return;
                }

                if (confirm(`${price}코인을 사용하여 ${episode}화를 보시겠습니까?`)) {
                    coinBalance -= price;
                    updateCoinDisplay();
                    startReading();
                }
            } else if (currentContent.waitFree && !isFree) {
                if (confirm('기다리면 무료로 볼 수 있습니다.\n코인을 사용하여 바로 보시겠습니까?')) {
                    if (coinBalance < price) {
                        showCoinModal();
                        return;
                    }
                    coinBalance -= price;
                    updateCoinDisplay();
                    startReading();
                }
            } else {
                startReading();
            }
        }

        // Start reading
        function startReading() {
            closeDetailModal();

            document.getElementById('readingTitle').textContent = currentContent.title;
            document.getElementById('readingEpisode').textContent = `${currentEpisode}화`;

            const content = document.getElementById('readingContent');

            if (currentContent.category === 'webtoon' || currentContent.category === 'manga') {
                // Webtoon/Manga style - vertical images
                content.innerHTML = `
                    <div class="max-w-2xl mx-auto space-y-1">
                        ${Array(15).fill(0).map((_, i) => `
                            <div class="bg-gray-800 aspect-[3/4] flex items-center justify-center text-gray-600">
                                컷 ${i + 1}
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                // Novel style - text
                const sampleText = `
                    <div class="max-w-2xl mx-auto">
                        <h2 class="text-2xl font-bold mb-6">${currentContent.title} - ${currentEpisode}화</h2>
                        <div class="space-y-4 text-gray-300 leading-relaxed">
                            <p>이것은 샘플 텍스트입니다. 실제 소설 내용이 이 위치에 표시됩니다.</p>
                            <p>캐릭터들의 대화와 행동, 그리고 다양한 장면 묘사가 펼쳐집니다.</p>
                            <p>독자들은 스크롤을 내리며 이야기에 몰입할 수 있습니다.</p>
                            ${Array(20).fill(0).map(() => `
                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>
                            `).join('')}
                        </div>
                    </div>
                `;
                content.innerHTML = sampleText;
            }

            document.getElementById('readingModal').classList.add('active');
        }

        function closeReadingModal() {
            document.getElementById('readingModal').classList.remove('active');
        }

        function previousEpisode() {
            if (currentEpisode > 1) {
                readEpisode(currentEpisode - 1);
            } else {
                alert('첫 번째 화입니다.');
            }
        }

        function nextEpisode() {
            if (currentEpisode < currentContent.episodes) {
                readEpisode(currentEpisode + 1);
            } else {
                alert('마지막 화입니다.');
            }
        }

        // Coin management
        function showCoinModal() {
            document.getElementById('coinModal').classList.add('active');
            document.getElementById('modalCoinBalance').textContent = coinBalance;
        }

        function closeCoinModal() {
            document.getElementById('coinModal').classList.remove('active');
        }

        function purchaseCoins(amount, price) {
            const bonus = amount === 10 ? 2 : amount === 50 ? 15 : amount === 100 ? 35 : amount === 300 ? 150 : 0;

            if (confirm(`${price.toLocaleString()}원으로 ${amount}코인(+보너스 ${bonus}코인)을 충전하시겠습니까?`)) {
                coinBalance += amount + bonus;
                updateCoinDisplay();
                alert(`충전 완료! ${amount + bonus}코인이 추가되었습니다.`);
                closeCoinModal();
            }
        }

        function updateCoinDisplay() {
            document.getElementById('coinBalance').textContent = coinBalance;
            const modalBalance = document.getElementById('modalCoinBalance');
            if (modalBalance) {
                modalBalance.textContent = coinBalance;
            }
            localStorage.setItem('kakaopage_coins', coinBalance);
        }

        // Library management
        function addToLibrary() {
            if (!currentContent) return;

            if (!library.includes(currentContent.id)) {
                library.push(currentContent.id);
                localStorage.setItem('kakaopage_library', JSON.stringify(library));
                alert('보관함에 추가되었습니다!');
            } else {
                alert('이미 보관함에 있습니다.');
            }
        }

        function showLibrary() {
            const modal = document.getElementById('libraryModal');
            const content = document.getElementById('libraryContent');
            const empty = document.getElementById('emptyLibrary');

            if (library.length === 0) {
                content.classList.add('hidden');
                empty.classList.remove('hidden');
            } else {
                empty.classList.add('hidden');
                content.classList.remove('hidden');

                const libraryItems = contentDB.filter(item => library.includes(item.id));
                content.innerHTML = libraryItems.map(item => createContentCard(item)).join('');
            }

            modal.classList.add('active');
        }

        function closeLibraryModal() {
            document.getElementById('libraryModal').classList.remove('active');
        }

        // Timer countdown
        function startTimers() {
            const timers = document.querySelectorAll('.timer');

            timers.forEach(timer => {
                const timeStr = timer.dataset.time;
                if (!timeStr) return;

                const [hours, minutes, seconds] = timeStr.split(':').map(Number);
                let totalSeconds = hours * 3600 + minutes * 60 + seconds;

                const interval = setInterval(() => {
                    if (totalSeconds <= 0) {
                        clearInterval(interval);
                        timer.textContent = '무료!';
                        timer.parentElement.classList.remove('timer-badge');
                        timer.parentElement.classList.add('badge-free');
                        return;
                    }

                    totalSeconds--;
                    const h = Math.floor(totalSeconds / 3600);
                    const m = Math.floor((totalSeconds % 3600) / 60);
                    const s = totalSeconds % 60;

                    timer.textContent = `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
                }, 1000);
            });
        }

        function showHome() {
            currentCategory = 'webtoon';
            currentGenre = 'all';
            filterCategory('webtoon');
        }

        // Load saved data
        const savedCoins = localStorage.getItem('kakaopage_coins');
        if (savedCoins) {
            coinBalance = parseInt(savedCoins);
        }

        // Start timers on page load
        setTimeout(startTimers, 100);
    </script>
</body>
</html>