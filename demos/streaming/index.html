<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-KON 스트리밍 - 실시간 방송 플랫폼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
        }
        .live-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .7; }
        }
        .chat-message {
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .stream-card:hover {
            transform: translateY(-4px);
            transition: all 0.3s ease;
        }
        .viewer-count-update {
            animation: bounce 0.5s ease;
        }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .emote {
            display: inline-block;
            width: 28px;
            height: 28px;
            background-size: contain;
            vertical-align: middle;
        }
        .theater-mode {
            width: 100% !important;
            max-width: 100% !important;
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="min-h-screen text-white">
    <!-- Navigation -->
    <nav class="bg-gray-900/95 backdrop-blur-sm shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-6">
                    <h1 class="text-2xl font-bold gradient-text cursor-pointer" onclick="showHomePage()">
                        <i class="fas fa-play-circle"></i> AI-KON
                    </h1>
                    <div class="hidden md:flex space-x-4">
                        <button onclick="filterByCategory('all')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">전체</button>
                        <button onclick="filterByCategory('게임')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">게임</button>
                        <button onclick="filterByCategory('토크쇼')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">토크쇼</button>
                        <button onclick="filterByCategory('음악')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">음악</button>
                        <button onclick="filterByCategory('요리')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">요리</button>
                        <button onclick="filterByCategory('스포츠')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">스포츠</button>
                        <button onclick="filterByCategory('교육')" class="px-4 py-2 rounded-lg hover:bg-purple-600 transition">교육</button>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="스트리머 검색..."
                            class="bg-gray-800 text-white px-4 py-2 rounded-lg pl-10 focus:outline-none focus:ring-2 focus:ring-purple-500"
                            onkeyup="searchStreams()">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <button onclick="showFollowedStreams()" class="px-4 py-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition">
                        <i class="fas fa-heart"></i> 팔로우
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div id="mainContent" class="max-w-7xl mx-auto px-4 py-8">
        <!-- Filters -->
        <div class="bg-gray-900/80 backdrop-blur-sm rounded-xl p-4 mb-6 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <label class="text-gray-300">정렬:</label>
                <select id="sortSelect" onchange="sortStreams()" class="bg-gray-800 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="viewers">시청자 순</option>
                    <option value="recent">최신 순</option>
                </select>
                <label class="text-gray-300 ml-6">언어:</label>
                <select id="languageSelect" onchange="filterByLanguage()" class="bg-gray-800 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <option value="all">전체</option>
                    <option value="한국어">한국어</option>
                    <option value="English">English</option>
                    <option value="日本語">日本語</option>
                </select>
            </div>
            <div class="text-gray-400">
                <i class="fas fa-circle text-red-500 live-pulse"></i> <span id="liveCount">15</span>개 라이브 방송
            </div>
        </div>

        <!-- Stream Grid -->
        <div id="streamGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Streams will be dynamically inserted here -->
        </div>
    </div>

    <!-- Stream Player Page (Hidden by default) -->
    <div id="streamPlayer" class="hidden">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex gap-6">
                <!-- Video Player -->
                <div id="videoContainer" class="flex-1">
                    <div class="bg-black rounded-lg overflow-hidden">
                        <div class="relative aspect-video bg-gradient-to-br from-purple-900 to-pink-900 flex items-center justify-center">
                            <div class="text-center">
                                <i class="fas fa-play-circle text-8xl mb-4 opacity-50"></i>
                                <p class="text-xl">라이브 스트림 재생 중...</p>
                            </div>
                            <!-- Live Badge -->
                            <div class="absolute top-4 left-4 bg-red-600 px-3 py-1 rounded-full font-bold text-sm flex items-center live-pulse">
                                <i class="fas fa-circle mr-2"></i> LIVE
                            </div>
                            <!-- Viewer Count -->
                            <div class="absolute top-4 right-4 bg-black/70 px-3 py-1 rounded-full text-sm">
                                <i class="fas fa-eye mr-2"></i> <span id="playerViewerCount">0</span>
                            </div>
                            <!-- Theater Mode Button -->
                            <button onclick="toggleTheaterMode()" class="absolute bottom-4 right-4 bg-black/70 px-3 py-2 rounded-lg hover:bg-black/90 transition">
                                <i class="fas fa-expand"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Video Controls -->
                    <div class="bg-gray-900/90 backdrop-blur-sm rounded-lg p-4 mt-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <button class="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                                <select class="bg-gray-800 text-white px-3 py-2 rounded-lg focus:outline-none">
                                    <option>화질: 1080p</option>
                                    <option>화질: 720p</option>
                                    <option>화질: 480p</option>
                                    <option>화질: 360p</option>
                                    <option>화질: Auto</option>
                                </select>
                            </div>
                            <button onclick="toggleTheaterMode()" class="px-4 py-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition">
                                <i class="fas fa-desktop"></i> 극장 모드
                            </button>
                        </div>
                    </div>

                    <!-- Stream Info -->
                    <div class="bg-gray-900/90 backdrop-blur-sm rounded-lg p-6 mt-4">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-4">
                                <img id="playerAvatar" src="" alt="" class="w-16 h-16 rounded-full">
                                <div>
                                    <h2 id="playerStreamTitle" class="text-2xl font-bold mb-2"></h2>
                                    <p id="playerStreamerName" class="text-purple-400 text-lg"></p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button id="followBtn" onclick="toggleFollow()" class="px-6 py-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition font-bold">
                                    <i class="fas fa-heart"></i> 팔로우
                                </button>
                                <button onclick="showSubscribeModal()" class="px-6 py-2 bg-pink-600 rounded-lg hover:bg-pink-700 transition font-bold">
                                    <i class="fas fa-star"></i> 구독
                                </button>
                                <button onclick="showDonationModal()" class="px-6 py-2 bg-yellow-500 rounded-lg hover:bg-yellow-600 transition font-bold">
                                    <i class="fas fa-gift"></i> 후원
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4 text-gray-400 mb-4">
                            <span id="playerCategory" class="bg-purple-900/50 px-3 py-1 rounded-full"></span>
                            <span><i class="fas fa-users"></i> 팔로워: <span id="playerFollowers">0</span>명</span>
                            <span id="playerLanguage"></span>
                        </div>
                        <div id="playerTags" class="flex flex-wrap gap-2 mb-4">
                            <!-- Tags will be inserted here -->
                        </div>
                        <p id="playerDescription" class="text-gray-300 leading-relaxed"></p>
                    </div>

                    <!-- Tabs -->
                    <div class="bg-gray-900/90 backdrop-blur-sm rounded-lg p-6 mt-4">
                        <div class="flex space-x-6 border-b border-gray-700 mb-6">
                            <button onclick="showTab('vods')" class="pb-3 px-2 border-b-2 border-purple-500 text-purple-400 font-bold">
                                <i class="fas fa-video"></i> 다시보기
                            </button>
                            <button onclick="showTab('clips')" class="pb-3 px-2 border-b-2 border-transparent hover:text-purple-400 transition">
                                <i class="fas fa-film"></i> 클립
                            </button>
                            <button onclick="showTab('about')" class="pb-3 px-2 border-b-2 border-transparent hover:text-purple-400 transition">
                                <i class="fas fa-info-circle"></i> 소개
                            </button>
                        </div>

                        <!-- VODs Tab -->
                        <div id="vodsTab" class="grid grid-cols-3 gap-4">
                            <!-- VODs will be inserted here -->
                        </div>

                        <!-- Clips Tab -->
                        <div id="clipsTab" class="hidden grid grid-cols-3 gap-4">
                            <!-- Clips will be inserted here -->
                        </div>

                        <!-- About Tab -->
                        <div id="aboutTab" class="hidden">
                            <div id="aboutContent">
                                <!-- About content will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chat Panel -->
                <div class="w-96 bg-gray-900/90 backdrop-blur-sm rounded-lg flex flex-col" style="height: calc(100vh - 8rem);">
                    <div class="p-4 border-b border-gray-700">
                        <h3 class="font-bold text-lg">실시간 채팅</h3>
                        <p class="text-sm text-gray-400">채팅 참여자: <span id="chatUserCount">247</span>명</p>
                    </div>
                    <div id="chatMessages" class="flex-1 overflow-y-auto p-4 space-y-3 scrollbar-hide">
                        <!-- Chat messages will be inserted here -->
                    </div>
                    <div class="p-4 border-t border-gray-700">
                        <div class="flex space-x-2 mb-2">
                            <button onclick="insertEmote('😀')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 transition">😀</button>
                            <button onclick="insertEmote('😂')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 transition">😂</button>
                            <button onclick="insertEmote('❤️')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 transition">❤️</button>
                            <button onclick="insertEmote('👏')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 transition">👏</button>
                            <button onclick="insertEmote('🎮')" class="px-2 py-1 bg-gray-800 rounded hover:bg-gray-700 transition">🎮</button>
                        </div>
                        <div class="flex space-x-2">
                            <input type="text" id="chatInput" placeholder="채팅 메시지를 입력하세요..."
                                class="flex-1 bg-gray-800 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
                                onkeypress="if(event.key==='Enter') sendChat()">
                            <button onclick="sendChat()" class="px-6 py-2 bg-purple-600 rounded-lg hover:bg-purple-700 transition">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommended Streams -->
            <div class="mt-8">
                <h3 class="text-2xl font-bold mb-4">추천 방송</h3>
                <div id="recommendedStreams" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <!-- Recommended streams will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center">
        <div class="bg-gray-900 rounded-xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">후원하기</h3>
                <button onclick="closeDonationModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div class="grid grid-cols-3 gap-3">
                    <button onclick="selectDonation(1000)" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-bold transition">1,000원</button>
                    <button onclick="selectDonation(5000)" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-bold transition">5,000원</button>
                    <button onclick="selectDonation(10000)" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-bold transition">10,000원</button>
                    <button onclick="selectDonation(30000)" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-bold transition">30,000원</button>
                    <button onclick="selectDonation(50000)" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-bold transition">50,000원</button>
                    <button onclick="selectDonation(100000)" class="bg-purple-600 hover:bg-purple-700 py-3 rounded-lg font-bold transition">100,000원</button>
                </div>
                <input type="number" id="customDonation" placeholder="직접 입력" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
                <textarea id="donationMessage" placeholder="후원 메시지 (선택사항)" rows="3" class="w-full bg-gray-800 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"></textarea>
                <button onclick="processDonation()" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 py-3 rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition">
                    <i class="fas fa-gift mr-2"></i> 후원하기
                </button>
            </div>
        </div>
    </div>

    <!-- Subscribe Modal -->
    <div id="subscribeModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center">
        <div class="bg-gray-900 rounded-xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">구독하기</h3>
                <button onclick="closeSubscribeModal()" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            <div class="space-y-4">
                <div class="bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-lg">
                    <h4 class="text-xl font-bold mb-2">프리미엄 구독</h4>
                    <p class="text-3xl font-bold mb-2">₩4,900 <span class="text-sm font-normal">/ 월</span></p>
                    <ul class="space-y-2 text-sm">
                        <li><i class="fas fa-check mr-2"></i> 광고 없음</li>
                        <li><i class="fas fa-check mr-2"></i> 전용 이모티콘</li>
                        <li><i class="fas fa-check mr-2"></i> 구독자 배지</li>
                        <li><i class="fas fa-check mr-2"></i> 채팅 우선권</li>
                        <li><i class="fas fa-check mr-2"></i> VOD 다운로드</li>
                    </ul>
                </div>
                <button onclick="processSubscription()" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 py-3 rounded-lg font-bold hover:from-purple-700 hover:to-pink-700 transition">
                    <i class="fas fa-star mr-2"></i> 구독하기
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="hidden fixed top-20 right-4 bg-gray-900 border-l-4 border-purple-500 rounded-lg shadow-2xl p-4 max-w-sm z-50">
        <div class="flex items-center space-x-3">
            <i class="fas fa-bell text-purple-400 text-xl"></i>
            <div>
                <p class="font-bold" id="toastTitle"></p>
                <p class="text-sm text-gray-400" id="toastMessage"></p>
            </div>
        </div>
    </div>

    <script>
        // Sample Stream Data
        const streams = [
            {
                id: 1,
                title: "롤 마스터 도전! 다이아 승급전",
                streamer: "프로게이머김",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=pro1",
                category: "게임",
                game: "리그 오브 레전드",
                viewers: 12543,
                thumbnail: "https://via.placeholder.com/320x180/9333ea/ffffff?text=LOL+Stream",
                followers: 45200,
                language: "한국어",
                tags: ["LOL", "랭크게임", "다이아", "승급전"],
                description: "다이아 승급을 위한 열정적인 플레이! 함께 응원해주세요 🎮"
            },
            {
                id: 2,
                title: "발로란트 레디언트 랭크 도전",
                streamer: "FPS여왕",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=fps1",
                category: "게임",
                game: "Valorant",
                viewers: 8234,
                thumbnail: "https://via.placeholder.com/320x180/dc2626/ffffff?text=Valorant",
                followers: 32100,
                language: "한국어",
                tags: ["발로란트", "FPS", "레디언트", "팀플레이"],
                description: "레디언트 랭크를 향한 여정! 최고의 에임과 전략으로 승리하겠습니다 🎯"
            },
            {
                id: 3,
                title: "마인크래프트 서바이벌 시즌5",
                streamer: "크래프터준",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=craft1",
                category: "게임",
                game: "Minecraft",
                viewers: 15789,
                thumbnail: "https://via.placeholder.com/320x180/059669/ffffff?text=Minecraft",
                followers: 67800,
                language: "한국어",
                tags: ["마인크래프트", "서바이벌", "건축", "모험"],
                description: "새로운 시즌 시작! 엔더 드래곤 토벌 프로젝트 진행 중 ⛏️"
            },
            {
                id: 4,
                title: "일상 토크 + 시청자와 소통",
                streamer: "토크의여왕",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=talk1",
                category: "토크쇼",
                game: "Just Chatting",
                viewers: 5621,
                thumbnail: "https://via.placeholder.com/320x180/ec4899/ffffff?text=Just+Chatting",
                followers: 28400,
                language: "한국어",
                tags: ["잡담", "소통", "힐링", "ASMR"],
                description: "편안한 수다와 힐링 방송 💬 고민 상담도 환영합니다!"
            },
            {
                id: 5,
                title: "신곡 커버 + 라이브 공연",
                streamer: "가수민지",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=music1",
                category: "음악",
                game: "음악 방송",
                viewers: 9876,
                thumbnail: "https://via.placeholder.com/320x180/f59e0b/ffffff?text=Music+Live",
                followers: 52300,
                language: "한국어",
                tags: ["노래", "커버", "라이브", "음악"],
                description: "매주 금요일 라이브 공연! 신청곡 받습니다 🎤🎵"
            },
            {
                id: 6,
                title: "오늘의 요리: 감바스 알 아히요",
                streamer: "셰프요리왕",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=chef1",
                category: "요리",
                game: "쿠킹 클래스",
                viewers: 4532,
                thumbnail: "https://via.placeholder.com/320x180/10b981/ffffff?text=Cooking+Show",
                followers: 19800,
                language: "한국어",
                tags: ["요리", "레시피", "맛집", "쿠킹"],
                description: "집에서 쉽게 만드는 스페인 요리! 레시피는 채팅에 🍳"
            },
            {
                id: 7,
                title: "프리미어리그 중계 & 해설",
                streamer: "축구박사",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=sport1",
                category: "스포츠",
                game: "축구 중계",
                viewers: 11234,
                thumbnail: "https://via.placeholder.com/320x180/3b82f6/ffffff?text=Soccer+Live",
                followers: 41200,
                language: "한국어",
                tags: ["축구", "프리미어리그", "해설", "스포츠"],
                description: "열정적인 해설과 함께하는 프리미어리그 중계! ⚽"
            },
            {
                id: 8,
                title: "Python 프로그래밍 입문",
                streamer: "코딩선생",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=edu1",
                category: "교육",
                game: "프로그래밍",
                viewers: 3421,
                thumbnail: "https://via.placeholder.com/320x180/8b5cf6/ffffff?text=Python+Class",
                followers: 15600,
                language: "한국어",
                tags: ["프로그래밍", "Python", "코딩", "교육"],
                description: "초보자를 위한 파이썬 강의! 질문은 언제나 환영 💻"
            },
            {
                id: 9,
                title: "배틀그라운드 치킨 먹방",
                streamer: "배그마스터",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=pubg1",
                category: "게임",
                game: "PUBG",
                viewers: 6789,
                thumbnail: "https://via.placeholder.com/320x180/eab308/ffffff?text=PUBG+Battle",
                followers: 34500,
                language: "한국어",
                tags: ["배그", "배틀로얄", "FPS", "솔로"],
                description: "솔로 스쿼드 도전! 오늘도 치킨을 향해 🍗"
            },
            {
                id: 10,
                title: "오버워치2 경쟁전 그마 도전",
                streamer: "탱커의신",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=ow1",
                category: "게임",
                game: "Overwatch 2",
                viewers: 7654,
                thumbnail: "https://via.placeholder.com/320x180/f97316/ffffff?text=Overwatch+2",
                followers: 29300,
                language: "한국어",
                tags: ["오버워치", "경쟁전", "그랜드마스터", "탱커"],
                description: "그랜드마스터 달성까지! 탱커 장인의 플레이 🛡️"
            },
            {
                id: 11,
                title: "심야 감성 토크쇼",
                streamer: "밤토크",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=night1",
                category: "토크쇼",
                game: "Late Night Talk",
                viewers: 4123,
                thumbnail: "https://via.placeholder.com/320x180/6366f1/ffffff?text=Night+Talk",
                followers: 21700,
                language: "한국어",
                tags: ["심야방송", "감성", "토크", "힐링"],
                description: "잠 못 이루는 밤, 함께 이야기해요 🌙"
            },
            {
                id: 12,
                title: "기타 연주 & 즉흥 작곡",
                streamer: "기타리스트",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=guitar1",
                category: "음악",
                game: "기타 연주",
                viewers: 3876,
                thumbnail: "https://via.placeholder.com/320x180/db2777/ffffff?text=Guitar+Live",
                followers: 18900,
                language: "한국어",
                tags: ["기타", "연주", "작곡", "음악"],
                description: "감성 가득한 기타 연주 🎸 신청곡 받아요!"
            },
            {
                id: 13,
                title: "홈 카페 만들기 - 라떼아트",
                streamer: "바리스타카페",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=cafe1",
                category: "요리",
                game: "카페 클래스",
                viewers: 2987,
                thumbnail: "https://via.placeholder.com/320x180/78716c/ffffff?text=Cafe+Class",
                followers: 12400,
                language: "한국어",
                tags: ["커피", "라떼아트", "바리스타", "카페"],
                description: "집에서 즐기는 카페 퀄리티! 라떼아트 강의 ☕"
            },
            {
                id: 14,
                title: "NBA 경기 분석 & 리뷰",
                streamer: "농구전문가",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=nba1",
                category: "스포츠",
                game: "NBA",
                viewers: 5432,
                thumbnail: "https://via.placeholder.com/320x180/ea580c/ffffff?text=NBA+Analysis",
                followers: 27800,
                language: "한국어",
                tags: ["NBA", "농구", "분석", "스포츠"],
                description: "NBA 최신 경기 분석과 하이라이트 🏀"
            },
            {
                id: 15,
                title: "웹 개발 풀스택 강의",
                streamer: "개발자이준",
                avatar: "https://api.dicebear.com/7.x/avataaars/svg?seed=dev1",
                category: "교육",
                game: "웹 개발",
                viewers: 4567,
                thumbnail: "https://via.placeholder.com/320x180/0891b2/ffffff?text=Web+Dev",
                followers: 22100,
                language: "한국어",
                tags: ["웹개발", "풀스택", "JavaScript", "React"],
                description: "실전 프로젝트로 배우는 웹 개발! 💻🚀"
            }
        ];

        let currentStreamId = null;
        let isTheaterMode = false;
        let followedChannels = JSON.parse(localStorage.getItem('followedChannels') || '[]');
        let chatInterval = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderStreams(streams);
            updateLiveCount();
        });

        // Render Streams
        function renderStreams(streamList) {
            const grid = document.getElementById('streamGrid');
            grid.innerHTML = '';

            streamList.forEach(stream => {
                const card = document.createElement('div');
                card.className = 'stream-card bg-gray-900/80 backdrop-blur-sm rounded-xl overflow-hidden cursor-pointer shadow-lg';
                card.onclick = () => openStream(stream.id);

                card.innerHTML = `
                    <div class="relative">
                        <img src="${stream.thumbnail}" alt="${stream.title}" class="w-full aspect-video object-cover">
                        <div class="absolute top-2 left-2 bg-red-600 px-2 py-1 rounded text-xs font-bold flex items-center live-pulse">
                            <i class="fas fa-circle mr-1"></i> LIVE
                        </div>
                        <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-xs font-bold">
                            <i class="fas fa-eye mr-1"></i> ${formatViewers(stream.viewers)}
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex items-start space-x-3">
                            <img src="${stream.avatar}" alt="${stream.streamer}" class="w-10 h-10 rounded-full">
                            <div class="flex-1 min-w-0">
                                <h3 class="font-bold text-sm mb-1 truncate">${stream.title}</h3>
                                <p class="text-gray-400 text-xs mb-1">${stream.streamer}</p>
                                <p class="text-gray-500 text-xs">${stream.game}</p>
                            </div>
                        </div>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        // Open Stream Player
        function openStream(streamId) {
            currentStreamId = streamId;
            const stream = streams.find(s => s.id === streamId);
            if (!stream) return;

            // Hide main content, show player
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('streamPlayer').classList.remove('hidden');

            // Update player info
            document.getElementById('playerAvatar').src = stream.avatar;
            document.getElementById('playerStreamTitle').textContent = stream.title;
            document.getElementById('playerStreamerName').textContent = stream.streamer;
            document.getElementById('playerCategory').textContent = stream.game;
            document.getElementById('playerFollowers').textContent = stream.followers.toLocaleString();
            document.getElementById('playerLanguage').textContent = stream.language;
            document.getElementById('playerDescription').textContent = stream.description;
            document.getElementById('playerViewerCount').textContent = formatViewers(stream.viewers);

            // Update follow button
            const followBtn = document.getElementById('followBtn');
            if (followedChannels.includes(streamId)) {
                followBtn.innerHTML = '<i class="fas fa-heart"></i> 팔로잉';
                followBtn.classList.add('bg-pink-600');
                followBtn.classList.remove('bg-purple-600');
            } else {
                followBtn.innerHTML = '<i class="fas fa-heart"></i> 팔로우';
                followBtn.classList.remove('bg-pink-600');
                followBtn.classList.add('bg-purple-600');
            }

            // Render tags
            const tagsContainer = document.getElementById('playerTags');
            tagsContainer.innerHTML = stream.tags.map(tag =>
                `<span class="bg-gray-800 px-3 py-1 rounded-full text-xs">${tag}</span>`
            ).join('');

            // Load VODs
            loadVODs(stream);

            // Load Clips
            loadClips(stream);

            // Load About
            loadAbout(stream);

            // Start chat simulation
            startChatSimulation();

            // Update viewer count periodically
            startViewerCountUpdate(stream);

            // Load recommended streams
            loadRecommendedStreams(streamId);

            // Scroll to top
            window.scrollTo(0, 0);
        }

        // Show Home Page
        function showHomePage() {
            document.getElementById('mainContent').classList.remove('hidden');
            document.getElementById('streamPlayer').classList.add('hidden');
            currentStreamId = null;
            stopChatSimulation();
        }

        // Load VODs
        function loadVODs(stream) {
            const vodsTab = document.getElementById('vodsTab');
            const vods = [
                { title: '어제 방송 하이라이트', views: 12500, duration: '3:24:15', date: '1일 전' },
                { title: '레전드 플레이 모음', views: 8900, duration: '2:15:32', date: '3일 전' },
                { title: '시청자와 함께한 특별방송', views: 15600, duration: '4:02:45', date: '5일 전' },
                { title: '월간 베스트 클립', views: 23400, duration: '1:45:20', date: '1주 전' },
                { title: '초보자 가이드', views: 6700, duration: '2:30:18', date: '2주 전' },
                { title: '팬과의 Q&A 시간', views: 9800, duration: '1:52:33', date: '2주 전' }
            ];

            vodsTab.innerHTML = vods.map(vod => `
                <div class="bg-gray-800 rounded-lg overflow-hidden cursor-pointer hover:bg-gray-700 transition">
                    <div class="relative">
                        <div class="w-full aspect-video bg-gradient-to-br from-purple-900 to-pink-900 flex items-center justify-center">
                            <i class="fas fa-play-circle text-4xl opacity-50"></i>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-bold">
                            ${vod.duration}
                        </div>
                    </div>
                    <div class="p-3">
                        <h4 class="font-bold text-sm mb-1 truncate">${vod.title}</h4>
                        <p class="text-gray-400 text-xs">${formatViewers(vod.views)} 조회 · ${vod.date}</p>
                    </div>
                </div>
            `).join('');
        }

        // Load Clips
        function loadClips(stream) {
            const clipsTab = document.getElementById('clipsTab');
            const clips = [
                { title: '미친 플레이!!!', views: 45600, duration: '0:32', creator: '클립러버' },
                { title: '웃긴 순간 ㅋㅋㅋ', views: 34200, duration: '0:45', creator: '재밌어요' },
                { title: '대박 장면', views: 28900, duration: '0:28', creator: '클립왕' },
                { title: '이건 봐야함', views: 52300, duration: '0:38', creator: '하이라이트' },
                { title: '역대급 순간', views: 67800, duration: '0:55', creator: '베스트클립' },
                { title: '감동의 순간', views: 41200, duration: '1:02', creator: '감동맨' }
            ];

            clipsTab.innerHTML = clips.map(clip => `
                <div class="bg-gray-800 rounded-lg overflow-hidden cursor-pointer hover:bg-gray-700 transition">
                    <div class="relative">
                        <div class="w-full aspect-video bg-gradient-to-br from-pink-900 to-purple-900 flex items-center justify-center">
                            <i class="fas fa-film text-4xl opacity-50"></i>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-bold">
                            ${clip.duration}
                        </div>
                        <button class="absolute top-2 right-2 bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded text-xs">
                            <i class="fas fa-share"></i>
                        </button>
                    </div>
                    <div class="p-3">
                        <h4 class="font-bold text-sm mb-1 truncate">${clip.title}</h4>
                        <p class="text-gray-400 text-xs mb-1">${formatViewers(clip.views)} 조회</p>
                        <p class="text-gray-500 text-xs">클립 제작: ${clip.creator}</p>
                    </div>
                </div>
            `).join('');
        }

        // Load About
        function loadAbout(stream) {
            const aboutContent = document.getElementById('aboutContent');
            aboutContent.innerHTML = `
                <div class="space-y-6">
                    <div>
                        <h4 class="font-bold text-lg mb-2">스트리머 소개</h4>
                        <p class="text-gray-300 leading-relaxed">${stream.description}</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2">방송 정보</h4>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <p class="text-gray-400 text-sm mb-1">카테고리</p>
                                <p class="font-bold">${stream.category}</p>
                            </div>
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <p class="text-gray-400 text-sm mb-1">언어</p>
                                <p class="font-bold">${stream.language}</p>
                            </div>
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <p class="text-gray-400 text-sm mb-1">팔로워</p>
                                <p class="font-bold">${stream.followers.toLocaleString()}명</p>
                            </div>
                            <div class="bg-gray-800 p-4 rounded-lg">
                                <p class="text-gray-400 text-sm mb-1">현재 시청자</p>
                                <p class="font-bold">${formatViewers(stream.viewers)}</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2">소셜 미디어</h4>
                        <div class="flex space-x-3">
                            <a href="#" class="bg-gray-800 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                                <i class="fab fa-twitter"></i> Twitter
                            </a>
                            <a href="#" class="bg-gray-800 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                                <i class="fab fa-instagram"></i> Instagram
                            </a>
                            <a href="#" class="bg-gray-800 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                                <i class="fab fa-youtube"></i> YouTube
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }

        // Show Tab
        function showTab(tabName) {
            document.getElementById('vodsTab').classList.add('hidden');
            document.getElementById('clipsTab').classList.add('hidden');
            document.getElementById('aboutTab').classList.add('hidden');

            if (tabName === 'vods') {
                document.getElementById('vodsTab').classList.remove('hidden');
            } else if (tabName === 'clips') {
                document.getElementById('clipsTab').classList.remove('hidden');
            } else if (tabName === 'about') {
                document.getElementById('aboutTab').classList.remove('hidden');
            }
        }

        // Chat Simulation
        const chatMessages = [
            { user: '게임마스터', message: '와 미쳤다 ㅋㅋㅋ', badge: 'sub' },
            { user: '시청자123', message: 'ㄹㅇ 개잘한다', badge: null },
            { user: '프로관전러', message: '이거 어떻게 한거야?', badge: null },
            { user: '후원왕', message: '10,000원 후원했어요!', badge: 'donor' },
            { user: '구독자님', message: 'ㅋㅋㅋㅋㅋㅋ', badge: 'sub' },
            { user: '열혈팬', message: '오늘도 재밌네요 😀', badge: 'sub' },
            { user: '신입시청자', message: '처음 왔는데 재밌어요!', badge: null },
            { user: '베테랑', message: '이 스킬 어떻게 써요?', badge: null },
            { user: '응원단장', message: '화이팅!!! 👏', badge: 'sub' },
            { user: '밤새는사람', message: '오늘 밤샘 각인가?', badge: null }
        ];

        function startChatSimulation() {
            const chatContainer = document.getElementById('chatMessages');

            // Add initial messages
            for (let i = 0; i < 10; i++) {
                addChatMessage(chatMessages[Math.floor(Math.random() * chatMessages.length)]);
            }

            // Continue adding messages
            chatInterval = setInterval(() => {
                const msg = chatMessages[Math.floor(Math.random() * chatMessages.length)];
                addChatMessage(msg);

                // Update chat user count
                const count = 247 + Math.floor(Math.random() * 20) - 10;
                document.getElementById('chatUserCount').textContent = count;
            }, 3000 + Math.random() * 4000);
        }

        function stopChatSimulation() {
            if (chatInterval) {
                clearInterval(chatInterval);
                chatInterval = null;
            }
        }

        function addChatMessage(msg) {
            const chatContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message';

            let badgeHtml = '';
            if (msg.badge === 'sub') {
                badgeHtml = '<span class="bg-purple-600 px-2 py-0.5 rounded text-xs mr-2">구독자</span>';
            } else if (msg.badge === 'donor') {
                badgeHtml = '<span class="bg-yellow-500 text-black px-2 py-0.5 rounded text-xs mr-2">후원</span>';
            }

            messageDiv.innerHTML = `
                <div class="flex items-start space-x-2">
                    <div class="flex-1">
                        ${badgeHtml}
                        <span class="font-bold text-purple-400">${msg.user}</span>
                        <span class="text-gray-300 ml-2">${msg.message}</span>
                    </div>
                </div>
            `;

            chatContainer.appendChild(messageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // Keep only last 50 messages
            while (chatContainer.children.length > 50) {
                chatContainer.removeChild(chatContainer.firstChild);
            }
        }

        function sendChat() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            addChatMessage({
                user: '나',
                message: message,
                badge: 'sub'
            });

            input.value = '';
        }

        function insertEmote(emote) {
            const input = document.getElementById('chatInput');
            input.value += emote;
            input.focus();
        }

        // Viewer Count Update
        function startViewerCountUpdate(stream) {
            setInterval(() => {
                const variation = Math.floor(Math.random() * 200) - 100;
                const newCount = Math.max(stream.viewers + variation, 100);
                const element = document.getElementById('playerViewerCount');
                element.textContent = formatViewers(newCount);
                element.classList.add('viewer-count-update');
                setTimeout(() => element.classList.remove('viewer-count-update'), 500);
            }, 5000);
        }

        // Recommended Streams
        function loadRecommendedStreams(currentId) {
            const recommended = streams.filter(s => s.id !== currentId).slice(0, 4);
            const container = document.getElementById('recommendedStreams');

            container.innerHTML = recommended.map(stream => `
                <div class="bg-gray-900/80 backdrop-blur-sm rounded-lg overflow-hidden cursor-pointer hover:bg-gray-800 transition" onclick="openStream(${stream.id})">
                    <div class="relative">
                        <img src="${stream.thumbnail}" alt="${stream.title}" class="w-full aspect-video object-cover">
                        <div class="absolute top-2 left-2 bg-red-600 px-2 py-1 rounded text-xs font-bold flex items-center live-pulse">
                            <i class="fas fa-circle mr-1"></i> LIVE
                        </div>
                        <div class="absolute bottom-2 left-2 bg-black/70 px-2 py-1 rounded text-xs font-bold">
                            <i class="fas fa-eye mr-1"></i> ${formatViewers(stream.viewers)}
                        </div>
                    </div>
                    <div class="p-3">
                        <h4 class="font-bold text-sm mb-1 truncate">${stream.title}</h4>
                        <p class="text-gray-400 text-xs mb-1">${stream.streamer}</p>
                        <p class="text-gray-500 text-xs">${stream.game}</p>
                    </div>
                </div>
            `).join('');
        }

        // Follow System
        function toggleFollow() {
            if (!currentStreamId) return;

            const index = followedChannels.indexOf(currentStreamId);
            const followBtn = document.getElementById('followBtn');

            if (index > -1) {
                followedChannels.splice(index, 1);
                followBtn.innerHTML = '<i class="fas fa-heart"></i> 팔로우';
                followBtn.classList.remove('bg-pink-600');
                followBtn.classList.add('bg-purple-600');
                showNotification('팔로우 취소', '팔로우가 취소되었습니다.');
            } else {
                followedChannels.push(currentStreamId);
                followBtn.innerHTML = '<i class="fas fa-heart"></i> 팔로잉';
                followBtn.classList.add('bg-pink-600');
                followBtn.classList.remove('bg-purple-600');
                showNotification('팔로우 성공!', '이제 스트리머의 알림을 받을 수 있습니다.');
            }

            localStorage.setItem('followedChannels', JSON.stringify(followedChannels));
        }

        function showFollowedStreams() {
            if (followedChannels.length === 0) {
                showNotification('팔로우 없음', '팔로우한 채널이 없습니다.');
                return;
            }

            const followed = streams.filter(s => followedChannels.includes(s.id));
            renderStreams(followed);
            showHomePage();
        }

        // Theater Mode
        function toggleTheaterMode() {
            isTheaterMode = !isTheaterMode;
            const videoContainer = document.getElementById('videoContainer');

            if (isTheaterMode) {
                videoContainer.classList.add('theater-mode');
            } else {
                videoContainer.classList.remove('theater-mode');
            }
        }

        // Donation Modal
        let selectedDonationAmount = 0;

        function showDonationModal() {
            document.getElementById('donationModal').classList.remove('hidden');
        }

        function closeDonationModal() {
            document.getElementById('donationModal').classList.add('hidden');
            selectedDonationAmount = 0;
            document.getElementById('customDonation').value = '';
            document.getElementById('donationMessage').value = '';
        }

        function selectDonation(amount) {
            selectedDonationAmount = amount;
            document.getElementById('customDonation').value = amount;
        }

        function processDonation() {
            const amount = parseInt(document.getElementById('customDonation').value) || selectedDonationAmount;
            const message = document.getElementById('donationMessage').value;

            if (amount < 1000) {
                alert('최소 후원 금액은 1,000원입니다.');
                return;
            }

            showNotification('후원 완료!', `${amount.toLocaleString()}원이 후원되었습니다. 감사합니다!`);

            // Add to chat
            addChatMessage({
                user: '나',
                message: `${amount.toLocaleString()}원 후원했습니다! ${message}`,
                badge: 'donor'
            });

            closeDonationModal();
        }

        // Subscribe Modal
        function showSubscribeModal() {
            document.getElementById('subscribeModal').classList.remove('hidden');
        }

        function closeSubscribeModal() {
            document.getElementById('subscribeModal').classList.add('hidden');
        }

        function processSubscription() {
            showNotification('구독 완료!', '프리미엄 구독이 활성화되었습니다!');
            closeSubscribeModal();
        }

        // Notification System
        function showNotification(title, message) {
            const toast = document.getElementById('notificationToast');
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;

            toast.classList.remove('hidden');

            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // Filter by Category
        function filterByCategory(category) {
            if (category === 'all') {
                renderStreams(streams);
            } else {
                const filtered = streams.filter(s => s.category === category);
                renderStreams(filtered);
            }
            showHomePage();
        }

        // Sort Streams
        function sortStreams() {
            const sortBy = document.getElementById('sortSelect').value;
            let sorted = [...streams];

            if (sortBy === 'viewers') {
                sorted.sort((a, b) => b.viewers - a.viewers);
            } else if (sortBy === 'recent') {
                sorted.sort((a, b) => b.id - a.id);
            }

            renderStreams(sorted);
        }

        // Filter by Language
        function filterByLanguage() {
            const language = document.getElementById('languageSelect').value;

            if (language === 'all') {
                renderStreams(streams);
            } else {
                const filtered = streams.filter(s => s.language === language);
                renderStreams(filtered);
            }
        }

        // Search Streams
        function searchStreams() {
            const query = document.getElementById('searchInput').value.toLowerCase();

            if (!query) {
                renderStreams(streams);
                return;
            }

            const filtered = streams.filter(s =>
                s.title.toLowerCase().includes(query) ||
                s.streamer.toLowerCase().includes(query) ||
                s.game.toLowerCase().includes(query) ||
                s.category.toLowerCase().includes(query)
            );

            renderStreams(filtered);
        }

        // Update Live Count
        function updateLiveCount() {
            setInterval(() => {
                const count = 15 + Math.floor(Math.random() * 5);
                document.getElementById('liveCount').textContent = count;
            }, 10000);
        }

        // Format Viewers
        function formatViewers(count) {
            if (count >= 1000) {
                return (count / 1000).toFixed(1) + 'K';
            }
            return count.toString();
        }

        // Random notification simulation
        setInterval(() => {
            if (Math.random() > 0.7 && currentStreamId) {
                const notifications = [
                    { title: '새 팔로워!', message: '시청자123님이 팔로우했습니다.' },
                    { title: '후원 알림', message: '게임마스터님이 5,000원 후원!' },
                    { title: '구독 알림', message: '신규 구독자가 생겼습니다!' },
                    { title: '레이드!', message: '다른 방송에서 50명이 왔습니다!' }
                ];
                const notif = notifications[Math.floor(Math.random() * notifications.length)];
                showNotification(notif.title, notif.message);
            }
        }, 15000);
    </script>
</body>
</html>