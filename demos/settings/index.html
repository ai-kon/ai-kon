<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>설정 - AI-KON</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #e0e0e0 0%, #9e9e9e 100%);
        }
        .setting-item {
            transition: all 0.2s;
        }
        .setting-item:hover {
            transform: translateX(5px);
        }
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ccc;
            border-radius: 15px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .toggle-switch.active {
            background: #4caf50;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: left 0.3s;
        }
        .toggle-switch.active::after {
            left: 32px;
        }
    </style>
</head>
<body class="min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-4">
                    <a href="../" class="text-gray-600 hover:text-gray-800 transition">
                        <i class="fas fa-arrow-left text-2xl"></i>
                    </a>
                    <h1 class="text-3xl font-bold text-gray-800">
                        <i class="fas fa-cog text-gray-600"></i> 설정
                    </h1>
                </div>
            </div>

            <!-- Stats -->
            <div class="grid grid-cols-4 gap-4 text-center">
                <div class="bg-gray-100 rounded-lg p-3">
                    <div class="text-2xl font-bold text-gray-600" id="storageUsed">0</div>
                    <div class="text-sm text-gray-600">KB 사용</div>
                </div>
                <div class="bg-gray-100 rounded-lg p-3">
                    <div class="text-2xl font-bold text-gray-600" id="totalApps">7</div>
                    <div class="text-sm text-gray-600">앱 개수</div>
                </div>
                <div class="bg-gray-100 rounded-lg p-3">
                    <div class="text-2xl font-bold text-gray-600" id="totalData">0</div>
                    <div class="text-sm text-gray-600">데이터 항목</div>
                </div>
                <div class="bg-gray-100 rounded-lg p-3">
                    <div class="text-2xl font-bold text-gray-600" id="version">1.0</div>
                    <div class="text-sm text-gray-600">버전</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Appearance Settings -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-palette text-gray-600"></i> 외관
                </h2>

                <div class="space-y-4">
                    <div class="setting-item bg-gray-50 rounded-lg p-4 flex items-center justify-between">
                        <div>
                            <div class="font-semibold text-gray-800">다크 모드</div>
                            <div class="text-sm text-gray-600">어두운 테마 사용</div>
                        </div>
                        <div class="toggle-switch" id="darkModeToggle" onclick="toggleDarkMode()"></div>
                    </div>

                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">테마 색상</div>
                        <div class="grid grid-cols-6 gap-2">
                            <button onclick="changeTheme('purple')" class="w-12 h-12 bg-purple-600 rounded-lg hover:ring-2 ring-gray-400"></button>
                            <button onclick="changeTheme('blue')" class="w-12 h-12 bg-blue-600 rounded-lg hover:ring-2 ring-gray-400"></button>
                            <button onclick="changeTheme('green')" class="w-12 h-12 bg-green-600 rounded-lg hover:ring-2 ring-gray-400"></button>
                            <button onclick="changeTheme('red')" class="w-12 h-12 bg-red-600 rounded-lg hover:ring-2 ring-gray-400"></button>
                            <button onclick="changeTheme('orange')" class="w-12 h-12 bg-orange-600 rounded-lg hover:ring-2 ring-gray-400"></button>
                            <button onclick="changeTheme('pink')" class="w-12 h-12 bg-pink-600 rounded-lg hover:ring-2 ring-gray-400"></button>
                        </div>
                        <div class="text-sm text-gray-500 mt-2">현재 테마: <span id="currentTheme" class="font-semibold">기본</span></div>
                    </div>

                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">글꼴 크기</div>
                        <input type="range" min="12" max="20" value="14" id="fontSizeRange"
                               class="w-full" onchange="changeFontSize(this.value)">
                        <div class="text-sm text-gray-500 mt-2">현재 크기: <span id="currentFontSize">14px</span></div>
                    </div>
                </div>
            </div>

            <!-- Language Settings -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-language text-gray-600"></i> 언어 및 지역
                </h2>

                <div class="space-y-4">
                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">언어</div>
                        <select id="languageSelect" onchange="changeLanguage(this.value)"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500">
                            <option value="ko">한국어</option>
                            <option value="en">English</option>
                            <option value="ja">日本語</option>
                            <option value="zh">中文</option>
                        </select>
                    </div>

                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">시간 형식</div>
                        <select id="timeFormatSelect" onchange="changeTimeFormat(this.value)"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500">
                            <option value="24">24시간</option>
                            <option value="12">12시간 (AM/PM)</option>
                        </select>
                    </div>

                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">날짜 형식</div>
                        <select id="dateFormatSelect" onchange="changeDateFormat(this.value)"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500">
                            <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                            <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                            <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Data Management -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-database text-gray-600"></i> 데이터 관리
                </h2>

                <div class="space-y-4">
                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">데이터 백업</div>
                        <div class="text-sm text-gray-600 mb-3">모든 앱 데이터를 JSON 파일로 내보내기</div>
                        <button onclick="exportData()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                            <i class="fas fa-download"></i> 데이터 내보내기
                        </button>
                    </div>

                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">데이터 복원</div>
                        <div class="text-sm text-gray-600 mb-3">백업 파일에서 데이터 가져오기</div>
                        <label class="w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition cursor-pointer block text-center">
                            <i class="fas fa-upload"></i> 데이터 가져오기
                            <input type="file" accept=".json" onchange="importData(event)" class="hidden">
                        </label>
                    </div>

                    <div class="setting-item bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">저장소 정보</div>
                        <div class="text-sm text-gray-600 mb-2" id="storageInfo">계산 중...</div>
                        <button onclick="refreshStorageInfo()" class="w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition">
                            <i class="fas fa-sync"></i> 새로고침
                        </button>
                    </div>

                    <div class="setting-item bg-red-50 rounded-lg p-4 border-2 border-red-200">
                        <div class="font-semibold text-red-800 mb-2">
                            <i class="fas fa-exclamation-triangle"></i> 모든 데이터 삭제
                        </div>
                        <div class="text-sm text-red-600 mb-3">모든 앱의 데이터를 영구적으로 삭제합니다</div>
                        <button onclick="clearAllData()" class="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition">
                            <i class="fas fa-trash"></i> 전체 삭제
                        </button>
                    </div>
                </div>
            </div>

            <!-- About -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">
                    <i class="fas fa-info-circle text-gray-600"></i> AI-KON 정보
                </h2>

                <div class="space-y-4">
                    <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg p-6 text-white text-center">
                        <div class="text-6xl mb-4">🤖</div>
                        <div class="text-3xl font-bold mb-2">AI-KON</div>
                        <div class="text-lg">버전 1.0</div>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">포함된 앱</div>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div class="flex items-center gap-2">
                                <i class="fas fa-calculator text-purple-600"></i>
                                <span>계산기</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-sticky-note text-green-600"></i>
                                <span>메모장</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-folder-open text-blue-600"></i>
                                <span>파일 탐색기</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-terminal text-gray-700"></i>
                                <span>터미널</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-clock text-pink-600"></i>
                                <span>시계</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-calendar-alt text-orange-600"></i>
                                <span>달력</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="fas fa-cog text-gray-600"></i>
                                <span>설정</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">기술 스택</div>
                        <div class="text-sm text-gray-600 space-y-1">
                            <div><i class="fas fa-code text-blue-500"></i> HTML5, CSS3, JavaScript</div>
                            <div><i class="fas fa-paint-brush text-cyan-500"></i> Tailwind CSS</div>
                            <div><i class="fas fa-icons text-green-500"></i> Font Awesome</div>
                            <div><i class="fas fa-database text-orange-500"></i> LocalStorage API</div>
                        </div>
                    </div>

                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="font-semibold text-gray-800 mb-2">라이선스</div>
                        <div class="text-sm text-gray-600">
                            © 2024 AI-KON. All rights reserved.
                        </div>
                    </div>

                    <div class="bg-blue-50 rounded-lg p-4 text-center">
                        <div class="text-sm text-blue-800">
                            <i class="fas fa-heart text-red-500"></i> Made with AI
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let settings = JSON.parse(localStorage.getItem('appSettings') || JSON.stringify({
            darkMode: false,
            theme: 'default',
            fontSize: 14,
            language: 'ko',
            timeFormat: '24',
            dateFormat: 'YYYY-MM-DD'
        }));

        function toggleDarkMode() {
            settings.darkMode = !settings.darkMode;
            saveSettings();
            applySettings();
        }

        function changeTheme(theme) {
            settings.theme = theme;
            document.getElementById('currentTheme').textContent = theme;
            saveSettings();
        }

        function changeFontSize(size) {
            settings.fontSize = size;
            document.getElementById('currentFontSize').textContent = size + 'px';
            saveSettings();
        }

        function changeLanguage(lang) {
            settings.language = lang;
            saveSettings();
            alert('언어가 변경되었습니다. 일부 앱은 새로고침이 필요할 수 있습니다.');
        }

        function changeTimeFormat(format) {
            settings.timeFormat = format;
            saveSettings();
        }

        function changeDateFormat(format) {
            settings.dateFormat = format;
            saveSettings();
        }

        function saveSettings() {
            localStorage.setItem('appSettings', JSON.stringify(settings));
        }

        function applySettings() {
            const toggle = document.getElementById('darkModeToggle');
            if (settings.darkMode) {
                toggle.classList.add('active');
                document.body.style.filter = 'invert(1) hue-rotate(180deg)';
            } else {
                toggle.classList.remove('active');
                document.body.style.filter = 'none';
            }

            document.getElementById('currentTheme').textContent = settings.theme;
            document.getElementById('fontSizeRange').value = settings.fontSize;
            document.getElementById('currentFontSize').textContent = settings.fontSize + 'px';
            document.getElementById('languageSelect').value = settings.language;
            document.getElementById('timeFormatSelect').value = settings.timeFormat;
            document.getElementById('dateFormatSelect').value = settings.dateFormat;
        }

        function exportData() {
            const allData = {};
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                allData[key] = localStorage.getItem(key);
            }

            const blob = new Blob([JSON.stringify(allData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ai-kon-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);

            alert('데이터가 내보내기 되었습니다!');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const data = JSON.parse(e.target.result);
                    if (confirm('현재 데이터가 모두 덮어써집니다. 계속하시겠습니까?')) {
                        localStorage.clear();
                        Object.keys(data).forEach(key => {
                            localStorage.setItem(key, data[key]);
                        });
                        alert('데이터를 가져왔습니다! 페이지를 새로고침합니다.');
                        location.reload();
                    }
                } catch (error) {
                    alert('잘못된 백업 파일입니다.');
                }
            };
            reader.readAsText(file);
        }

        function refreshStorageInfo() {
            const info = calculateStorageInfo();
            document.getElementById('storageInfo').innerHTML = `
                <div>전체 항목: ${info.items}개</div>
                <div>사용 용량: ${info.size} KB</div>
            `;
            document.getElementById('storageUsed').textContent = info.size;
            document.getElementById('totalData').textContent = info.items;
        }

        function calculateStorageInfo() {
            let size = 0;
            let items = 0;

            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                size += key.length + value.length;
                items++;
            }

            return {
                items: items,
                size: Math.round(size / 1024)
            };
        }

        function clearAllData() {
            if (confirm('정말로 모든 데이터를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.')) {
                if (confirm('마지막 확인: 모든 앱의 데이터가 영구적으로 삭제됩니다!')) {
                    localStorage.clear();
                    alert('모든 데이터가 삭제되었습니다. 페이지를 새로고침합니다.');
                    location.reload();
                }
            }
        }

        // Initialize
        applySettings();
        refreshStorageInfo();
    </script>
</body>
</html>
