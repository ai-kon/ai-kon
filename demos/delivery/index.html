<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î∞∞Îã¨ Ï∂îÏ†Å - Î∞∞ÎØº Ïä§ÌÉÄÏùº</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #2ac1bc 0%, #00d4a1 100%);
            min-height: 100vh;
        }
        .delivery-card:hover {
            transform: translateY(-3px);
            transition: transform 0.3s;
        }
        .status-progress {
            position: relative;
        }
        .status-progress::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e5e7eb;
        }
        .status-item {
            position: relative;
            padding-left: 50px;
        }
        .status-icon {
            position: absolute;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
            background: white;
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl font-bold text-teal-600">
                    <i class="fas fa-motorcycle mr-2"></i>Î∞∞Îã¨ Ï∂îÏ†Å
                </h1>
                <button id="newOrderBtn" class="bg-gradient-to-r from-teal-500 to-green-500 text-white px-6 py-3 rounded-lg hover:from-teal-600 hover:to-green-600 font-bold">
                    <i class="fas fa-plus mr-2"></i>ÏÉà Ï£ºÎ¨∏ Îì±Î°ù
                </button>
            </div>

            <!-- Quick Stats -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-yellow-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-yellow-600" id="preparingCount">0</div>
                    <div class="text-sm text-gray-600">Ï§ÄÎπÑÏ§ë</div>
                </div>
                <div class="bg-blue-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-blue-600" id="pickupCount">0</div>
                    <div class="text-sm text-gray-600">ÌîΩÏóÖÏôÑÎ£å</div>
                </div>
                <div class="bg-purple-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-purple-600" id="deliveringCount">0</div>
                    <div class="text-sm text-gray-600">Î∞∞Îã¨Ï§ë</div>
                </div>
                <div class="bg-green-50 rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-green-600" id="completedCount">0</div>
                    <div class="text-sm text-gray-600">Î∞∞Îã¨ÏôÑÎ£å</div>
                </div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="bg-white rounded-lg shadow-lg p-4 mb-6">
            <div class="flex gap-2 overflow-x-auto">
                <button class="filter-btn whitespace-nowrap bg-teal-500 text-white px-6 py-2 rounded-lg font-bold" data-status="all">Ï†ÑÏ≤¥</button>
                <button class="filter-btn whitespace-nowrap bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300" data-status="Ï£ºÎ¨∏Ï†ëÏàò">Ï£ºÎ¨∏Ï†ëÏàò</button>
                <button class="filter-btn whitespace-nowrap bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300" data-status="Ï°∞Î¶¨Ï§ë">Ï°∞Î¶¨Ï§ë</button>
                <button class="filter-btn whitespace-nowrap bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300" data-status="ÌîΩÏóÖÏôÑÎ£å">ÌîΩÏóÖÏôÑÎ£å</button>
                <button class="filter-btn whitespace-nowrap bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300" data-status="Î∞∞Îã¨Ï§ë">Î∞∞Îã¨Ï§ë</button>
                <button class="filter-btn whitespace-nowrap bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300" data-status="Î∞∞Îã¨ÏôÑÎ£å">Î∞∞Îã¨ÏôÑÎ£å</button>
            </div>
        </div>

        <!-- Delivery Cards -->
        <div id="deliveryGrid" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

        <!-- New Order Modal -->
        <div id="orderModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-2xl font-bold">ÏÉà Ï£ºÎ¨∏ Îì±Î°ù</h2>
                        <button id="closeModal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-bold mb-2">ÏùåÏãùÏ†ê Ïù¥Î¶Ñ</label>
                            <input type="text" id="restaurantName" placeholder="Ïòà: ÎßõÏûàÎäî ÏπòÌÇ®Ïßë" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">Î©îÎâ¥</label>
                            <input type="text" id="menuItems" placeholder="Ïòà: ÏñëÎÖêÏπòÌÇ®, Í∞êÏûêÌäÄÍπÄ" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">Ï£ºÎ¨∏ Í∏àÏï°</label>
                            <input type="number" id="orderPrice" placeholder="Ïòà: 25000" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">Î∞∞Îã¨ Ï£ºÏÜå</label>
                            <input type="text" id="deliveryAddress" placeholder="Ïòà: ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨..." class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
                        </div>

                        <div>
                            <label class="block text-sm font-bold mb-2">ÏïÑÏù¥ÏΩò ÏÑ†ÌÉù</label>
                            <div class="grid grid-cols-6 gap-2">
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üçó">üçó</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üçï">üçï</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üçî">üçî</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üçú">üçú</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üç±">üç±</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üçõ">üçõ</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="ü•ò">ü•ò</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üçù">üçù</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üåÆ">üåÆ</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="üç£">üç£</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="ü•ó">ü•ó</button>
                                <button type="button" class="icon-btn text-4xl p-2 border rounded hover:bg-gray-100" data-icon="‚òï">‚òï</button>
                            </div>
                            <input type="hidden" id="selectedIcon" value="üçó">
                        </div>

                        <button id="createOrderBtn" class="w-full bg-gradient-to-r from-teal-500 to-green-500 text-white py-3 rounded-lg hover:from-teal-600 hover:to-green-600 font-bold">
                            <i class="fas fa-check mr-2"></i>Ï£ºÎ¨∏ Îì±Î°ù
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- View Order Modal -->
        <div id="viewOrderModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex justify-between items-start mb-6">
                        <div class="flex items-center gap-4">
                            <div class="text-6xl" id="viewIcon"></div>
                            <div>
                                <h2 class="text-2xl font-bold" id="viewRestaurant"></h2>
                                <div class="text-sm text-gray-500" id="viewOrderNumber"></div>
                            </div>
                        </div>
                        <button id="closeViewModal" class="text-gray-500 hover:text-gray-700">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>

                    <!-- Order Info -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <div class="text-sm text-gray-600 mb-1">Ï£ºÎ¨∏ Í∏àÏï°</div>
                                <div class="font-bold text-xl text-teal-600" id="viewPrice"></div>
                            </div>
                            <div>
                                <div class="text-sm text-gray-600 mb-1">Ï£ºÎ¨∏ ÏãúÍ∞Ñ</div>
                                <div class="font-bold" id="viewOrderTime"></div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="text-sm text-gray-600 mb-1">Î©îÎâ¥</div>
                            <div class="font-bold" id="viewMenu"></div>
                        </div>
                        <div class="mt-4">
                            <div class="text-sm text-gray-600 mb-1">Î∞∞Îã¨ Ï£ºÏÜå</div>
                            <div class="font-bold" id="viewAddress"></div>
                        </div>
                    </div>

                    <!-- Status Progress -->
                    <div class="mb-6">
                        <h3 class="text-xl font-bold mb-4">Î∞∞Îã¨ ÌòÑÌô©</h3>
                        <div class="status-progress" id="statusProgress"></div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-4">
                        <button id="updateStatusBtn" class="flex-1 bg-teal-500 text-white py-3 rounded-lg hover:bg-teal-600 font-bold">
                            <i class="fas fa-arrow-right mr-2"></i>Îã§Ïùå Îã®Í≥Ñ
                        </button>
                        <button id="deleteOrderBtn" class="bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 font-bold">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const statuses = ['Ï£ºÎ¨∏Ï†ëÏàò', 'Ï°∞Î¶¨Ï§ë', 'ÌîΩÏóÖÏôÑÎ£å', 'Î∞∞Îã¨Ï§ë', 'Î∞∞Îã¨ÏôÑÎ£å'];
        const statusIcons = {
            'Ï£ºÎ¨∏Ï†ëÏàò': { icon: 'fa-file-alt', color: 'bg-gray-200 text-gray-600' },
            'Ï°∞Î¶¨Ï§ë': { icon: 'fa-fire', color: 'bg-yellow-200 text-yellow-600' },
            'ÌîΩÏóÖÏôÑÎ£å': { icon: 'fa-box', color: 'bg-blue-200 text-blue-600' },
            'Î∞∞Îã¨Ï§ë': { icon: 'fa-motorcycle', color: 'bg-purple-200 text-purple-600' },
            'Î∞∞Îã¨ÏôÑÎ£å': { icon: 'fa-check', color: 'bg-green-200 text-green-600' }
        };

        // Initialize data
        if (!localStorage.getItem('deliveryOrders')) {
            const sampleOrders = [
                {
                    id: 1,
                    restaurant: 'ÎßõÏûàÎäî ÏπòÌÇ®Ïßë',
                    menu: 'ÏñëÎÖêÏπòÌÇ®, Í∞êÏûêÌäÄÍπÄ',
                    price: 25000,
                    address: 'ÏÑúÏö∏Ïãú Í∞ïÎÇ®Íµ¨ Ïó≠ÏÇºÎèô',
                    icon: 'üçó',
                    status: 'Î∞∞Îã¨Ï§ë',
                    orderTime: new Date().toLocaleString('ko-KR'),
                    statusHistory: [
                        { status: 'Ï£ºÎ¨∏Ï†ëÏàò', time: new Date().toLocaleString('ko-KR') },
                        { status: 'Ï°∞Î¶¨Ï§ë', time: new Date().toLocaleString('ko-KR') },
                        { status: 'ÌîΩÏóÖÏôÑÎ£å', time: new Date().toLocaleString('ko-KR') },
                        { status: 'Î∞∞Îã¨Ï§ë', time: new Date().toLocaleString('ko-KR') }
                    ]
                }
            ];
            localStorage.setItem('deliveryOrders', JSON.stringify(sampleOrders));
        }

        let orders = JSON.parse(localStorage.getItem('deliveryOrders'));
        let currentOrderId = null;
        let currentFilter = 'all';

        function saveToLocalStorage() {
            localStorage.setItem('deliveryOrders', JSON.stringify(orders));
        }

        function formatPrice(price) {
            return price.toLocaleString('ko-KR') + 'Ïõê';
        }

        function updateStats() {
            const preparing = orders.filter(o => ['Ï£ºÎ¨∏Ï†ëÏàò', 'Ï°∞Î¶¨Ï§ë'].includes(o.status)).length;
            const pickup = orders.filter(o => o.status === 'ÌîΩÏóÖÏôÑÎ£å').length;
            const delivering = orders.filter(o => o.status === 'Î∞∞Îã¨Ï§ë').length;
            const completed = orders.filter(o => o.status === 'Î∞∞Îã¨ÏôÑÎ£å').length;

            document.getElementById('preparingCount').textContent = preparing;
            document.getElementById('pickupCount').textContent = pickup;
            document.getElementById('deliveringCount').textContent = delivering;
            document.getElementById('completedCount').textContent = completed;
        }

        function renderOrders(filteredOrders = orders) {
            const grid = document.getElementById('deliveryGrid');

            if (filteredOrders.length === 0) {
                grid.innerHTML = '<div class="col-span-full bg-white rounded-lg shadow-lg p-12 text-center text-gray-500">Ï£ºÎ¨∏Ïù¥ ÏóÜÏäµÎãàÎã§</div>';
                return;
            }

            grid.innerHTML = filteredOrders.map(order => {
                const statusInfo = statusIcons[order.status];
                return `
                    <div class="delivery-card bg-white rounded-lg shadow-lg p-6 cursor-pointer hover:shadow-xl transition-shadow" onclick="viewOrder(${order.id})">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center gap-4">
                                <div class="text-5xl">${order.icon}</div>
                                <div>
                                    <h3 class="font-bold text-xl">${order.restaurant}</h3>
                                    <div class="text-sm text-gray-500">Ï£ºÎ¨∏Î≤àÌò∏: #${order.id}</div>
                                </div>
                            </div>
                            <div class="${statusInfo.color} px-3 py-1 rounded-full flex items-center gap-2">
                                <i class="fas ${statusInfo.icon}"></i>
                                <span class="text-sm font-bold">${order.status}</span>
                            </div>
                        </div>
                        <div class="text-gray-700 mb-2">${order.menu}</div>
                        <div class="text-teal-600 font-bold text-xl mb-2">${formatPrice(order.price)}</div>
                        <div class="text-sm text-gray-500 mb-3">
                            <i class="fas fa-map-marker-alt mr-1"></i>${order.address}
                        </div>
                        <div class="text-xs text-gray-400">
                            <i class="fas fa-clock mr-1"></i>${order.orderTime}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function viewOrder(orderId) {
            currentOrderId = orderId;
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            document.getElementById('viewIcon').textContent = order.icon;
            document.getElementById('viewRestaurant').textContent = order.restaurant;
            document.getElementById('viewOrderNumber').textContent = `Ï£ºÎ¨∏Î≤àÌò∏: #${order.id}`;
            document.getElementById('viewPrice').textContent = formatPrice(order.price);
            document.getElementById('viewOrderTime').textContent = order.orderTime;
            document.getElementById('viewMenu').textContent = order.menu;
            document.getElementById('viewAddress').textContent = order.address;

            renderStatusProgress(order);
            document.getElementById('viewOrderModal').classList.remove('hidden');

            // Hide update button if completed
            if (order.status === 'Î∞∞Îã¨ÏôÑÎ£å') {
                document.getElementById('updateStatusBtn').style.display = 'none';
            } else {
                document.getElementById('updateStatusBtn').style.display = 'block';
            }
        }

        function renderStatusProgress(order) {
            const progress = document.getElementById('statusProgress');
            const currentIndex = statuses.indexOf(order.status);

            progress.innerHTML = statuses.map((status, index) => {
                const statusInfo = statusIcons[status];
                const isCompleted = index <= currentIndex;
                const statusTime = order.statusHistory.find(h => h.status === status)?.time || '';

                return `
                    <div class="status-item mb-6 ${isCompleted ? '' : 'opacity-50'}">
                        <div class="status-icon ${statusInfo.color}">
                            <i class="fas ${statusInfo.icon}"></i>
                        </div>
                        <div class="font-bold text-lg mb-1">${status}</div>
                        ${statusTime ? `<div class="text-sm text-gray-500">${statusTime}</div>` : ''}
                    </div>
                `;
            }).join('');
        }

        function createOrder() {
            const restaurant = document.getElementById('restaurantName').value.trim();
            const menu = document.getElementById('menuItems').value.trim();
            const price = parseFloat(document.getElementById('orderPrice').value);
            const address = document.getElementById('deliveryAddress').value.trim();
            const icon = document.getElementById('selectedIcon').value;

            if (!restaurant || !menu || !price || !address) {
                alert('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }

            const order = {
                id: Date.now(),
                restaurant,
                menu,
                price,
                address,
                icon,
                status: 'Ï£ºÎ¨∏Ï†ëÏàò',
                orderTime: new Date().toLocaleString('ko-KR'),
                statusHistory: [
                    { status: 'Ï£ºÎ¨∏Ï†ëÏàò', time: new Date().toLocaleString('ko-KR') }
                ]
            };

            orders.unshift(order);
            saveToLocalStorage();

            // Clear form
            document.getElementById('restaurantName').value = '';
            document.getElementById('menuItems').value = '';
            document.getElementById('orderPrice').value = '';
            document.getElementById('deliveryAddress').value = '';

            document.getElementById('orderModal').classList.add('hidden');
            renderOrders();
            updateStats();
            alert('Ï£ºÎ¨∏Ïù¥ Îì±Î°ùÎêòÏóàÏäµÎãàÎã§!');
        }

        function updateOrderStatus() {
            const order = orders.find(o => o.id === currentOrderId);
            if (!order || order.status === 'Î∞∞Îã¨ÏôÑÎ£å') return;

            const currentIndex = statuses.indexOf(order.status);
            if (currentIndex < statuses.length - 1) {
                order.status = statuses[currentIndex + 1];
                order.statusHistory.push({
                    status: order.status,
                    time: new Date().toLocaleString('ko-KR')
                });

                saveToLocalStorage();
                renderStatusProgress(order);
                renderOrders();
                updateStats();

                if (order.status === 'Î∞∞Îã¨ÏôÑÎ£å') {
                    alert('Î∞∞Îã¨Ïù¥ ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!');
                    document.getElementById('updateStatusBtn').style.display = 'none';
                } else {
                    alert(`ÏÉÅÌÉúÍ∞Ä '${order.status}'(Ïúº)Î°ú Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§!`);
                }
            }
        }

        function deleteOrder() {
            if (!confirm('Ïù¥ Ï£ºÎ¨∏ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;

            orders = orders.filter(o => o.id !== currentOrderId);
            saveToLocalStorage();

            document.getElementById('viewOrderModal').classList.add('hidden');
            renderOrders();
            updateStats();
        }

        function filterOrders(status) {
            currentFilter = status;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.status === status) {
                    btn.className = 'filter-btn whitespace-nowrap bg-teal-500 text-white px-6 py-2 rounded-lg font-bold';
                } else {
                    btn.className = 'filter-btn whitespace-nowrap bg-gray-200 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-300';
                }
            });

            const filtered = status === 'all' ? orders : orders.filter(o => o.status === status);
            renderOrders(filtered);
        }

        // Icon selection
        document.querySelectorAll('.icon-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.icon-btn').forEach(b => b.classList.remove('bg-teal-100', 'border-teal-500'));
                btn.classList.add('bg-teal-100', 'border-teal-500');
                document.getElementById('selectedIcon').value = btn.dataset.icon;
            });
        });

        // Event listeners
        document.getElementById('newOrderBtn').addEventListener('click', () => {
            document.getElementById('orderModal').classList.remove('hidden');
        });

        document.getElementById('closeModal').addEventListener('click', () => {
            document.getElementById('orderModal').classList.add('hidden');
        });

        document.getElementById('closeViewModal').addEventListener('click', () => {
            document.getElementById('viewOrderModal').classList.add('hidden');
        });

        document.getElementById('createOrderBtn').addEventListener('click', createOrder);
        document.getElementById('updateStatusBtn').addEventListener('click', updateOrderStatus);
        document.getElementById('deleteOrderBtn').addEventListener('click', deleteOrder);

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => filterOrders(btn.dataset.status));
        });

        // Initial render
        renderOrders();
        updateStats();
    </script>
</body>
</html>
