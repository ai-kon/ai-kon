<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT Clone - AI-KON</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
    <style>
        body {
            background: #343541;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .chat-message { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .sidebar {
            background: #202123;
            transition: transform 0.3s ease;
        }
        .chat-container { background: #343541; }
        .message-user { background: #343541; }
        .message-assistant { background: #444654; }
        .input-area { background: #40414f; border: 1px solid #565869; }
        .input-area:focus-within { border-color: #10a37f; }
        .btn-primary { background: #10a37f; }
        .btn-primary:hover { background: #0d8b6d; }
        .sidebar-item:hover { background: #2a2b32; }
        .prompt-card:hover { border-color: #10a37f; transform: scale(1.02); }
        .prompt-card { transition: all 0.2s; }
        pre { background: #000; border-radius: 8px; padding: 16px; overflow-x: auto; }
        code { font-family: 'Courier New', monospace; }
        .typing-indicator { display: flex; gap: 4px; padding: 12px; }
        .typing-dot { width: 8px; height: 8px; background: #10a37f; border-radius: 50%; animation: typing 1.4s infinite; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        .scroll-shadow { box-shadow: 0 -10px 20px rgba(0,0,0,0.3); }
    </style>
</head>
<body class="h-screen overflow-hidden">
    <div class="flex h-full">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar w-64 flex-shrink-0 flex flex-col">
            <!-- New Chat Button -->
            <div class="p-4">
                <button onclick="newChat()" class="w-full px-4 py-3 bg-transparent border border-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    <i class="fas fa-plus"></i>
                    <span>ìƒˆ ëŒ€í™”</span>
                </button>
            </div>

            <!-- Chat History -->
            <div class="flex-1 overflow-y-auto px-2">
                <div class="text-xs text-gray-400 px-3 mb-2">ìµœê·¼ ëŒ€í™”</div>
                <div id="chatHistory"></div>
            </div>

            <!-- User Profile -->
            <div class="p-4 border-t border-gray-700">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-green-600 rounded-full flex items-center justify-center text-white font-bold">
                        U
                    </div>
                    <div class="flex-1">
                        <div class="text-sm text-white">ì‚¬ìš©ì</div>
                        <div class="text-xs text-gray-400">Free Plan</div>
                    </div>
                    <button onclick="window.location.href='../'" class="text-gray-400 hover:text-white">
                        <i class="fas fa-arrow-right-from-bracket"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Chat Area -->
        <div class="flex-1 flex flex-col">
            <!-- Header -->
            <div class="bg-gray-800 border-b border-gray-700 px-6 py-4 flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <button id="sidebarToggle" class="lg:hidden text-gray-400 hover:text-white">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="text-white font-bold text-lg">ChatGPT Clone</h1>
                    <span class="px-2 py-1 bg-green-600 text-white text-xs rounded">GPT-4</span>
                </div>
                <div class="flex gap-2">
                    <button onclick="toggleDarkMode()" class="px-3 py-2 text-gray-400 hover:text-white">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button onclick="clearChat()" class="px-3 py-2 text-gray-400 hover:text-white">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>

            <!-- Messages Area -->
            <div id="messagesContainer" class="flex-1 overflow-y-auto">
                <!-- Welcome Screen -->
                <div id="welcomeScreen" class="h-full flex items-center justify-center">
                    <div class="max-w-3xl mx-auto px-4 text-center">
                        <h2 class="text-4xl font-bold text-white mb-6">ChatGPT Clone</h2>
                        <p class="text-gray-400 mb-8">ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</p>

                        <!-- Prompt Suggestions -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="prompt-card bg-gray-700 p-4 rounded-lg cursor-pointer border-2 border-transparent" onclick="usePrompt('Pythonìœ¼ë¡œ ì›¹ ìŠ¤í¬ë˜í¼ ë§Œë“œëŠ” ë°©ë²• ì•Œë ¤ì¤˜')">
                                <i class="fas fa-code text-green-400 mb-2"></i>
                                <div class="text-white text-sm font-medium">ì½”ë”© ë„ì›€</div>
                                <div class="text-gray-400 text-xs mt-1">Pythonìœ¼ë¡œ ì›¹ ìŠ¤í¬ë˜í¼ ë§Œë“¤ê¸°</div>
                            </div>
                            <div class="prompt-card bg-gray-700 p-4 rounded-lg cursor-pointer border-2 border-transparent" onclick="usePrompt('ì˜¤ëŠ˜ ì ì‹¬ ë©”ë‰´ ì¶”ì²œí•´ì¤˜')">
                                <i class="fas fa-utensils text-orange-400 mb-2"></i>
                                <div class="text-white text-sm font-medium">ì¼ìƒ ë„ì›€</div>
                                <div class="text-gray-400 text-xs mt-1">ì ì‹¬ ë©”ë‰´ ì¶”ì²œë°›ê¸°</div>
                            </div>
                            <div class="prompt-card bg-gray-700 p-4 rounded-lg cursor-pointer border-2 border-transparent" onclick="usePrompt('ì˜ì–´ ì´ë©”ì¼ ì‘ì„± ë„ì™€ì¤˜')">
                                <i class="fas fa-envelope text-blue-400 mb-2"></i>
                                <div class="text-white text-sm font-medium">ê¸€ì“°ê¸°</div>
                                <div class="text-gray-400 text-xs mt-1">ì˜ì–´ ì´ë©”ì¼ ì‘ì„±</div>
                            </div>
                            <div class="prompt-card bg-gray-700 p-4 rounded-lg cursor-pointer border-2 border-transparent" onclick="usePrompt('ì¬ë¯¸ìˆëŠ” ì‚¬ì‹¤ í•˜ë‚˜ ì•Œë ¤ì¤˜')">
                                <i class="fas fa-lightbulb text-yellow-400 mb-2"></i>
                                <div class="text-white text-sm font-medium">ì§€ì‹</div>
                                <div class="text-gray-400 text-xs mt-1">ì¬ë¯¸ìˆëŠ” ì‚¬ì‹¤ ë°°ìš°ê¸°</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Messages -->
                <div id="messages" class="hidden max-w-3xl mx-auto px-4 py-6"></div>
            </div>

            <!-- Input Area -->
            <div class="scroll-shadow">
                <div class="max-w-3xl mx-auto px-4 py-6">
                    <div class="input-area rounded-xl flex items-end gap-3 p-3">
                        <textarea
                            id="messageInput"
                            rows="1"
                            placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                            class="flex-1 bg-transparent text-white placeholder-gray-500 resize-none outline-none max-h-48"
                            onkeydown="if(event.key==='Enter' && !event.shiftKey){event.preventDefault();sendMessage();}"
                        ></textarea>
                        <button onclick="sendMessage()" class="btn-primary w-10 h-10 rounded-lg flex items-center justify-center text-white transition-colors">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div class="text-xs text-gray-500 text-center mt-2">
                        ChatGPTëŠ” ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ì •ë³´ëŠ” í™•ì¸í•´ì£¼ì„¸ìš”.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let conversations = JSON.parse(localStorage.getItem('chatgpt_conversations') || '[]');
        let currentConversationId = null;
        let currentMessages = [];

        // AI Response Templates
        const aiResponses = {
            greeting: [
                "ì•ˆë…•í•˜ì„¸ìš”! ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?",
                "ë°˜ê°‘ìŠµë‹ˆë‹¤! ê¶ê¸ˆí•˜ì‹  ê²ƒì´ ìˆìœ¼ì‹ ê°€ìš”?",
                "ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ ì–´ë–¤ ê²ƒì„ ë„ì™€ë“œë¦´ê¹Œìš”?"
            ],
            coding: [
                "ì¢‹ì€ ì§ˆë¬¸ì…ë‹ˆë‹¤! ì½”ë”© ê´€ë ¨ ì§ˆë¬¸ì´ì‹œêµ°ìš”.\n\n```python\ndef example():\n    print('Hello, World!')\n```\n\nì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‘ì„±í•˜ì‹œë©´ ë©ë‹ˆë‹¤.",
                "í”„ë¡œê·¸ë˜ë° ë„ì›€ì´ í•„ìš”í•˜ì‹œêµ°ìš”. êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ë¶€ë¶„ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?",
                "ì½”ë“œ ì˜ˆì œë¥¼ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n```javascript\nfunction greet(name) {\n    return `Hello, ${name}!`;\n}\n```"
            ],
            food: [
                "ì˜¤ëŠ˜ ì ì‹¬ì€ ë‹¤ìŒ ì¤‘ì—ì„œ ì„ íƒí•´ë³´ì„¸ìš”:\n\n1. ğŸœ ë¼ë©´ - ê°„ë‹¨í•˜ê³  ë§›ìˆëŠ” ì„ íƒ\n2. ğŸ• í”¼ì - ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜\n3. ğŸ± ë„ì‹œë½ - ê±´ê°•í•œ ì„ íƒ\n4. ğŸ” í–„ë²„ê±° - ë“ ë“ í•œ í•œ ë¼",
                "ë§›ìˆëŠ” ìŒì‹ ì¶”ì²œë“œë¦´ê²Œìš”! í•œì‹, ì¤‘ì‹, ì¼ì‹ ì¤‘ ì–´ë–¤ ê²ƒì„ ì„ í˜¸í•˜ì‹œë‚˜ìš”?",
                "ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë©”ë‰´ëŠ” ê¹€ì¹˜ì°Œê°œì…ë‹ˆë‹¤! ğŸ² ë§µê³  ì–¼í°í•œ êµ­ë¬¼ì´ ì¼í’ˆì´ì£ ."
            ],
            writing: [
                "ê¸€ì“°ê¸°ë¥¼ ë„ì™€ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì–´ë–¤ ì¢…ë¥˜ì˜ ê¸€ì„ ì‘ì„±í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?",
                "ì˜ì–´ ì´ë©”ì¼ ì‘ì„± ì˜ˆì‹œë¥¼ ë³´ì—¬ë“œë¦´ê²Œìš”:\n\nDear [Name],\n\nI hope this email finds you well...\n\nBest regards,\n[Your Name]",
                "ê¸€ì˜ êµ¬ì¡°ëŠ” ì„œë¡ , ë³¸ë¡ , ê²°ë¡ ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
            ],
            knowledge: [
                "ì¬ë¯¸ìˆëŠ” ì‚¬ì‹¤: ë²ŒìƒˆëŠ” ìœ ì¼í•˜ê²Œ ë’¤ë¡œ ë‚  ìˆ˜ ìˆëŠ” ìƒˆì…ë‹ˆë‹¤! ğŸ¦",
                "ì•Œê³  ê³„ì…¨ë‚˜ìš”? ì§€êµ¬ì—ì„œ ê°€ì¥ ê¹Šì€ ë°”ë‹¤ëŠ” ë§ˆë¦¬ì•„ë‚˜ í•´êµ¬ë¡œ ì•½ 11,000mì…ë‹ˆë‹¤.",
                "í¥ë¯¸ë¡œìš´ ì‚¬ì‹¤: ë¬¸ì–´ëŠ” ì‹¬ì¥ì´ 3ê°œë‚˜ ìˆë‹µë‹ˆë‹¤! ğŸ™"
            ],
            default: [
                "í¥ë¯¸ë¡œìš´ ì§ˆë¬¸ì´ë„¤ìš”! ë” ìì„¸íˆ ì„¤ëª…í•´ ì£¼ì‹œê² ì–´ìš”?",
                "ê·¸ê²ƒì— ëŒ€í•´ ìƒê°í•´ë³´ë‹ˆ ì—¬ëŸ¬ ê´€ì ì´ ìˆì„ ìˆ˜ ìˆê² ë„¤ìš”.",
                "ì¢‹ì€ ì£¼ì œì…ë‹ˆë‹¤. ì œê°€ ë„ì›€ì„ ë“œë¦´ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ìˆë‚˜ìš”?",
                "ê·¸ ì§ˆë¬¸ì— ë‹µë³€ë“œë¦¬ìë©´, ìš°ì„  ê¸°ë³¸ì ì¸ ê°œë…ë¶€í„° ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.",
                "ë„¤, ì´í•´í–ˆìŠµë‹ˆë‹¤. ë‹¨ê³„ë³„ë¡œ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n1. ì²« ë²ˆì§¸ ë‹¨ê³„\n2. ë‘ ë²ˆì§¸ ë‹¨ê³„\n3. ì„¸ ë²ˆì§¸ ë‹¨ê³„"
            ]
        };

        function generateResponse(userMessage) {
            const msg = userMessage.toLowerCase();

            if (msg.includes('ì•ˆë…•') || msg.includes('hello') || msg.includes('hi')) {
                return aiResponses.greeting[Math.floor(Math.random() * aiResponses.greeting.length)];
            } else if (msg.includes('ì½”ë“œ') || msg.includes('í”„ë¡œê·¸ë˜ë°') || msg.includes('python') || msg.includes('javascript')) {
                return aiResponses.coding[Math.floor(Math.random() * aiResponses.coding.length)];
            } else if (msg.includes('ìŒì‹') || msg.includes('ë©”ë‰´') || msg.includes('ë¨¹') || msg.includes('ì ì‹¬') || msg.includes('ì €ë…')) {
                return aiResponses.food[Math.floor(Math.random() * aiResponses.food.length)];
            } else if (msg.includes('ê¸€') || msg.includes('ì´ë©”ì¼') || msg.includes('ì‘ì„±')) {
                return aiResponses.writing[Math.floor(Math.random() * aiResponses.writing.length)];
            } else if (msg.includes('ì‚¬ì‹¤') || msg.includes('ì•Œë ¤') || msg.includes('ë°°ìš°')) {
                return aiResponses.knowledge[Math.floor(Math.random() * aiResponses.knowledge.length)];
            } else {
                return aiResponses.default[Math.floor(Math.random() * aiResponses.default.length)];
            }
        }

        function newChat() {
            currentConversationId = Date.now();
            currentMessages = [];
            document.getElementById('messages').innerHTML = '';
            document.getElementById('messages').classList.add('hidden');
            document.getElementById('welcomeScreen').classList.remove('hidden');
            document.getElementById('messageInput').value = '';
        }

        function usePrompt(text) {
            document.getElementById('messageInput').value = text;
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message) return;

            // Hide welcome screen
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('messages').classList.remove('hidden');

            // Create conversation if new
            if (!currentConversationId) {
                currentConversationId = Date.now();
                const title = message.substring(0, 30) + (message.length > 30 ? '...' : '');
                conversations.unshift({
                    id: currentConversationId,
                    title: title,
                    messages: [],
                    timestamp: new Date().toISOString()
                });
                saveConversations();
                renderChatHistory();
            }

            // Add user message
            addMessage('user', message);
            input.value = '';
            autoResizeTextarea();

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateResponse(message);
                addMessage('assistant', response);
                saveCurrentConversation();
            }, 1000 + Math.random() * 2000);
        }

        function addMessage(role, content) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message message-${role} px-6 py-6 flex gap-4`;

            const iconDiv = document.createElement('div');
            iconDiv.className = 'flex-shrink-0';
            if (role === 'user') {
                iconDiv.innerHTML = '<div class="w-8 h-8 bg-green-600 rounded-sm flex items-center justify-center text-white"><i class="fas fa-user"></i></div>';
            } else {
                iconDiv.innerHTML = '<div class="w-8 h-8 bg-purple-600 rounded-sm flex items-center justify-center text-white"><i class="fas fa-robot"></i></div>';
            }

            const contentDiv = document.createElement('div');
            contentDiv.className = 'flex-1 space-y-2';

            if (role === 'assistant') {
                // Render markdown for assistant messages
                const html = marked.parse(content);
                contentDiv.innerHTML = `<div class="text-gray-100 prose prose-invert max-w-none">${html}</div>`;

                // Highlight code blocks
                contentDiv.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });

                // Add copy buttons to code blocks
                contentDiv.querySelectorAll('pre').forEach((pre) => {
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'absolute top-2 right-2 px-2 py-1 bg-gray-700 hover:bg-gray-600 text-xs text-white rounded';
                    copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy';
                    copyBtn.onclick = () => {
                        const code = pre.querySelector('code').textContent;
                        navigator.clipboard.writeText(code);
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        setTimeout(() => copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copy', 2000);
                    };
                    pre.style.position = 'relative';
                    pre.appendChild(copyBtn);
                });
            } else {
                contentDiv.innerHTML = `<div class="text-gray-100">${escapeHtml(content)}</div>`;
            }

            messageDiv.appendChild(iconDiv);
            messageDiv.appendChild(contentDiv);
            messagesDiv.appendChild(messageDiv);

            // Scroll to bottom
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            // Save to current messages
            currentMessages.push({ role, content });
        }

        function showTypingIndicator() {
            const messagesDiv = document.getElementById('messages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'chat-message message-assistant px-6 py-6 flex gap-4';
            typingDiv.innerHTML = `
                <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-purple-600 rounded-sm flex items-center justify-center text-white">
                        <i class="fas fa-robot"></i>
                    </div>
                </div>
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            messagesDiv.appendChild(typingDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) indicator.remove();
        }

        function saveCurrentConversation() {
            const conv = conversations.find(c => c.id === currentConversationId);
            if (conv) {
                conv.messages = currentMessages;
                saveConversations();
            }
        }

        function saveConversations() {
            localStorage.setItem('chatgpt_conversations', JSON.stringify(conversations));
        }

        function renderChatHistory() {
            const historyDiv = document.getElementById('chatHistory');
            historyDiv.innerHTML = conversations.map(conv => `
                <div class="sidebar-item px-3 py-2 rounded-lg mb-1 cursor-pointer text-gray-300 text-sm hover:bg-gray-700 transition-colors" onclick="loadConversation(${conv.id})">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-message text-xs"></i>
                        <span class="flex-1 truncate">${conv.title}</span>
                    </div>
                </div>
            `).join('') || '<div class="text-gray-500 text-sm px-3">ëŒ€í™” ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</div>';
        }

        function loadConversation(id) {
            const conv = conversations.find(c => c.id === id);
            if (!conv) return;

            currentConversationId = id;
            currentMessages = conv.messages || [];

            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('messages').classList.remove('hidden');

            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML = '';

            currentMessages.forEach(msg => {
                addMessage(msg.role, msg.content);
            });
        }

        function clearChat() {
            if (confirm('í˜„ì¬ ëŒ€í™”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                newChat();
            }
        }

        function toggleDarkMode() {
            alert('ë‹¤í¬ëª¨ë“œëŠ” ì´ë¯¸ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤!');
        }

        function autoResizeTextarea() {
            const textarea = document.getElementById('messageInput');
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 200) + 'px';
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Auto-resize textarea on input
        document.getElementById('messageInput').addEventListener('input', autoResizeTextarea);

        // Sidebar toggle for mobile
        document.getElementById('sidebarToggle').addEventListener('click', () => {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // Initialize
        renderChatHistory();
    </script>
</body>
</html>
